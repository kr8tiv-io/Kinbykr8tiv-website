(()=>{var Ew=Object.create;var Yi=Object.defineProperty;var bw=Object.getOwnPropertyDescriptor;var _w=Object.getOwnPropertyNames;var xw=Object.getPrototypeOf,Rw=Object.prototype.hasOwnProperty;var Ph=t=>{throw TypeError(t)};var Sw=(t,e,r)=>e in t?Yi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ch=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Mr=(t,e)=>()=>(t&&(e=t(t=0)),e);var cr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),wl=(t,e)=>{for(var r in e)Yi(t,r,{get:e[r],enumerable:!0})},Lh=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of _w(e))!Rw.call(t,s)&&s!==r&&Yi(t,s,{get:()=>e[s],enumerable:!(n=bw(e,s))||n.enumerable});return t};var pr=(t,e,r)=>(r=t!=null?Ew(xw(t)):{},Lh(e||!t||!t.__esModule?Yi(r,"default",{value:t,enumerable:!0}):r,t)),Dh=t=>Lh(Yi({},"__esModule",{value:!0}),t);var Xa=(t,e,r)=>Sw(t,typeof e!="symbol"?e+"":e,r),El=(t,e,r)=>e.has(t)||Ph("Cannot "+r);var Ze=(t,e,r)=>(El(t,e,"read from private field"),r?r.call(t):e.get(t)),xt=(t,e,r)=>e.has(t)?Ph("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Te=(t,e,r,n)=>(El(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Qa=(t,e,r)=>(El(t,e,"access private method"),r);var O0=cr(Ac=>{"use strict";Ac.byteLength=WE;Ac.toByteArray=qE;Ac.fromByteArray=GE;var Mn=[],gn=[],VE=typeof Uint8Array<"u"?Uint8Array:Array,jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(uo=0,A0=jl.length;uo<A0;++uo)Mn[uo]=jl[uo],gn[jl.charCodeAt(uo)]=uo;var uo,A0;gn[45]=62;gn[95]=63;function T0(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function WE(t){var e=T0(t),r=e[0],n=e[1];return(r+n)*3/4-n}function HE(t,e,r){return(e+r)*3/4-r}function qE(t){var e,r=T0(t),n=r[0],s=r[1],o=new VE(HE(t,n,s)),i=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)e=gn[t.charCodeAt(u)]<<18|gn[t.charCodeAt(u+1)]<<12|gn[t.charCodeAt(u+2)]<<6|gn[t.charCodeAt(u+3)],o[i++]=e>>16&255,o[i++]=e>>8&255,o[i++]=e&255;return s===2&&(e=gn[t.charCodeAt(u)]<<2|gn[t.charCodeAt(u+1)]>>4,o[i++]=e&255),s===1&&(e=gn[t.charCodeAt(u)]<<10|gn[t.charCodeAt(u+1)]<<4|gn[t.charCodeAt(u+2)]>>2,o[i++]=e>>8&255,o[i++]=e&255),o}function $E(t){return Mn[t>>18&63]+Mn[t>>12&63]+Mn[t>>6&63]+Mn[t&63]}function jE(t,e,r){for(var n,s=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),s.push($E(n));return s.join("")}function GE(t){for(var e,r=t.length,n=r%3,s=[],o=16383,i=0,a=r-n;i<a;i+=o)s.push(jE(t,i,i+o>a?a:i+o));return n===1?(e=t[r-1],s.push(Mn[e>>2]+Mn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(Mn[e>>10]+Mn[e>>4&63]+Mn[e<<2&63]+"=")),s.join("")}});var N0=cr(Gl=>{Gl.read=function(t,e,r,n,s){var o,i,a=s*8-n-1,u=(1<<a)-1,h=u>>1,m=-7,y=r?s-1:0,O=r?-1:1,S=t[e+y];for(y+=O,o=S&(1<<-m)-1,S>>=-m,m+=a;m>0;o=o*256+t[e+y],y+=O,m-=8);for(i=o&(1<<-m)-1,o>>=-m,m+=n;m>0;i=i*256+t[e+y],y+=O,m-=8);if(o===0)o=1-h;else{if(o===u)return i?NaN:(S?-1:1)*(1/0);i=i+Math.pow(2,n),o=o-h}return(S?-1:1)*i*Math.pow(2,o-n)};Gl.write=function(t,e,r,n,s,o){var i,a,u,h=o*8-s-1,m=(1<<h)-1,y=m>>1,O=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=n?0:o-1,R=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,i=m):(i=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-i))<1&&(i--,u*=2),i+y>=1?e+=O/u:e+=O*Math.pow(2,1-y),e*u>=2&&(i++,u/=2),i+y>=m?(a=0,i=m):i+y>=1?(a=(e*u-1)*Math.pow(2,s),i=i+y):(a=e*Math.pow(2,y-1)*Math.pow(2,s),i=0));s>=8;t[r+S]=a&255,S+=R,a/=256,s-=8);for(i=i<<s|a,h+=s;h>0;t[r+S]=i&255,S+=R,i/=256,h-=8);t[r+S-R]|=A*128}});var mn=cr(ei=>{"use strict";var Yl=O0(),Xo=N0(),B0=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ei.Buffer=ee;ei.SlowBuffer=eb;ei.INSPECT_MAX_BYTES=50;var Tc=2147483647;ei.kMaxLength=Tc;ee.TYPED_ARRAY_SUPPORT=YE();!ee.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function YE(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(ee.prototype,"parent",{enumerable:!0,get:function(){if(ee.isBuffer(this))return this.buffer}});Object.defineProperty(ee.prototype,"offset",{enumerable:!0,get:function(){if(ee.isBuffer(this))return this.byteOffset}});function Yn(t){if(t>Tc)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,ee.prototype),e}function ee(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ql(t)}return L0(t,e,r)}ee.poolSize=8192;function L0(t,e,r){if(typeof t=="string")return ZE(t,e);if(ArrayBuffer.isView(t))return XE(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Un(t,ArrayBuffer)||t&&Un(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Un(t,SharedArrayBuffer)||t&&Un(t.buffer,SharedArrayBuffer)))return Zl(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return ee.from(n,e,r);let s=QE(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return ee.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}ee.from=function(t,e,r){return L0(t,e,r)};Object.setPrototypeOf(ee.prototype,Uint8Array.prototype);Object.setPrototypeOf(ee,Uint8Array);function D0(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function JE(t,e,r){return D0(t),t<=0?Yn(t):e!==void 0?typeof r=="string"?Yn(t).fill(e,r):Yn(t).fill(e):Yn(t)}ee.alloc=function(t,e,r){return JE(t,e,r)};function Ql(t){return D0(t),Yn(t<0?0:ef(t)|0)}ee.allocUnsafe=function(t){return Ql(t)};ee.allocUnsafeSlow=function(t){return Ql(t)};function ZE(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!ee.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=M0(t,e)|0,n=Yn(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function Jl(t){let e=t.length<0?0:ef(t.length)|0,r=Yn(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function XE(t){if(Un(t,Uint8Array)){let e=new Uint8Array(t);return Zl(e.buffer,e.byteOffset,e.byteLength)}return Jl(t)}function Zl(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,ee.prototype),n}function QE(t){if(ee.isBuffer(t)){let e=ef(t.length)|0,r=Yn(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||rf(t.length)?Yn(0):Jl(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Jl(t.data)}function ef(t){if(t>=Tc)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Tc.toString(16)+" bytes");return t|0}function eb(t){return+t!=t&&(t=0),ee.alloc(+t)}ee.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==ee.prototype};ee.compare=function(e,r){if(Un(e,Uint8Array)&&(e=ee.from(e,e.offset,e.byteLength)),Un(r,Uint8Array)&&(r=ee.from(r,r.offset,r.byteLength)),!ee.isBuffer(e)||!ee.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,s=r.length;for(let o=0,i=Math.min(n,s);o<i;++o)if(e[o]!==r[o]){n=e[o],s=r[o];break}return n<s?-1:s<n?1:0};ee.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ee.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ee.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let s=ee.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){let i=e[n];if(Un(i,Uint8Array))o+i.length>s.length?(ee.isBuffer(i)||(i=ee.from(i)),i.copy(s,o)):Uint8Array.prototype.set.call(s,i,o);else if(ee.isBuffer(i))i.copy(s,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=i.length}return s};function M0(t,e){if(ee.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Un(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Xl(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return $0(t).length;default:if(s)return n?-1:Xl(t).length;e=(""+e).toLowerCase(),s=!0}}ee.byteLength=M0;function tb(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return fb(this,e,r);case"utf8":case"utf-8":return z0(this,e,r);case"ascii":return ub(this,e,r);case"latin1":case"binary":return lb(this,e,r);case"base64":return ab(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return db(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}ee.prototype._isBuffer=!0;function lo(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}ee.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)lo(this,r,r+1);return this};ee.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)lo(this,r,r+3),lo(this,r+1,r+2);return this};ee.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)lo(this,r,r+7),lo(this,r+1,r+6),lo(this,r+2,r+5),lo(this,r+3,r+4);return this};ee.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?z0(this,0,e):tb.apply(this,arguments)};ee.prototype.toLocaleString=ee.prototype.toString;ee.prototype.equals=function(e){if(!ee.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ee.compare(this,e)===0};ee.prototype.inspect=function(){let e="",r=ei.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};B0&&(ee.prototype[B0]=ee.prototype.inspect);ee.prototype.compare=function(e,r,n,s,o){if(Un(e,Uint8Array)&&(e=ee.from(e,e.offset,e.byteLength)),!ee.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),o===void 0&&(o=this.length),r<0||n>e.length||s<0||o>this.length)throw new RangeError("out of range index");if(s>=o&&r>=n)return 0;if(s>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,o>>>=0,this===e)return 0;let i=o-s,a=n-r,u=Math.min(i,a),h=this.slice(s,o),m=e.slice(r,n);for(let y=0;y<u;++y)if(h[y]!==m[y]){i=h[y],a=m[y];break}return i<a?-1:a<i?1:0};function U0(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,rf(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof e=="string"&&(e=ee.from(e,n)),ee.isBuffer(e))return e.length===0?-1:k0(t,e,r,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):k0(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function k0(t,e,r,n,s){let o=1,i=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,i/=2,a/=2,r/=2}function u(m,y){return o===1?m[y]:m.readUInt16BE(y*o)}let h;if(s){let m=-1;for(h=r;h<i;h++)if(u(t,h)===u(e,m===-1?0:h-m)){if(m===-1&&(m=h),h-m+1===a)return m*o}else m!==-1&&(h-=h-m),m=-1}else for(r+a>i&&(r=i-a),h=r;h>=0;h--){let m=!0;for(let y=0;y<a;y++)if(u(t,h+y)!==u(e,y)){m=!1;break}if(m)return h}return-1}ee.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};ee.prototype.indexOf=function(e,r,n){return U0(this,e,r,n,!0)};ee.prototype.lastIndexOf=function(e,r,n){return U0(this,e,r,n,!1)};function rb(t,e,r,n){r=Number(r)||0;let s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;let o=e.length;n>o/2&&(n=o/2);let i;for(i=0;i<n;++i){let a=parseInt(e.substr(i*2,2),16);if(rf(a))return i;t[r+i]=a}return i}function nb(t,e,r,n){return Oc(Xl(e,t.length-r),t,r,n)}function sb(t,e,r,n){return Oc(mb(e),t,r,n)}function ob(t,e,r,n){return Oc($0(e),t,r,n)}function ib(t,e,r,n){return Oc(yb(e,t.length-r),t,r,n)}ee.prototype.write=function(e,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let i=!1;for(;;)switch(s){case"hex":return rb(this,e,r,n);case"utf8":case"utf-8":return nb(this,e,r,n);case"ascii":case"latin1":case"binary":return sb(this,e,r,n);case"base64":return ob(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ib(this,e,r,n);default:if(i)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),i=!0}};ee.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ab(t,e,r){return e===0&&r===t.length?Yl.fromByteArray(t):Yl.fromByteArray(t.slice(e,r))}function z0(t,e,r){r=Math.min(t.length,r);let n=[],s=e;for(;s<r;){let o=t[s],i=null,a=o>239?4:o>223?3:o>191?2:1;if(s+a<=r){let u,h,m,y;switch(a){case 1:o<128&&(i=o);break;case 2:u=t[s+1],(u&192)===128&&(y=(o&31)<<6|u&63,y>127&&(i=y));break;case 3:u=t[s+1],h=t[s+2],(u&192)===128&&(h&192)===128&&(y=(o&15)<<12|(u&63)<<6|h&63,y>2047&&(y<55296||y>57343)&&(i=y));break;case 4:u=t[s+1],h=t[s+2],m=t[s+3],(u&192)===128&&(h&192)===128&&(m&192)===128&&(y=(o&15)<<18|(u&63)<<12|(h&63)<<6|m&63,y>65535&&y<1114112&&(i=y))}}i===null?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),s+=a}return cb(n)}var P0=4096;function cb(t){let e=t.length;if(e<=P0)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=P0));return r}function ub(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]&127);return n}function lb(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function fb(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let o=e;o<r;++o)s+=wb[t[o]];return s}function db(t,e,r){let n=t.slice(e,r),s="";for(let o=0;o<n.length-1;o+=2)s+=String.fromCharCode(n[o]+n[o+1]*256);return s}ee.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let s=this.subarray(e,r);return Object.setPrototypeOf(s,ee.prototype),s};function gr(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}ee.prototype.readUintLE=ee.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||gr(e,r,this.length);let s=this[e],o=1,i=0;for(;++i<r&&(o*=256);)s+=this[e+i]*o;return s};ee.prototype.readUintBE=ee.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||gr(e,r,this.length);let s=this[e+--r],o=1;for(;r>0&&(o*=256);)s+=this[e+--r]*o;return s};ee.prototype.readUint8=ee.prototype.readUInt8=function(e,r){return e=e>>>0,r||gr(e,1,this.length),this[e]};ee.prototype.readUint16LE=ee.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||gr(e,2,this.length),this[e]|this[e+1]<<8};ee.prototype.readUint16BE=ee.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||gr(e,2,this.length),this[e]<<8|this[e+1]};ee.prototype.readUint32LE=ee.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||gr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};ee.prototype.readUint32BE=ee.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||gr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ee.prototype.readBigUInt64LE=xs(function(e){e=e>>>0,Qo(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ua(e,this.length-8);let s=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(o)<<BigInt(32))});ee.prototype.readBigUInt64BE=xs(function(e){e=e>>>0,Qo(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ua(e,this.length-8);let s=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(o)});ee.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||gr(e,r,this.length);let s=this[e],o=1,i=0;for(;++i<r&&(o*=256);)s+=this[e+i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};ee.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||gr(e,r,this.length);let s=r,o=1,i=this[e+--s];for(;s>0&&(o*=256);)i+=this[e+--s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};ee.prototype.readInt8=function(e,r){return e=e>>>0,r||gr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};ee.prototype.readInt16LE=function(e,r){e=e>>>0,r||gr(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};ee.prototype.readInt16BE=function(e,r){e=e>>>0,r||gr(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};ee.prototype.readInt32LE=function(e,r){return e=e>>>0,r||gr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ee.prototype.readInt32BE=function(e,r){return e=e>>>0,r||gr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ee.prototype.readBigInt64LE=xs(function(e){e=e>>>0,Qo(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ua(e,this.length-8);let s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});ee.prototype.readBigInt64BE=xs(function(e){e=e>>>0,Qo(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ua(e,this.length-8);let s=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});ee.prototype.readFloatLE=function(e,r){return e=e>>>0,r||gr(e,4,this.length),Xo.read(this,e,!0,23,4)};ee.prototype.readFloatBE=function(e,r){return e=e>>>0,r||gr(e,4,this.length),Xo.read(this,e,!1,23,4)};ee.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||gr(e,8,this.length),Xo.read(this,e,!0,52,8)};ee.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||gr(e,8,this.length),Xo.read(this,e,!1,52,8)};function Jr(t,e,r,n,s,o){if(!ee.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}ee.prototype.writeUintLE=ee.prototype.writeUIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;Jr(this,e,r,n,a,0)}let o=1,i=0;for(this[r]=e&255;++i<n&&(o*=256);)this[r+i]=e/o&255;return r+n};ee.prototype.writeUintBE=ee.prototype.writeUIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;Jr(this,e,r,n,a,0)}let o=n-1,i=1;for(this[r+o]=e&255;--o>=0&&(i*=256);)this[r+o]=e/i&255;return r+n};ee.prototype.writeUint8=ee.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,1,255,0),this[r]=e&255,r+1};ee.prototype.writeUint16LE=ee.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};ee.prototype.writeUint16BE=ee.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};ee.prototype.writeUint32LE=ee.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};ee.prototype.writeUint32BE=ee.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function F0(t,e,r,n,s){q0(e,n,s,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o;let i=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,r}function K0(t,e,r,n,s){q0(e,n,s,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o=o>>8,t[r+6]=o,o=o>>8,t[r+5]=o,o=o>>8,t[r+4]=o;let i=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=i,i=i>>8,t[r+2]=i,i=i>>8,t[r+1]=i,i=i>>8,t[r]=i,r+8}ee.prototype.writeBigUInt64LE=xs(function(e,r=0){return F0(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});ee.prototype.writeBigUInt64BE=xs(function(e,r=0){return K0(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});ee.prototype.writeIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);Jr(this,e,r,n,u-1,-u)}let o=0,i=1,a=0;for(this[r]=e&255;++o<n&&(i*=256);)e<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(e/i>>0)-a&255;return r+n};ee.prototype.writeIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);Jr(this,e,r,n,u-1,-u)}let o=n-1,i=1,a=0;for(this[r+o]=e&255;--o>=0&&(i*=256);)e<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(e/i>>0)-a&255;return r+n};ee.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};ee.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};ee.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};ee.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};ee.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Jr(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};ee.prototype.writeBigInt64LE=xs(function(e,r=0){return F0(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});ee.prototype.writeBigInt64BE=xs(function(e,r=0){return K0(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V0(t,e,r,n,s,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function W0(t,e,r,n,s){return e=+e,r=r>>>0,s||V0(t,e,r,4,34028234663852886e22,-34028234663852886e22),Xo.write(t,e,r,n,23,4),r+4}ee.prototype.writeFloatLE=function(e,r,n){return W0(this,e,r,!0,n)};ee.prototype.writeFloatBE=function(e,r,n){return W0(this,e,r,!1,n)};function H0(t,e,r,n,s){return e=+e,r=r>>>0,s||V0(t,e,r,8,17976931348623157e292,-17976931348623157e292),Xo.write(t,e,r,n,52,8),r+8}ee.prototype.writeDoubleLE=function(e,r,n){return H0(this,e,r,!0,n)};ee.prototype.writeDoubleBE=function(e,r,n){return H0(this,e,r,!1,n)};ee.prototype.copy=function(e,r,n,s){if(!ee.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);let o=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),r),o};ee.prototype.fill=function(e,r,n,s){if(typeof e=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!ee.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){let i=e.charCodeAt(0);(s==="utf8"&&i<128||s==="latin1")&&(e=i)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{let i=ee.isBuffer(e)?e:ee.from(e,s),a=i.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=i[o%a]}return this};var Zo={};function tf(t,e,r){Zo[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}tf("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);tf("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);tf("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=C0(String(r)):typeof r=="bigint"&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=C0(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function C0(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function hb(t,e,r){Qo(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&ua(e,t.length-(r+1))}function q0(t,e,r,n,s,o){if(t>r||t<e){let i=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:a=`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:a=`>= ${e}${i} and <= ${r}${i}`,new Zo.ERR_OUT_OF_RANGE("value",a,t)}hb(n,s,o)}function Qo(t,e){if(typeof t!="number")throw new Zo.ERR_INVALID_ARG_TYPE(e,"number",t)}function ua(t,e,r){throw Math.floor(t)!==t?(Qo(t,r),new Zo.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Zo.ERR_BUFFER_OUT_OF_BOUNDS:new Zo.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var pb=/[^+/0-9A-Za-z-_]/g;function gb(t){if(t=t.split("=")[0],t=t.trim().replace(pb,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Xl(t,e){e=e||1/0;let r,n=t.length,s=null,o=[];for(let i=0;i<n;++i){if(r=t.charCodeAt(i),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(i+1===n){(e-=3)>-1&&o.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&o.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function mb(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function yb(t,e){let r,n,s,o=[];for(let i=0;i<t.length&&!((e-=2)<0);++i)r=t.charCodeAt(i),n=r>>8,s=r%256,o.push(s),o.push(n);return o}function $0(t){return Yl.toByteArray(gb(t))}function Oc(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function Un(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function rf(t){return t!==t}var wb=(function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s]}return e})();function xs(t){return typeof BigInt>"u"?Eb:t}function Eb(){throw new Error("BigInt not supported")}});var X0=cr(()=>{});var Q0=cr((M3,Cc)=>{(function(t){"use strict";var e=function(g){var _,E=new Float64Array(16);if(g)for(_=0;_<g.length;_++)E[_]=g[_];return E},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=e(),i=e([1]),a=e([56129,1]),u=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),O=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function S(g,_,E,f){g[_]=E>>24&255,g[_+1]=E>>16&255,g[_+2]=E>>8&255,g[_+3]=E&255,g[_+4]=f>>24&255,g[_+5]=f>>16&255,g[_+6]=f>>8&255,g[_+7]=f&255}function R(g,_,E,f,T){var F,W=0;for(F=0;F<T;F++)W|=g[_+F]^E[f+F];return(1&W-1>>>8)-1}function A(g,_,E,f){return R(g,_,E,f,16)}function I(g,_,E,f){return R(g,_,E,f,32)}function k(g,_,E,f){for(var T=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,F=E[0]&255|(E[1]&255)<<8|(E[2]&255)<<16|(E[3]&255)<<24,W=E[4]&255|(E[5]&255)<<8|(E[6]&255)<<16|(E[7]&255)<<24,Q=E[8]&255|(E[9]&255)<<8|(E[10]&255)<<16|(E[11]&255)<<24,ie=E[12]&255|(E[13]&255)<<8|(E[14]&255)<<16|(E[15]&255)<<24,Ie=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,fe=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,Be=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,Ee=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,Pe=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Le=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,Ve=E[16]&255|(E[17]&255)<<8|(E[18]&255)<<16|(E[19]&255)<<24,Fe=E[20]&255|(E[21]&255)<<8|(E[22]&255)<<16|(E[23]&255)<<24,De=E[24]&255|(E[25]&255)<<8|(E[26]&255)<<16|(E[27]&255)<<24,Ue=E[28]&255|(E[29]&255)<<8|(E[30]&255)<<16|(E[31]&255)<<24,Me=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,be=T,Ae=F,ye=W,Re=Q,Se=ie,me=Ie,G=fe,J=Be,ae=Ee,re=Pe,ne=Le,le=Ve,ke=Fe,He=De,je=Ue,qe=Me,U,Qe=0;Qe<20;Qe+=2)U=be+ke|0,Se^=U<<7|U>>>25,U=Se+be|0,ae^=U<<9|U>>>23,U=ae+Se|0,ke^=U<<13|U>>>19,U=ke+ae|0,be^=U<<18|U>>>14,U=me+Ae|0,re^=U<<7|U>>>25,U=re+me|0,He^=U<<9|U>>>23,U=He+re|0,Ae^=U<<13|U>>>19,U=Ae+He|0,me^=U<<18|U>>>14,U=ne+G|0,je^=U<<7|U>>>25,U=je+ne|0,ye^=U<<9|U>>>23,U=ye+je|0,G^=U<<13|U>>>19,U=G+ye|0,ne^=U<<18|U>>>14,U=qe+le|0,Re^=U<<7|U>>>25,U=Re+qe|0,J^=U<<9|U>>>23,U=J+Re|0,le^=U<<13|U>>>19,U=le+J|0,qe^=U<<18|U>>>14,U=be+Re|0,Ae^=U<<7|U>>>25,U=Ae+be|0,ye^=U<<9|U>>>23,U=ye+Ae|0,Re^=U<<13|U>>>19,U=Re+ye|0,be^=U<<18|U>>>14,U=me+Se|0,G^=U<<7|U>>>25,U=G+me|0,J^=U<<9|U>>>23,U=J+G|0,Se^=U<<13|U>>>19,U=Se+J|0,me^=U<<18|U>>>14,U=ne+re|0,le^=U<<7|U>>>25,U=le+ne|0,ae^=U<<9|U>>>23,U=ae+le|0,re^=U<<13|U>>>19,U=re+ae|0,ne^=U<<18|U>>>14,U=qe+je|0,ke^=U<<7|U>>>25,U=ke+qe|0,He^=U<<9|U>>>23,U=He+ke|0,je^=U<<13|U>>>19,U=je+He|0,qe^=U<<18|U>>>14;be=be+T|0,Ae=Ae+F|0,ye=ye+W|0,Re=Re+Q|0,Se=Se+ie|0,me=me+Ie|0,G=G+fe|0,J=J+Be|0,ae=ae+Ee|0,re=re+Pe|0,ne=ne+Le|0,le=le+Ve|0,ke=ke+Fe|0,He=He+De|0,je=je+Ue|0,qe=qe+Me|0,g[0]=be>>>0&255,g[1]=be>>>8&255,g[2]=be>>>16&255,g[3]=be>>>24&255,g[4]=Ae>>>0&255,g[5]=Ae>>>8&255,g[6]=Ae>>>16&255,g[7]=Ae>>>24&255,g[8]=ye>>>0&255,g[9]=ye>>>8&255,g[10]=ye>>>16&255,g[11]=ye>>>24&255,g[12]=Re>>>0&255,g[13]=Re>>>8&255,g[14]=Re>>>16&255,g[15]=Re>>>24&255,g[16]=Se>>>0&255,g[17]=Se>>>8&255,g[18]=Se>>>16&255,g[19]=Se>>>24&255,g[20]=me>>>0&255,g[21]=me>>>8&255,g[22]=me>>>16&255,g[23]=me>>>24&255,g[24]=G>>>0&255,g[25]=G>>>8&255,g[26]=G>>>16&255,g[27]=G>>>24&255,g[28]=J>>>0&255,g[29]=J>>>8&255,g[30]=J>>>16&255,g[31]=J>>>24&255,g[32]=ae>>>0&255,g[33]=ae>>>8&255,g[34]=ae>>>16&255,g[35]=ae>>>24&255,g[36]=re>>>0&255,g[37]=re>>>8&255,g[38]=re>>>16&255,g[39]=re>>>24&255,g[40]=ne>>>0&255,g[41]=ne>>>8&255,g[42]=ne>>>16&255,g[43]=ne>>>24&255,g[44]=le>>>0&255,g[45]=le>>>8&255,g[46]=le>>>16&255,g[47]=le>>>24&255,g[48]=ke>>>0&255,g[49]=ke>>>8&255,g[50]=ke>>>16&255,g[51]=ke>>>24&255,g[52]=He>>>0&255,g[53]=He>>>8&255,g[54]=He>>>16&255,g[55]=He>>>24&255,g[56]=je>>>0&255,g[57]=je>>>8&255,g[58]=je>>>16&255,g[59]=je>>>24&255,g[60]=qe>>>0&255,g[61]=qe>>>8&255,g[62]=qe>>>16&255,g[63]=qe>>>24&255}function z(g,_,E,f){for(var T=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,F=E[0]&255|(E[1]&255)<<8|(E[2]&255)<<16|(E[3]&255)<<24,W=E[4]&255|(E[5]&255)<<8|(E[6]&255)<<16|(E[7]&255)<<24,Q=E[8]&255|(E[9]&255)<<8|(E[10]&255)<<16|(E[11]&255)<<24,ie=E[12]&255|(E[13]&255)<<8|(E[14]&255)<<16|(E[15]&255)<<24,Ie=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,fe=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,Be=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,Ee=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,Pe=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Le=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,Ve=E[16]&255|(E[17]&255)<<8|(E[18]&255)<<16|(E[19]&255)<<24,Fe=E[20]&255|(E[21]&255)<<8|(E[22]&255)<<16|(E[23]&255)<<24,De=E[24]&255|(E[25]&255)<<8|(E[26]&255)<<16|(E[27]&255)<<24,Ue=E[28]&255|(E[29]&255)<<8|(E[30]&255)<<16|(E[31]&255)<<24,Me=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,be=T,Ae=F,ye=W,Re=Q,Se=ie,me=Ie,G=fe,J=Be,ae=Ee,re=Pe,ne=Le,le=Ve,ke=Fe,He=De,je=Ue,qe=Me,U,Qe=0;Qe<20;Qe+=2)U=be+ke|0,Se^=U<<7|U>>>25,U=Se+be|0,ae^=U<<9|U>>>23,U=ae+Se|0,ke^=U<<13|U>>>19,U=ke+ae|0,be^=U<<18|U>>>14,U=me+Ae|0,re^=U<<7|U>>>25,U=re+me|0,He^=U<<9|U>>>23,U=He+re|0,Ae^=U<<13|U>>>19,U=Ae+He|0,me^=U<<18|U>>>14,U=ne+G|0,je^=U<<7|U>>>25,U=je+ne|0,ye^=U<<9|U>>>23,U=ye+je|0,G^=U<<13|U>>>19,U=G+ye|0,ne^=U<<18|U>>>14,U=qe+le|0,Re^=U<<7|U>>>25,U=Re+qe|0,J^=U<<9|U>>>23,U=J+Re|0,le^=U<<13|U>>>19,U=le+J|0,qe^=U<<18|U>>>14,U=be+Re|0,Ae^=U<<7|U>>>25,U=Ae+be|0,ye^=U<<9|U>>>23,U=ye+Ae|0,Re^=U<<13|U>>>19,U=Re+ye|0,be^=U<<18|U>>>14,U=me+Se|0,G^=U<<7|U>>>25,U=G+me|0,J^=U<<9|U>>>23,U=J+G|0,Se^=U<<13|U>>>19,U=Se+J|0,me^=U<<18|U>>>14,U=ne+re|0,le^=U<<7|U>>>25,U=le+ne|0,ae^=U<<9|U>>>23,U=ae+le|0,re^=U<<13|U>>>19,U=re+ae|0,ne^=U<<18|U>>>14,U=qe+je|0,ke^=U<<7|U>>>25,U=ke+qe|0,He^=U<<9|U>>>23,U=He+ke|0,je^=U<<13|U>>>19,U=je+He|0,qe^=U<<18|U>>>14;g[0]=be>>>0&255,g[1]=be>>>8&255,g[2]=be>>>16&255,g[3]=be>>>24&255,g[4]=me>>>0&255,g[5]=me>>>8&255,g[6]=me>>>16&255,g[7]=me>>>24&255,g[8]=ne>>>0&255,g[9]=ne>>>8&255,g[10]=ne>>>16&255,g[11]=ne>>>24&255,g[12]=qe>>>0&255,g[13]=qe>>>8&255,g[14]=qe>>>16&255,g[15]=qe>>>24&255,g[16]=G>>>0&255,g[17]=G>>>8&255,g[18]=G>>>16&255,g[19]=G>>>24&255,g[20]=J>>>0&255,g[21]=J>>>8&255,g[22]=J>>>16&255,g[23]=J>>>24&255,g[24]=ae>>>0&255,g[25]=ae>>>8&255,g[26]=ae>>>16&255,g[27]=ae>>>24&255,g[28]=re>>>0&255,g[29]=re>>>8&255,g[30]=re>>>16&255,g[31]=re>>>24&255}function M(g,_,E,f){k(g,_,E,f)}function K(g,_,E,f){z(g,_,E,f)}var Z=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function V(g,_,E,f,T,F,W){var Q=new Uint8Array(16),ie=new Uint8Array(64),Ie,fe;for(fe=0;fe<16;fe++)Q[fe]=0;for(fe=0;fe<8;fe++)Q[fe]=F[fe];for(;T>=64;){for(M(ie,Q,W,Z),fe=0;fe<64;fe++)g[_+fe]=E[f+fe]^ie[fe];for(Ie=1,fe=8;fe<16;fe++)Ie=Ie+(Q[fe]&255)|0,Q[fe]=Ie&255,Ie>>>=8;T-=64,_+=64,f+=64}if(T>0)for(M(ie,Q,W,Z),fe=0;fe<T;fe++)g[_+fe]=E[f+fe]^ie[fe];return 0}function Y(g,_,E,f,T){var F=new Uint8Array(16),W=new Uint8Array(64),Q,ie;for(ie=0;ie<16;ie++)F[ie]=0;for(ie=0;ie<8;ie++)F[ie]=f[ie];for(;E>=64;){for(M(W,F,T,Z),ie=0;ie<64;ie++)g[_+ie]=W[ie];for(Q=1,ie=8;ie<16;ie++)Q=Q+(F[ie]&255)|0,F[ie]=Q&255,Q>>>=8;E-=64,_+=64}if(E>0)for(M(W,F,T,Z),ie=0;ie<E;ie++)g[_+ie]=W[ie];return 0}function te(g,_,E,f,T){var F=new Uint8Array(32);K(F,f,T,Z);for(var W=new Uint8Array(8),Q=0;Q<8;Q++)W[Q]=f[Q+16];return Y(g,_,E,W,F)}function j(g,_,E,f,T,F,W){var Q=new Uint8Array(32);K(Q,F,W,Z);for(var ie=new Uint8Array(8),Ie=0;Ie<8;Ie++)ie[Ie]=F[Ie+16];return V(g,_,E,f,T,ie,Q)}var ce=function(g){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var _,E,f,T,F,W,Q,ie;_=g[0]&255|(g[1]&255)<<8,this.r[0]=_&8191,E=g[2]&255|(g[3]&255)<<8,this.r[1]=(_>>>13|E<<3)&8191,f=g[4]&255|(g[5]&255)<<8,this.r[2]=(E>>>10|f<<6)&7939,T=g[6]&255|(g[7]&255)<<8,this.r[3]=(f>>>7|T<<9)&8191,F=g[8]&255|(g[9]&255)<<8,this.r[4]=(T>>>4|F<<12)&255,this.r[5]=F>>>1&8190,W=g[10]&255|(g[11]&255)<<8,this.r[6]=(F>>>14|W<<2)&8191,Q=g[12]&255|(g[13]&255)<<8,this.r[7]=(W>>>11|Q<<5)&8065,ie=g[14]&255|(g[15]&255)<<8,this.r[8]=(Q>>>8|ie<<8)&8191,this.r[9]=ie>>>5&127,this.pad[0]=g[16]&255|(g[17]&255)<<8,this.pad[1]=g[18]&255|(g[19]&255)<<8,this.pad[2]=g[20]&255|(g[21]&255)<<8,this.pad[3]=g[22]&255|(g[23]&255)<<8,this.pad[4]=g[24]&255|(g[25]&255)<<8,this.pad[5]=g[26]&255|(g[27]&255)<<8,this.pad[6]=g[28]&255|(g[29]&255)<<8,this.pad[7]=g[30]&255|(g[31]&255)<<8};ce.prototype.blocks=function(g,_,E){for(var f=this.fin?0:2048,T,F,W,Q,ie,Ie,fe,Be,Ee,Pe,Le,Ve,Fe,De,Ue,Me,be,Ae,ye,Re=this.h[0],Se=this.h[1],me=this.h[2],G=this.h[3],J=this.h[4],ae=this.h[5],re=this.h[6],ne=this.h[7],le=this.h[8],ke=this.h[9],He=this.r[0],je=this.r[1],qe=this.r[2],U=this.r[3],Qe=this.r[4],ct=this.r[5],ut=this.r[6],Je=this.r[7],ot=this.r[8],it=this.r[9];E>=16;)T=g[_+0]&255|(g[_+1]&255)<<8,Re+=T&8191,F=g[_+2]&255|(g[_+3]&255)<<8,Se+=(T>>>13|F<<3)&8191,W=g[_+4]&255|(g[_+5]&255)<<8,me+=(F>>>10|W<<6)&8191,Q=g[_+6]&255|(g[_+7]&255)<<8,G+=(W>>>7|Q<<9)&8191,ie=g[_+8]&255|(g[_+9]&255)<<8,J+=(Q>>>4|ie<<12)&8191,ae+=ie>>>1&8191,Ie=g[_+10]&255|(g[_+11]&255)<<8,re+=(ie>>>14|Ie<<2)&8191,fe=g[_+12]&255|(g[_+13]&255)<<8,ne+=(Ie>>>11|fe<<5)&8191,Be=g[_+14]&255|(g[_+15]&255)<<8,le+=(fe>>>8|Be<<8)&8191,ke+=Be>>>5|f,Ee=0,Pe=Ee,Pe+=Re*He,Pe+=Se*(5*it),Pe+=me*(5*ot),Pe+=G*(5*Je),Pe+=J*(5*ut),Ee=Pe>>>13,Pe&=8191,Pe+=ae*(5*ct),Pe+=re*(5*Qe),Pe+=ne*(5*U),Pe+=le*(5*qe),Pe+=ke*(5*je),Ee+=Pe>>>13,Pe&=8191,Le=Ee,Le+=Re*je,Le+=Se*He,Le+=me*(5*it),Le+=G*(5*ot),Le+=J*(5*Je),Ee=Le>>>13,Le&=8191,Le+=ae*(5*ut),Le+=re*(5*ct),Le+=ne*(5*Qe),Le+=le*(5*U),Le+=ke*(5*qe),Ee+=Le>>>13,Le&=8191,Ve=Ee,Ve+=Re*qe,Ve+=Se*je,Ve+=me*He,Ve+=G*(5*it),Ve+=J*(5*ot),Ee=Ve>>>13,Ve&=8191,Ve+=ae*(5*Je),Ve+=re*(5*ut),Ve+=ne*(5*ct),Ve+=le*(5*Qe),Ve+=ke*(5*U),Ee+=Ve>>>13,Ve&=8191,Fe=Ee,Fe+=Re*U,Fe+=Se*qe,Fe+=me*je,Fe+=G*He,Fe+=J*(5*it),Ee=Fe>>>13,Fe&=8191,Fe+=ae*(5*ot),Fe+=re*(5*Je),Fe+=ne*(5*ut),Fe+=le*(5*ct),Fe+=ke*(5*Qe),Ee+=Fe>>>13,Fe&=8191,De=Ee,De+=Re*Qe,De+=Se*U,De+=me*qe,De+=G*je,De+=J*He,Ee=De>>>13,De&=8191,De+=ae*(5*it),De+=re*(5*ot),De+=ne*(5*Je),De+=le*(5*ut),De+=ke*(5*ct),Ee+=De>>>13,De&=8191,Ue=Ee,Ue+=Re*ct,Ue+=Se*Qe,Ue+=me*U,Ue+=G*qe,Ue+=J*je,Ee=Ue>>>13,Ue&=8191,Ue+=ae*He,Ue+=re*(5*it),Ue+=ne*(5*ot),Ue+=le*(5*Je),Ue+=ke*(5*ut),Ee+=Ue>>>13,Ue&=8191,Me=Ee,Me+=Re*ut,Me+=Se*ct,Me+=me*Qe,Me+=G*U,Me+=J*qe,Ee=Me>>>13,Me&=8191,Me+=ae*je,Me+=re*He,Me+=ne*(5*it),Me+=le*(5*ot),Me+=ke*(5*Je),Ee+=Me>>>13,Me&=8191,be=Ee,be+=Re*Je,be+=Se*ut,be+=me*ct,be+=G*Qe,be+=J*U,Ee=be>>>13,be&=8191,be+=ae*qe,be+=re*je,be+=ne*He,be+=le*(5*it),be+=ke*(5*ot),Ee+=be>>>13,be&=8191,Ae=Ee,Ae+=Re*ot,Ae+=Se*Je,Ae+=me*ut,Ae+=G*ct,Ae+=J*Qe,Ee=Ae>>>13,Ae&=8191,Ae+=ae*U,Ae+=re*qe,Ae+=ne*je,Ae+=le*He,Ae+=ke*(5*it),Ee+=Ae>>>13,Ae&=8191,ye=Ee,ye+=Re*it,ye+=Se*ot,ye+=me*Je,ye+=G*ut,ye+=J*ct,Ee=ye>>>13,ye&=8191,ye+=ae*Qe,ye+=re*U,ye+=ne*qe,ye+=le*je,ye+=ke*He,Ee+=ye>>>13,ye&=8191,Ee=(Ee<<2)+Ee|0,Ee=Ee+Pe|0,Pe=Ee&8191,Ee=Ee>>>13,Le+=Ee,Re=Pe,Se=Le,me=Ve,G=Fe,J=De,ae=Ue,re=Me,ne=be,le=Ae,ke=ye,_+=16,E-=16;this.h[0]=Re,this.h[1]=Se,this.h[2]=me,this.h[3]=G,this.h[4]=J,this.h[5]=ae,this.h[6]=re,this.h[7]=ne,this.h[8]=le,this.h[9]=ke},ce.prototype.finish=function(g,_){var E=new Uint16Array(10),f,T,F,W;if(this.leftover){for(W=this.leftover,this.buffer[W++]=1;W<16;W++)this.buffer[W]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(f=this.h[1]>>>13,this.h[1]&=8191,W=2;W<10;W++)this.h[W]+=f,f=this.h[W]>>>13,this.h[W]&=8191;for(this.h[0]+=f*5,f=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=f,f=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=f,E[0]=this.h[0]+5,f=E[0]>>>13,E[0]&=8191,W=1;W<10;W++)E[W]=this.h[W]+f,f=E[W]>>>13,E[W]&=8191;for(E[9]-=8192,T=(f^1)-1,W=0;W<10;W++)E[W]&=T;for(T=~T,W=0;W<10;W++)this.h[W]=this.h[W]&T|E[W];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,F=this.h[0]+this.pad[0],this.h[0]=F&65535,W=1;W<8;W++)F=(this.h[W]+this.pad[W]|0)+(F>>>16)|0,this.h[W]=F&65535;g[_+0]=this.h[0]>>>0&255,g[_+1]=this.h[0]>>>8&255,g[_+2]=this.h[1]>>>0&255,g[_+3]=this.h[1]>>>8&255,g[_+4]=this.h[2]>>>0&255,g[_+5]=this.h[2]>>>8&255,g[_+6]=this.h[3]>>>0&255,g[_+7]=this.h[3]>>>8&255,g[_+8]=this.h[4]>>>0&255,g[_+9]=this.h[4]>>>8&255,g[_+10]=this.h[5]>>>0&255,g[_+11]=this.h[5]>>>8&255,g[_+12]=this.h[6]>>>0&255,g[_+13]=this.h[6]>>>8&255,g[_+14]=this.h[7]>>>0&255,g[_+15]=this.h[7]>>>8&255},ce.prototype.update=function(g,_,E){var f,T;if(this.leftover){for(T=16-this.leftover,T>E&&(T=E),f=0;f<T;f++)this.buffer[this.leftover+f]=g[_+f];if(E-=T,_+=T,this.leftover+=T,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(E>=16&&(T=E-E%16,this.blocks(g,_,T),_+=T,E-=T),E){for(f=0;f<E;f++)this.buffer[this.leftover+f]=g[_+f];this.leftover+=E}};function se(g,_,E,f,T,F){var W=new ce(F);return W.update(E,f,T),W.finish(g,_),0}function de(g,_,E,f,T,F){var W=new Uint8Array(16);return se(W,0,E,f,T,F),A(g,_,W,0)}function b(g,_,E,f,T){var F;if(E<32)return-1;for(j(g,0,_,0,E,f,T),se(g,16,g,32,E-32,g),F=0;F<16;F++)g[F]=0;return 0}function c(g,_,E,f,T){var F,W=new Uint8Array(32);if(E<32||(te(W,0,32,f,T),de(_,16,_,32,E-32,W)!==0))return-1;for(j(g,0,_,0,E,f,T),F=0;F<32;F++)g[F]=0;return 0}function l(g,_){var E;for(E=0;E<16;E++)g[E]=_[E]|0}function p(g){var _,E,f=1;for(_=0;_<16;_++)E=g[_]+f+65535,f=Math.floor(E/65536),g[_]=E-f*65536;g[0]+=f-1+37*(f-1)}function w(g,_,E){for(var f,T=~(E-1),F=0;F<16;F++)f=T&(g[F]^_[F]),g[F]^=f,_[F]^=f}function x(g,_){var E,f,T,F=e(),W=e();for(E=0;E<16;E++)W[E]=_[E];for(p(W),p(W),p(W),f=0;f<2;f++){for(F[0]=W[0]-65517,E=1;E<15;E++)F[E]=W[E]-65535-(F[E-1]>>16&1),F[E-1]&=65535;F[15]=W[15]-32767-(F[14]>>16&1),T=F[15]>>16&1,F[14]&=65535,w(W,F,1-T)}for(E=0;E<16;E++)g[2*E]=W[E]&255,g[2*E+1]=W[E]>>8}function N(g,_){var E=new Uint8Array(32),f=new Uint8Array(32);return x(E,g),x(f,_),I(E,0,f,0)}function L(g){var _=new Uint8Array(32);return x(_,g),_[0]&1}function v(g,_){var E;for(E=0;E<16;E++)g[E]=_[2*E]+(_[2*E+1]<<8);g[15]&=32767}function d(g,_,E){for(var f=0;f<16;f++)g[f]=_[f]+E[f]}function B(g,_,E){for(var f=0;f<16;f++)g[f]=_[f]-E[f]}function X(g,_,E){var f,T,F=0,W=0,Q=0,ie=0,Ie=0,fe=0,Be=0,Ee=0,Pe=0,Le=0,Ve=0,Fe=0,De=0,Ue=0,Me=0,be=0,Ae=0,ye=0,Re=0,Se=0,me=0,G=0,J=0,ae=0,re=0,ne=0,le=0,ke=0,He=0,je=0,qe=0,U=E[0],Qe=E[1],ct=E[2],ut=E[3],Je=E[4],ot=E[5],it=E[6],ir=E[7],ht=E[8],Xt=E[9],Qt=E[10],er=E[11],fr=E[12],Rr=E[13],Sr=E[14],Ir=E[15];f=_[0],F+=f*U,W+=f*Qe,Q+=f*ct,ie+=f*ut,Ie+=f*Je,fe+=f*ot,Be+=f*it,Ee+=f*ir,Pe+=f*ht,Le+=f*Xt,Ve+=f*Qt,Fe+=f*er,De+=f*fr,Ue+=f*Rr,Me+=f*Sr,be+=f*Ir,f=_[1],W+=f*U,Q+=f*Qe,ie+=f*ct,Ie+=f*ut,fe+=f*Je,Be+=f*ot,Ee+=f*it,Pe+=f*ir,Le+=f*ht,Ve+=f*Xt,Fe+=f*Qt,De+=f*er,Ue+=f*fr,Me+=f*Rr,be+=f*Sr,Ae+=f*Ir,f=_[2],Q+=f*U,ie+=f*Qe,Ie+=f*ct,fe+=f*ut,Be+=f*Je,Ee+=f*ot,Pe+=f*it,Le+=f*ir,Ve+=f*ht,Fe+=f*Xt,De+=f*Qt,Ue+=f*er,Me+=f*fr,be+=f*Rr,Ae+=f*Sr,ye+=f*Ir,f=_[3],ie+=f*U,Ie+=f*Qe,fe+=f*ct,Be+=f*ut,Ee+=f*Je,Pe+=f*ot,Le+=f*it,Ve+=f*ir,Fe+=f*ht,De+=f*Xt,Ue+=f*Qt,Me+=f*er,be+=f*fr,Ae+=f*Rr,ye+=f*Sr,Re+=f*Ir,f=_[4],Ie+=f*U,fe+=f*Qe,Be+=f*ct,Ee+=f*ut,Pe+=f*Je,Le+=f*ot,Ve+=f*it,Fe+=f*ir,De+=f*ht,Ue+=f*Xt,Me+=f*Qt,be+=f*er,Ae+=f*fr,ye+=f*Rr,Re+=f*Sr,Se+=f*Ir,f=_[5],fe+=f*U,Be+=f*Qe,Ee+=f*ct,Pe+=f*ut,Le+=f*Je,Ve+=f*ot,Fe+=f*it,De+=f*ir,Ue+=f*ht,Me+=f*Xt,be+=f*Qt,Ae+=f*er,ye+=f*fr,Re+=f*Rr,Se+=f*Sr,me+=f*Ir,f=_[6],Be+=f*U,Ee+=f*Qe,Pe+=f*ct,Le+=f*ut,Ve+=f*Je,Fe+=f*ot,De+=f*it,Ue+=f*ir,Me+=f*ht,be+=f*Xt,Ae+=f*Qt,ye+=f*er,Re+=f*fr,Se+=f*Rr,me+=f*Sr,G+=f*Ir,f=_[7],Ee+=f*U,Pe+=f*Qe,Le+=f*ct,Ve+=f*ut,Fe+=f*Je,De+=f*ot,Ue+=f*it,Me+=f*ir,be+=f*ht,Ae+=f*Xt,ye+=f*Qt,Re+=f*er,Se+=f*fr,me+=f*Rr,G+=f*Sr,J+=f*Ir,f=_[8],Pe+=f*U,Le+=f*Qe,Ve+=f*ct,Fe+=f*ut,De+=f*Je,Ue+=f*ot,Me+=f*it,be+=f*ir,Ae+=f*ht,ye+=f*Xt,Re+=f*Qt,Se+=f*er,me+=f*fr,G+=f*Rr,J+=f*Sr,ae+=f*Ir,f=_[9],Le+=f*U,Ve+=f*Qe,Fe+=f*ct,De+=f*ut,Ue+=f*Je,Me+=f*ot,be+=f*it,Ae+=f*ir,ye+=f*ht,Re+=f*Xt,Se+=f*Qt,me+=f*er,G+=f*fr,J+=f*Rr,ae+=f*Sr,re+=f*Ir,f=_[10],Ve+=f*U,Fe+=f*Qe,De+=f*ct,Ue+=f*ut,Me+=f*Je,be+=f*ot,Ae+=f*it,ye+=f*ir,Re+=f*ht,Se+=f*Xt,me+=f*Qt,G+=f*er,J+=f*fr,ae+=f*Rr,re+=f*Sr,ne+=f*Ir,f=_[11],Fe+=f*U,De+=f*Qe,Ue+=f*ct,Me+=f*ut,be+=f*Je,Ae+=f*ot,ye+=f*it,Re+=f*ir,Se+=f*ht,me+=f*Xt,G+=f*Qt,J+=f*er,ae+=f*fr,re+=f*Rr,ne+=f*Sr,le+=f*Ir,f=_[12],De+=f*U,Ue+=f*Qe,Me+=f*ct,be+=f*ut,Ae+=f*Je,ye+=f*ot,Re+=f*it,Se+=f*ir,me+=f*ht,G+=f*Xt,J+=f*Qt,ae+=f*er,re+=f*fr,ne+=f*Rr,le+=f*Sr,ke+=f*Ir,f=_[13],Ue+=f*U,Me+=f*Qe,be+=f*ct,Ae+=f*ut,ye+=f*Je,Re+=f*ot,Se+=f*it,me+=f*ir,G+=f*ht,J+=f*Xt,ae+=f*Qt,re+=f*er,ne+=f*fr,le+=f*Rr,ke+=f*Sr,He+=f*Ir,f=_[14],Me+=f*U,be+=f*Qe,Ae+=f*ct,ye+=f*ut,Re+=f*Je,Se+=f*ot,me+=f*it,G+=f*ir,J+=f*ht,ae+=f*Xt,re+=f*Qt,ne+=f*er,le+=f*fr,ke+=f*Rr,He+=f*Sr,je+=f*Ir,f=_[15],be+=f*U,Ae+=f*Qe,ye+=f*ct,Re+=f*ut,Se+=f*Je,me+=f*ot,G+=f*it,J+=f*ir,ae+=f*ht,re+=f*Xt,ne+=f*Qt,le+=f*er,ke+=f*fr,He+=f*Rr,je+=f*Sr,qe+=f*Ir,F+=38*Ae,W+=38*ye,Q+=38*Re,ie+=38*Se,Ie+=38*me,fe+=38*G,Be+=38*J,Ee+=38*ae,Pe+=38*re,Le+=38*ne,Ve+=38*le,Fe+=38*ke,De+=38*He,Ue+=38*je,Me+=38*qe,T=1,f=F+T+65535,T=Math.floor(f/65536),F=f-T*65536,f=W+T+65535,T=Math.floor(f/65536),W=f-T*65536,f=Q+T+65535,T=Math.floor(f/65536),Q=f-T*65536,f=ie+T+65535,T=Math.floor(f/65536),ie=f-T*65536,f=Ie+T+65535,T=Math.floor(f/65536),Ie=f-T*65536,f=fe+T+65535,T=Math.floor(f/65536),fe=f-T*65536,f=Be+T+65535,T=Math.floor(f/65536),Be=f-T*65536,f=Ee+T+65535,T=Math.floor(f/65536),Ee=f-T*65536,f=Pe+T+65535,T=Math.floor(f/65536),Pe=f-T*65536,f=Le+T+65535,T=Math.floor(f/65536),Le=f-T*65536,f=Ve+T+65535,T=Math.floor(f/65536),Ve=f-T*65536,f=Fe+T+65535,T=Math.floor(f/65536),Fe=f-T*65536,f=De+T+65535,T=Math.floor(f/65536),De=f-T*65536,f=Ue+T+65535,T=Math.floor(f/65536),Ue=f-T*65536,f=Me+T+65535,T=Math.floor(f/65536),Me=f-T*65536,f=be+T+65535,T=Math.floor(f/65536),be=f-T*65536,F+=T-1+37*(T-1),T=1,f=F+T+65535,T=Math.floor(f/65536),F=f-T*65536,f=W+T+65535,T=Math.floor(f/65536),W=f-T*65536,f=Q+T+65535,T=Math.floor(f/65536),Q=f-T*65536,f=ie+T+65535,T=Math.floor(f/65536),ie=f-T*65536,f=Ie+T+65535,T=Math.floor(f/65536),Ie=f-T*65536,f=fe+T+65535,T=Math.floor(f/65536),fe=f-T*65536,f=Be+T+65535,T=Math.floor(f/65536),Be=f-T*65536,f=Ee+T+65535,T=Math.floor(f/65536),Ee=f-T*65536,f=Pe+T+65535,T=Math.floor(f/65536),Pe=f-T*65536,f=Le+T+65535,T=Math.floor(f/65536),Le=f-T*65536,f=Ve+T+65535,T=Math.floor(f/65536),Ve=f-T*65536,f=Fe+T+65535,T=Math.floor(f/65536),Fe=f-T*65536,f=De+T+65535,T=Math.floor(f/65536),De=f-T*65536,f=Ue+T+65535,T=Math.floor(f/65536),Ue=f-T*65536,f=Me+T+65535,T=Math.floor(f/65536),Me=f-T*65536,f=be+T+65535,T=Math.floor(f/65536),be=f-T*65536,F+=T-1+37*(T-1),g[0]=F,g[1]=W,g[2]=Q,g[3]=ie,g[4]=Ie,g[5]=fe,g[6]=Be,g[7]=Ee,g[8]=Pe,g[9]=Le,g[10]=Ve,g[11]=Fe,g[12]=De,g[13]=Ue,g[14]=Me,g[15]=be}function oe(g,_){X(g,_,_)}function he(g,_){var E=e(),f;for(f=0;f<16;f++)E[f]=_[f];for(f=253;f>=0;f--)oe(E,E),f!==2&&f!==4&&X(E,E,_);for(f=0;f<16;f++)g[f]=E[f]}function we(g,_){var E=e(),f;for(f=0;f<16;f++)E[f]=_[f];for(f=250;f>=0;f--)oe(E,E),f!==1&&X(E,E,_);for(f=0;f<16;f++)g[f]=E[f]}function Ne(g,_,E){var f=new Uint8Array(32),T=new Float64Array(80),F,W,Q=e(),ie=e(),Ie=e(),fe=e(),Be=e(),Ee=e();for(W=0;W<31;W++)f[W]=_[W];for(f[31]=_[31]&127|64,f[0]&=248,v(T,E),W=0;W<16;W++)ie[W]=T[W],fe[W]=Q[W]=Ie[W]=0;for(Q[0]=fe[0]=1,W=254;W>=0;--W)F=f[W>>>3]>>>(W&7)&1,w(Q,ie,F),w(Ie,fe,F),d(Be,Q,Ie),B(Q,Q,Ie),d(Ie,ie,fe),B(ie,ie,fe),oe(fe,Be),oe(Ee,Q),X(Q,Ie,Q),X(Ie,ie,Be),d(Be,Q,Ie),B(Q,Q,Ie),oe(ie,Q),B(Ie,fe,Ee),X(Q,Ie,a),d(Q,Q,fe),X(Ie,Ie,Q),X(Q,fe,Ee),X(fe,ie,T),oe(ie,Be),w(Q,ie,F),w(Ie,fe,F);for(W=0;W<16;W++)T[W+16]=Q[W],T[W+32]=Ie[W],T[W+48]=ie[W],T[W+64]=fe[W];var Pe=T.subarray(32),Le=T.subarray(16);return he(Pe,Pe),X(Le,Le,Pe),x(g,Le),0}function ve(g,_){return Ne(g,_,s)}function rt(g,_){return r(_,32),ve(g,_)}function Xe(g,_,E){var f=new Uint8Array(32);return Ne(f,E,_),K(g,n,f,Z)}var $e=b,jr=c;function bt(g,_,E,f,T,F){var W=new Uint8Array(32);return Xe(W,T,F),$e(g,_,E,f,W)}function Nt(g,_,E,f,T,F){var W=new Uint8Array(32);return Xe(W,T,F),jr(g,_,E,f,W)}var ws=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ht(g,_,E,f){for(var T=new Int32Array(16),F=new Int32Array(16),W,Q,ie,Ie,fe,Be,Ee,Pe,Le,Ve,Fe,De,Ue,Me,be,Ae,ye,Re,Se,me,G,J,ae,re,ne,le,ke=g[0],He=g[1],je=g[2],qe=g[3],U=g[4],Qe=g[5],ct=g[6],ut=g[7],Je=_[0],ot=_[1],it=_[2],ir=_[3],ht=_[4],Xt=_[5],Qt=_[6],er=_[7],fr=0;f>=128;){for(Se=0;Se<16;Se++)me=8*Se+fr,T[Se]=E[me+0]<<24|E[me+1]<<16|E[me+2]<<8|E[me+3],F[Se]=E[me+4]<<24|E[me+5]<<16|E[me+6]<<8|E[me+7];for(Se=0;Se<80;Se++)if(W=ke,Q=He,ie=je,Ie=qe,fe=U,Be=Qe,Ee=ct,Pe=ut,Le=Je,Ve=ot,Fe=it,De=ir,Ue=ht,Me=Xt,be=Qt,Ae=er,G=ut,J=er,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=(U>>>14|ht<<18)^(U>>>18|ht<<14)^(ht>>>9|U<<23),J=(ht>>>14|U<<18)^(ht>>>18|U<<14)^(U>>>9|ht<<23),ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,G=U&Qe^~U&ct,J=ht&Xt^~ht&Qt,ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,G=ws[Se*2],J=ws[Se*2+1],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,G=T[Se%16],J=F[Se%16],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,ye=ne&65535|le<<16,Re=ae&65535|re<<16,G=ye,J=Re,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=(ke>>>28|Je<<4)^(Je>>>2|ke<<30)^(Je>>>7|ke<<25),J=(Je>>>28|ke<<4)^(ke>>>2|Je<<30)^(ke>>>7|Je<<25),ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,G=ke&He^ke&je^He&je,J=Je&ot^Je&it^ot&it,ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,Pe=ne&65535|le<<16,Ae=ae&65535|re<<16,G=Ie,J=De,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=ye,J=Re,ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,Ie=ne&65535|le<<16,De=ae&65535|re<<16,He=W,je=Q,qe=ie,U=Ie,Qe=fe,ct=Be,ut=Ee,ke=Pe,ot=Le,it=Ve,ir=Fe,ht=De,Xt=Ue,Qt=Me,er=be,Je=Ae,Se%16===15)for(me=0;me<16;me++)G=T[me],J=F[me],ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=T[(me+9)%16],J=F[(me+9)%16],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,ye=T[(me+1)%16],Re=F[(me+1)%16],G=(ye>>>1|Re<<31)^(ye>>>8|Re<<24)^ye>>>7,J=(Re>>>1|ye<<31)^(Re>>>8|ye<<24)^(Re>>>7|ye<<25),ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,ye=T[(me+14)%16],Re=F[(me+14)%16],G=(ye>>>19|Re<<13)^(Re>>>29|ye<<3)^ye>>>6,J=(Re>>>19|ye<<13)^(ye>>>29|Re<<3)^(Re>>>6|ye<<26),ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,T[me]=ne&65535|le<<16,F[me]=ae&65535|re<<16;G=ke,J=Je,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=g[0],J=_[0],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,g[0]=ke=ne&65535|le<<16,_[0]=Je=ae&65535|re<<16,G=He,J=ot,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=g[1],J=_[1],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,g[1]=He=ne&65535|le<<16,_[1]=ot=ae&65535|re<<16,G=je,J=it,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=g[2],J=_[2],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,g[2]=je=ne&65535|le<<16,_[2]=it=ae&65535|re<<16,G=qe,J=ir,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=g[3],J=_[3],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,g[3]=qe=ne&65535|le<<16,_[3]=ir=ae&65535|re<<16,G=U,J=ht,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=g[4],J=_[4],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,g[4]=U=ne&65535|le<<16,_[4]=ht=ae&65535|re<<16,G=Qe,J=Xt,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=g[5],J=_[5],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,g[5]=Qe=ne&65535|le<<16,_[5]=Xt=ae&65535|re<<16,G=ct,J=Qt,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=g[6],J=_[6],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,g[6]=ct=ne&65535|le<<16,_[6]=Qt=ae&65535|re<<16,G=ut,J=er,ae=J&65535,re=J>>>16,ne=G&65535,le=G>>>16,G=g[7],J=_[7],ae+=J&65535,re+=J>>>16,ne+=G&65535,le+=G>>>16,re+=ae>>>16,ne+=re>>>16,le+=ne>>>16,g[7]=ut=ne&65535|le<<16,_[7]=er=ae&65535|re<<16,fr+=128,f-=128}return f}function pt(g,_,E){var f=new Int32Array(8),T=new Int32Array(8),F=new Uint8Array(256),W,Q=E;for(f[0]=1779033703,f[1]=3144134277,f[2]=1013904242,f[3]=2773480762,f[4]=1359893119,f[5]=2600822924,f[6]=528734635,f[7]=1541459225,T[0]=4089235720,T[1]=2227873595,T[2]=4271175723,T[3]=1595750129,T[4]=2917565137,T[5]=725511199,T[6]=4215389547,T[7]=327033209,Ht(f,T,_,E),E%=128,W=0;W<E;W++)F[W]=_[Q-E+W];for(F[E]=128,E=256-128*(E<112?1:0),F[E-9]=0,S(F,E-8,Q/536870912|0,Q<<3),Ht(f,T,F,E),W=0;W<8;W++)S(g,8*W,f[W],T[W]);return 0}function oo(g,_){var E=e(),f=e(),T=e(),F=e(),W=e(),Q=e(),ie=e(),Ie=e(),fe=e();B(E,g[1],g[0]),B(fe,_[1],_[0]),X(E,E,fe),d(f,g[0],g[1]),d(fe,_[0],_[1]),X(f,f,fe),X(T,g[3],_[3]),X(T,T,h),X(F,g[2],_[2]),d(F,F,F),B(W,f,E),B(Q,F,T),d(ie,F,T),d(Ie,f,E),X(g[0],W,Q),X(g[1],Ie,ie),X(g[2],ie,Q),X(g[3],W,Ie)}function qt(g,_,E){var f;for(f=0;f<4;f++)w(g[f],_[f],E)}function Lt(g,_){var E=e(),f=e(),T=e();he(T,_[2]),X(E,_[0],T),X(f,_[1],T),x(g,f),g[31]^=L(E)<<7}function Ko(g,_,E){var f,T;for(l(g[0],o),l(g[1],i),l(g[2],i),l(g[3],o),T=255;T>=0;--T)f=E[T/8|0]>>(T&7)&1,qt(g,_,f),oo(_,g),oo(g,g),qt(g,_,f)}function Bt(g,_){var E=[e(),e(),e(),e()];l(E[0],m),l(E[1],y),l(E[2],i),X(E[3],m,y),Ko(g,E,_)}function Dt(g,_,E){var f=new Uint8Array(64),T=[e(),e(),e(),e()],F;for(E||r(_,32),pt(f,_,32),f[0]&=248,f[31]&=127,f[31]|=64,Bt(T,f),Lt(g,T),F=0;F<32;F++)_[F+32]=g[F];return 0}var io=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Mt(g,_){var E,f,T,F;for(f=63;f>=32;--f){for(E=0,T=f-32,F=f-12;T<F;++T)_[T]+=E-16*_[f]*io[T-(f-32)],E=Math.floor((_[T]+128)/256),_[T]-=E*256;_[T]+=E,_[f]=0}for(E=0,T=0;T<32;T++)_[T]+=E-(_[31]>>4)*io[T],E=_[T]>>8,_[T]&=255;for(T=0;T<32;T++)_[T]-=E*io[T];for(f=0;f<32;f++)_[f+1]+=_[f]>>8,g[f]=_[f]&255}function Ut(g){var _=new Float64Array(64),E;for(E=0;E<64;E++)_[E]=g[E];for(E=0;E<64;E++)g[E]=0;Mt(g,_)}function ji(g,_,E,f){var T=new Uint8Array(64),F=new Uint8Array(64),W=new Uint8Array(64),Q,ie,Ie=new Float64Array(64),fe=[e(),e(),e(),e()];pt(T,f,32),T[0]&=248,T[31]&=127,T[31]|=64;var Be=E+64;for(Q=0;Q<E;Q++)g[64+Q]=_[Q];for(Q=0;Q<32;Q++)g[32+Q]=T[32+Q];for(pt(W,g.subarray(32),E+32),Ut(W),Bt(fe,W),Lt(g,fe),Q=32;Q<64;Q++)g[Q]=f[Q];for(pt(F,g,E+64),Ut(F),Q=0;Q<64;Q++)Ie[Q]=0;for(Q=0;Q<32;Q++)Ie[Q]=W[Q];for(Q=0;Q<32;Q++)for(ie=0;ie<32;ie++)Ie[Q+ie]+=F[Q]*T[ie];return Mt(g.subarray(32),Ie),Be}function Yt(g,_){var E=e(),f=e(),T=e(),F=e(),W=e(),Q=e(),ie=e();return l(g[2],i),v(g[1],_),oe(T,g[1]),X(F,T,u),B(T,T,g[2]),d(F,g[2],F),oe(W,F),oe(Q,W),X(ie,Q,W),X(E,ie,T),X(E,E,F),we(E,E),X(E,E,T),X(E,E,F),X(E,E,F),X(g[0],E,F),oe(f,g[0]),X(f,f,F),N(f,T)&&X(g[0],g[0],O),oe(f,g[0]),X(f,f,F),N(f,T)?-1:(L(g[0])===_[31]>>7&&B(g[0],o,g[0]),X(g[3],g[0],g[1]),0)}function zt(g,_,E,f){var T,F=new Uint8Array(32),W=new Uint8Array(64),Q=[e(),e(),e(),e()],ie=[e(),e(),e(),e()];if(E<64||Yt(ie,f))return-1;for(T=0;T<E;T++)g[T]=_[T];for(T=0;T<32;T++)g[T+32]=f[T];if(pt(W,g,E),Ut(W),Ko(Q,ie,W),Bt(ie,_.subarray(32)),oo(Q,ie),Lt(F,Q),E-=64,I(_,0,F,0)){for(T=0;T<E;T++)g[T]=0;return-1}for(T=0;T<E;T++)g[T]=_[T+64];return E}var Vo=32,kt=24,It=32,Gn=16,vt=32,Pt=32,Es=32,At=32,Ft=32,Gi=kt,Jt=It,Zt=Gn,hn=64,gt=32,_t=64,Wo=32,Kt=64;t.lowlevel={crypto_core_hsalsa20:K,crypto_stream_xor:j,crypto_stream:te,crypto_stream_salsa20_xor:V,crypto_stream_salsa20:Y,crypto_onetimeauth:se,crypto_onetimeauth_verify:de,crypto_verify_16:A,crypto_verify_32:I,crypto_secretbox:b,crypto_secretbox_open:c,crypto_scalarmult:Ne,crypto_scalarmult_base:ve,crypto_box_beforenm:Xe,crypto_box_afternm:$e,crypto_box:bt,crypto_box_open:Nt,crypto_box_keypair:rt,crypto_hash:pt,crypto_sign:ji,crypto_sign_keypair:Dt,crypto_sign_open:zt,crypto_secretbox_KEYBYTES:Vo,crypto_secretbox_NONCEBYTES:kt,crypto_secretbox_ZEROBYTES:It,crypto_secretbox_BOXZEROBYTES:Gn,crypto_scalarmult_BYTES:vt,crypto_scalarmult_SCALARBYTES:Pt,crypto_box_PUBLICKEYBYTES:Es,crypto_box_SECRETKEYBYTES:At,crypto_box_BEFORENMBYTES:Ft,crypto_box_NONCEBYTES:Gi,crypto_box_ZEROBYTES:Jt,crypto_box_BOXZEROBYTES:Zt,crypto_sign_BYTES:hn,crypto_sign_PUBLICKEYBYTES:gt,crypto_sign_SECRETKEYBYTES:_t,crypto_sign_SEEDBYTES:Wo,crypto_hash_BYTES:Kt,gf:e,D:u,L:io,pack25519:x,unpack25519:v,M:X,A:d,S:oe,Z:B,pow2523:we,add:oo,set25519:l,modL:Mt,scalarmult:Ko,scalarbase:Bt};function $t(g,_){if(g.length!==Vo)throw new Error("bad key size");if(_.length!==kt)throw new Error("bad nonce size")}function Za(g,_){if(g.length!==Es)throw new Error("bad public key size");if(_.length!==At)throw new Error("bad secret key size")}function st(){for(var g=0;g<arguments.length;g++)if(!(arguments[g]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function jt(g){for(var _=0;_<g.length;_++)g[_]=0}t.randomBytes=function(g){var _=new Uint8Array(g);return r(_,g),_},t.secretbox=function(g,_,E){st(g,_,E),$t(E,_);for(var f=new Uint8Array(It+g.length),T=new Uint8Array(f.length),F=0;F<g.length;F++)f[F+It]=g[F];return b(T,f,f.length,_,E),T.subarray(Gn)},t.secretbox.open=function(g,_,E){st(g,_,E),$t(E,_);for(var f=new Uint8Array(Gn+g.length),T=new Uint8Array(f.length),F=0;F<g.length;F++)f[F+Gn]=g[F];return f.length<32||c(T,f,f.length,_,E)!==0?null:T.subarray(It)},t.secretbox.keyLength=Vo,t.secretbox.nonceLength=kt,t.secretbox.overheadLength=Gn,t.scalarMult=function(g,_){if(st(g,_),g.length!==Pt)throw new Error("bad n size");if(_.length!==vt)throw new Error("bad p size");var E=new Uint8Array(vt);return Ne(E,g,_),E},t.scalarMult.base=function(g){if(st(g),g.length!==Pt)throw new Error("bad n size");var _=new Uint8Array(vt);return ve(_,g),_},t.scalarMult.scalarLength=Pt,t.scalarMult.groupElementLength=vt,t.box=function(g,_,E,f){var T=t.box.before(E,f);return t.secretbox(g,_,T)},t.box.before=function(g,_){st(g,_),Za(g,_);var E=new Uint8Array(Ft);return Xe(E,g,_),E},t.box.after=t.secretbox,t.box.open=function(g,_,E,f){var T=t.box.before(E,f);return t.secretbox.open(g,_,T)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var g=new Uint8Array(Es),_=new Uint8Array(At);return rt(g,_),{publicKey:g,secretKey:_}},t.box.keyPair.fromSecretKey=function(g){if(st(g),g.length!==At)throw new Error("bad secret key size");var _=new Uint8Array(Es);return ve(_,g),{publicKey:_,secretKey:new Uint8Array(g)}},t.box.publicKeyLength=Es,t.box.secretKeyLength=At,t.box.sharedKeyLength=Ft,t.box.nonceLength=Gi,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(g,_){if(st(g,_),_.length!==_t)throw new Error("bad secret key size");var E=new Uint8Array(hn+g.length);return ji(E,g,g.length,_),E},t.sign.open=function(g,_){if(st(g,_),_.length!==gt)throw new Error("bad public key size");var E=new Uint8Array(g.length),f=zt(E,g,g.length,_);if(f<0)return null;for(var T=new Uint8Array(f),F=0;F<T.length;F++)T[F]=E[F];return T},t.sign.detached=function(g,_){for(var E=t.sign(g,_),f=new Uint8Array(hn),T=0;T<f.length;T++)f[T]=E[T];return f},t.sign.detached.verify=function(g,_,E){if(st(g,_,E),_.length!==hn)throw new Error("bad signature size");if(E.length!==gt)throw new Error("bad public key size");var f=new Uint8Array(hn+g.length),T=new Uint8Array(hn+g.length),F;for(F=0;F<hn;F++)f[F]=_[F];for(F=0;F<g.length;F++)f[F+hn]=g[F];return zt(T,f,f.length,E)>=0},t.sign.keyPair=function(){var g=new Uint8Array(gt),_=new Uint8Array(_t);return Dt(g,_),{publicKey:g,secretKey:_}},t.sign.keyPair.fromSecretKey=function(g){if(st(g),g.length!==_t)throw new Error("bad secret key size");for(var _=new Uint8Array(gt),E=0;E<_.length;E++)_[E]=g[32+E];return{publicKey:_,secretKey:new Uint8Array(g)}},t.sign.keyPair.fromSeed=function(g){if(st(g),g.length!==Wo)throw new Error("bad seed size");for(var _=new Uint8Array(gt),E=new Uint8Array(_t),f=0;f<32;f++)E[f]=g[f];return Dt(_,E,!0),{publicKey:_,secretKey:E}},t.sign.publicKeyLength=gt,t.sign.secretKeyLength=_t,t.sign.seedLength=Wo,t.sign.signatureLength=hn,t.hash=function(g){st(g);var _=new Uint8Array(Kt);return pt(_,g,g.length),_},t.hash.hashLength=Kt,t.verify=function(g,_){return st(g,_),g.length===0||_.length===0||g.length!==_.length?!1:R(g,0,_,0,g.length)===0},t.setPRNG=function(g){r=g},(function(){var g=typeof self<"u"?self.crypto||self.msCrypto:null;if(g&&g.getRandomValues){var _=65536;t.setPRNG(function(E,f){var T,F=new Uint8Array(f);for(T=0;T<f;T+=_)g.getRandomValues(F.subarray(T,T+Math.min(f-T,_)));for(T=0;T<f;T++)E[T]=F[T];jt(F)})}else typeof Ch<"u"&&(g=X0(),g&&g.randomBytes&&t.setPRNG(function(E,f){var T,F=g.randomBytes(f);for(T=0;T<f;T++)E[T]=F[T];jt(F)}))})()})(typeof Cc<"u"&&Cc.exports?Cc.exports:self.nacl=self.nacl||{})});var tp=cr((z3,ep)=>{"use strict";function xb(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=n}var i=t.length,a=t.charAt(0),u=Math.log(i)/Math.log(256),h=Math.log(256)/Math.log(i);function m(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var R=0,A=0,I=0,k=S.length;I!==k&&S[I]===0;)I++,R++;for(var z=(k-I)*h+1>>>0,M=new Uint8Array(z);I!==k;){for(var K=S[I],Z=0,V=z-1;(K!==0||Z<A)&&V!==-1;V--,Z++)K+=256*M[V]>>>0,M[V]=K%i>>>0,K=K/i>>>0;if(K!==0)throw new Error("Non-zero carry");A=Z,I++}for(var Y=z-A;Y!==z&&M[Y]===0;)Y++;for(var te=a.repeat(R);Y<z;++Y)te+=t.charAt(M[Y]);return te}function y(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;for(var R=0,A=0,I=0;S[R]===a;)A++,R++;for(var k=(S.length-R)*u+1>>>0,z=new Uint8Array(k);S[R];){var M=S.charCodeAt(R);if(M>255)return;var K=e[M];if(K===255)return;for(var Z=0,V=k-1;(K!==0||Z<I)&&V!==-1;V--,Z++)K+=i*z[V]>>>0,z[V]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");I=Z,R++}for(var Y=k-I;Y!==k&&z[Y]===0;)Y++;for(var te=new Uint8Array(A+(k-Y)),j=A;Y!==k;)te[j++]=z[Y++];return te}function O(S){var R=y(S);if(R)return R;throw new Error("Non-base"+i+" character")}return{encode:m,decodeUnsafe:y,decode:O}}ep.exports=xb});var np=cr((F3,rp)=>{var Rb=tp(),Sb="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";rp.exports=Rb(Sb)});var gp=cr((SB,of)=>{"use strict";var w1=Object.prototype.hasOwnProperty,Kr="~";function ya(){}Object.create&&(ya.prototype=Object.create(null),new ya().__proto__||(Kr=!1));function E1(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function pp(t,e,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new E1(r,n||t,s),i=Kr?Kr+e:e;return t._events[i]?t._events[i].fn?t._events[i]=[t._events[i],o]:t._events[i].push(o):(t._events[i]=o,t._eventsCount++),t}function Fc(t,e){--t._eventsCount===0?t._events=new ya:delete t._events[e]}function Tr(){this._events=new ya,this._eventsCount=0}Tr.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)w1.call(r,n)&&e.push(Kr?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Tr.prototype.listeners=function(e){var r=Kr?Kr+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,i=new Array(o);s<o;s++)i[s]=n[s].fn;return i};Tr.prototype.listenerCount=function(e){var r=Kr?Kr+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Tr.prototype.emit=function(e,r,n,s,o,i){var a=Kr?Kr+e:e;if(!this._events[a])return!1;var u=this._events[a],h=arguments.length,m,y;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,s),!0;case 5:return u.fn.call(u.context,r,n,s,o),!0;case 6:return u.fn.call(u.context,r,n,s,o,i),!0}for(y=1,m=new Array(h-1);y<h;y++)m[y-1]=arguments[y];u.fn.apply(u.context,m)}else{var O=u.length,S;for(y=0;y<O;y++)switch(u[y].once&&this.removeListener(e,u[y].fn,void 0,!0),h){case 1:u[y].fn.call(u[y].context);break;case 2:u[y].fn.call(u[y].context,r);break;case 3:u[y].fn.call(u[y].context,r,n);break;case 4:u[y].fn.call(u[y].context,r,n,s);break;default:if(!m)for(S=1,m=new Array(h-1);S<h;S++)m[S-1]=arguments[S];u[y].fn.apply(u[y].context,m)}}return!0};Tr.prototype.on=function(e,r,n){return pp(this,e,r,n,!1)};Tr.prototype.once=function(e,r,n){return pp(this,e,r,n,!0)};Tr.prototype.removeListener=function(e,r,n,s){var o=Kr?Kr+e:e;if(!this._events[o])return this;if(!r)return Fc(this,o),this;var i=this._events[o];if(i.fn)i.fn===r&&(!s||i.once)&&(!n||i.context===n)&&Fc(this,o);else{for(var a=0,u=[],h=i.length;a<h;a++)(i[a].fn!==r||s&&!i[a].once||n&&i[a].context!==n)&&u.push(i[a]);u.length?this._events[o]=u.length===1?u[0]:u:Fc(this,o)}return this};Tr.prototype.removeAllListeners=function(e){var r;return e?(r=Kr?Kr+e:e,this._events[r]&&Fc(this,r)):(this._events=new ya,this._eventsCount=0),this};Tr.prototype.off=Tr.prototype.removeListener;Tr.prototype.addListener=Tr.prototype.on;Tr.prefixed=Kr;Tr.EventEmitter=Tr;typeof of<"u"&&(of.exports=Tr)});var Sm=cr(()=>{});var Ed=cr((Im,wd)=>{(function(t,e){"use strict";function r(b,c){if(!b)throw new Error(c||"Assertion failed")}function n(b,c){b.super_=c;var l=function(){};l.prototype=c.prototype,b.prototype=new l,b.prototype.constructor=b}function s(b,c,l){if(s.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(b||0,c||10,l||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Sm().Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,l){return c.cmp(l)>0?c:l},s.min=function(c,l){return c.cmp(l)<0?c:l},s.prototype._init=function(c,l,p){if(typeof c=="number")return this._initNumber(c,l,p);if(typeof c=="object")return this._initArray(c,l,p);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var w=0;c[0]==="-"&&(w++,this.negative=1),w<c.length&&(l===16?this._parseHex(c,w,p):(this._parseBase(c,l,w),p==="le"&&this._initArray(this.toArray(),l,p)))},s.prototype._initNumber=function(c,l,p){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),l,p)},s.prototype._initArray=function(c,l,p){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x,N,L=0;if(p==="be")for(w=c.length-1,x=0;w>=0;w-=3)N=c[w]|c[w-1]<<8|c[w-2]<<16,this.words[x]|=N<<L&67108863,this.words[x+1]=N>>>26-L&67108863,L+=24,L>=26&&(L-=26,x++);else if(p==="le")for(w=0,x=0;w<c.length;w+=3)N=c[w]|c[w+1]<<8|c[w+2]<<16,this.words[x]|=N<<L&67108863,this.words[x+1]=N>>>26-L&67108863,L+=24,L>=26&&(L-=26,x++);return this._strip()};function i(b,c){var l=b.charCodeAt(c);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+b)}function a(b,c,l){var p=i(b,l);return l-1>=c&&(p|=i(b,l-1)<<4),p}s.prototype._parseHex=function(c,l,p){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x=0,N=0,L;if(p==="be")for(w=c.length-1;w>=l;w-=2)L=a(c,l,w)<<x,this.words[N]|=L&67108863,x>=18?(x-=18,N+=1,this.words[N]|=L>>>26):x+=8;else{var v=c.length-l;for(w=v%2===0?l+1:l;w<c.length;w+=2)L=a(c,l,w)<<x,this.words[N]|=L&67108863,x>=18?(x-=18,N+=1,this.words[N]|=L>>>26):x+=8}this._strip()};function u(b,c,l,p){for(var w=0,x=0,N=Math.min(b.length,l),L=c;L<N;L++){var v=b.charCodeAt(L)-48;w*=p,v>=49?x=v-49+10:v>=17?x=v-17+10:x=v,r(v>=0&&x<p,"Invalid character"),w+=x}return w}s.prototype._parseBase=function(c,l,p){this.words=[0],this.length=1;for(var w=0,x=1;x<=67108863;x*=l)w++;w--,x=x/l|0;for(var N=c.length-p,L=N%w,v=Math.min(N,N-L)+p,d=0,B=p;B<v;B+=w)d=u(c,B,B+w,l),this.imuln(x),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(L!==0){var X=1;for(d=u(c,B,c.length,l),B=0;B<L;B++)X*=l;this.imuln(X),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red};function h(b,c){b.words=c.words,b.length=c.length,b.negative=c.negative,b.red=c.red}if(s.prototype._move=function(c){h(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{s.prototype.inspect=m}else s.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,l){c=c||10,l=l|0||1;var p;if(c===16||c==="hex"){p="";for(var w=0,x=0,N=0;N<this.length;N++){var L=this.words[N],v=((L<<w|x)&16777215).toString(16);x=L>>>24-w&16777215,w+=2,w>=26&&(w-=26,N--),x!==0||N!==this.length-1?p=y[6-v.length]+v+p:p=v+p}for(x!==0&&(p=x.toString(16)+p);p.length%l!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(c===(c|0)&&c>=2&&c<=36){var d=O[c],B=S[c];p="";var X=this.clone();for(X.negative=0;!X.isZero();){var oe=X.modrn(B).toString(c);X=X.idivn(B),X.isZero()?p=oe+p:p=y[d-oe.length]+oe+p}for(this.isZero()&&(p="0"+p);p.length%l!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(c,l){return this.toArrayLike(o,c,l)}),s.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)};var R=function(c,l){return c.allocUnsafe?c.allocUnsafe(l):new c(l)};s.prototype.toArrayLike=function(c,l,p){this._strip();var w=this.byteLength(),x=p||Math.max(1,w);r(w<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var N=R(c,x),L=l==="le"?"LE":"BE";return this["_toArrayLike"+L](N,w),N},s.prototype._toArrayLikeLE=function(c,l){for(var p=0,w=0,x=0,N=0;x<this.length;x++){var L=this.words[x]<<N|w;c[p++]=L&255,p<c.length&&(c[p++]=L>>8&255),p<c.length&&(c[p++]=L>>16&255),N===6?(p<c.length&&(c[p++]=L>>24&255),w=0,N=0):(w=L>>>24,N+=2)}if(p<c.length)for(c[p++]=w;p<c.length;)c[p++]=0},s.prototype._toArrayLikeBE=function(c,l){for(var p=c.length-1,w=0,x=0,N=0;x<this.length;x++){var L=this.words[x]<<N|w;c[p--]=L&255,p>=0&&(c[p--]=L>>8&255),p>=0&&(c[p--]=L>>16&255),N===6?(p>=0&&(c[p--]=L>>24&255),w=0,N=0):(w=L>>>24,N+=2)}if(p>=0)for(c[p--]=w;p>=0;)c[p--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var l=c,p=0;return l>=4096&&(p+=13,l>>>=13),l>=64&&(p+=7,l>>>=7),l>=8&&(p+=4,l>>>=4),l>=2&&(p+=2,l>>>=2),p+l},s.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,p=0;return(l&8191)===0&&(p+=13,l>>>=13),(l&127)===0&&(p+=7,l>>>=7),(l&15)===0&&(p+=4,l>>>=4),(l&3)===0&&(p+=2,l>>>=2),(l&1)===0&&p++,p},s.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function A(b){for(var c=new Array(b.bitLength()),l=0;l<c.length;l++){var p=l/26|0,w=l%26;c[l]=b.words[p]>>>w&1}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var p=this._zeroBits(this.words[l]);if(c+=p,p!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this._strip()},s.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var p=0;p<l.length;p++)this.words[p]=this.words[p]&c.words[p];return this.length=l.length,this._strip()},s.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var l,p;this.length>c.length?(l=this,p=c):(l=c,p=this);for(var w=0;w<p.length;w++)this.words[w]=l.words[w]^p.words[w];if(this!==l)for(;w<l.length;w++)this.words[w]=l.words[w];return this.length=l.length,this._strip()},s.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,p=c%26;this._expand(l),p>0&&l--;for(var w=0;w<l;w++)this.words[w]=~this.words[w]&67108863;return p>0&&(this.words[w]=~this.words[w]&67108863>>26-p),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,l){r(typeof c=="number"&&c>=0);var p=c/26|0,w=c%26;return this._expand(p+1),l?this.words[p]=this.words[p]|1<<w:this.words[p]=this.words[p]&~(1<<w),this._strip()},s.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var p,w;this.length>c.length?(p=this,w=c):(p=c,w=this);for(var x=0,N=0;N<w.length;N++)l=(p.words[N]|0)+(w.words[N]|0)+x,this.words[N]=l&67108863,x=l>>>26;for(;x!==0&&N<p.length;N++)l=(p.words[N]|0)+x,this.words[N]=l&67108863,x=l>>>26;if(this.length=p.length,x!==0)this.words[this.length]=x,this.length++;else if(p!==this)for(;N<p.length;N++)this.words[N]=p.words[N];return this},s.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var p=this.cmp(c);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,x;p>0?(w=this,x=c):(w=c,x=this);for(var N=0,L=0;L<x.length;L++)l=(w.words[L]|0)-(x.words[L]|0)+N,N=l>>26,this.words[L]=l&67108863;for(;N!==0&&L<w.length;L++)l=(w.words[L]|0)+N,N=l>>26,this.words[L]=l&67108863;if(N===0&&L<w.length&&w!==this)for(;L<w.length;L++)this.words[L]=w.words[L];return this.length=Math.max(this.length,L),w!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function I(b,c,l){l.negative=c.negative^b.negative;var p=b.length+c.length|0;l.length=p,p=p-1|0;var w=b.words[0]|0,x=c.words[0]|0,N=w*x,L=N&67108863,v=N/67108864|0;l.words[0]=L;for(var d=1;d<p;d++){for(var B=v>>>26,X=v&67108863,oe=Math.min(d,c.length-1),he=Math.max(0,d-b.length+1);he<=oe;he++){var we=d-he|0;w=b.words[we]|0,x=c.words[he]|0,N=w*x+X,B+=N/67108864|0,X=N&67108863}l.words[d]=X|0,v=B|0}return v!==0?l.words[d]=v|0:l.length--,l._strip()}var k=function(c,l,p){var w=c.words,x=l.words,N=p.words,L=0,v,d,B,X=w[0]|0,oe=X&8191,he=X>>>13,we=w[1]|0,Ne=we&8191,ve=we>>>13,rt=w[2]|0,Xe=rt&8191,$e=rt>>>13,jr=w[3]|0,bt=jr&8191,Nt=jr>>>13,ws=w[4]|0,Ht=ws&8191,pt=ws>>>13,oo=w[5]|0,qt=oo&8191,Lt=oo>>>13,Ko=w[6]|0,Bt=Ko&8191,Dt=Ko>>>13,io=w[7]|0,Mt=io&8191,Ut=io>>>13,ji=w[8]|0,Yt=ji&8191,zt=ji>>>13,Vo=w[9]|0,kt=Vo&8191,It=Vo>>>13,Gn=x[0]|0,vt=Gn&8191,Pt=Gn>>>13,Es=x[1]|0,At=Es&8191,Ft=Es>>>13,Gi=x[2]|0,Jt=Gi&8191,Zt=Gi>>>13,hn=x[3]|0,gt=hn&8191,_t=hn>>>13,Wo=x[4]|0,Kt=Wo&8191,$t=Wo>>>13,Za=x[5]|0,st=Za&8191,jt=Za>>>13,g=x[6]|0,_=g&8191,E=g>>>13,f=x[7]|0,T=f&8191,F=f>>>13,W=x[8]|0,Q=W&8191,ie=W>>>13,Ie=x[9]|0,fe=Ie&8191,Be=Ie>>>13;p.negative=c.negative^l.negative,p.length=19,v=Math.imul(oe,vt),d=Math.imul(oe,Pt),d=d+Math.imul(he,vt)|0,B=Math.imul(he,Pt);var Ee=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,v=Math.imul(Ne,vt),d=Math.imul(Ne,Pt),d=d+Math.imul(ve,vt)|0,B=Math.imul(ve,Pt),v=v+Math.imul(oe,At)|0,d=d+Math.imul(oe,Ft)|0,d=d+Math.imul(he,At)|0,B=B+Math.imul(he,Ft)|0;var Pe=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,v=Math.imul(Xe,vt),d=Math.imul(Xe,Pt),d=d+Math.imul($e,vt)|0,B=Math.imul($e,Pt),v=v+Math.imul(Ne,At)|0,d=d+Math.imul(Ne,Ft)|0,d=d+Math.imul(ve,At)|0,B=B+Math.imul(ve,Ft)|0,v=v+Math.imul(oe,Jt)|0,d=d+Math.imul(oe,Zt)|0,d=d+Math.imul(he,Jt)|0,B=B+Math.imul(he,Zt)|0;var Le=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Le>>>26)|0,Le&=67108863,v=Math.imul(bt,vt),d=Math.imul(bt,Pt),d=d+Math.imul(Nt,vt)|0,B=Math.imul(Nt,Pt),v=v+Math.imul(Xe,At)|0,d=d+Math.imul(Xe,Ft)|0,d=d+Math.imul($e,At)|0,B=B+Math.imul($e,Ft)|0,v=v+Math.imul(Ne,Jt)|0,d=d+Math.imul(Ne,Zt)|0,d=d+Math.imul(ve,Jt)|0,B=B+Math.imul(ve,Zt)|0,v=v+Math.imul(oe,gt)|0,d=d+Math.imul(oe,_t)|0,d=d+Math.imul(he,gt)|0,B=B+Math.imul(he,_t)|0;var Ve=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,v=Math.imul(Ht,vt),d=Math.imul(Ht,Pt),d=d+Math.imul(pt,vt)|0,B=Math.imul(pt,Pt),v=v+Math.imul(bt,At)|0,d=d+Math.imul(bt,Ft)|0,d=d+Math.imul(Nt,At)|0,B=B+Math.imul(Nt,Ft)|0,v=v+Math.imul(Xe,Jt)|0,d=d+Math.imul(Xe,Zt)|0,d=d+Math.imul($e,Jt)|0,B=B+Math.imul($e,Zt)|0,v=v+Math.imul(Ne,gt)|0,d=d+Math.imul(Ne,_t)|0,d=d+Math.imul(ve,gt)|0,B=B+Math.imul(ve,_t)|0,v=v+Math.imul(oe,Kt)|0,d=d+Math.imul(oe,$t)|0,d=d+Math.imul(he,Kt)|0,B=B+Math.imul(he,$t)|0;var Fe=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,v=Math.imul(qt,vt),d=Math.imul(qt,Pt),d=d+Math.imul(Lt,vt)|0,B=Math.imul(Lt,Pt),v=v+Math.imul(Ht,At)|0,d=d+Math.imul(Ht,Ft)|0,d=d+Math.imul(pt,At)|0,B=B+Math.imul(pt,Ft)|0,v=v+Math.imul(bt,Jt)|0,d=d+Math.imul(bt,Zt)|0,d=d+Math.imul(Nt,Jt)|0,B=B+Math.imul(Nt,Zt)|0,v=v+Math.imul(Xe,gt)|0,d=d+Math.imul(Xe,_t)|0,d=d+Math.imul($e,gt)|0,B=B+Math.imul($e,_t)|0,v=v+Math.imul(Ne,Kt)|0,d=d+Math.imul(Ne,$t)|0,d=d+Math.imul(ve,Kt)|0,B=B+Math.imul(ve,$t)|0,v=v+Math.imul(oe,st)|0,d=d+Math.imul(oe,jt)|0,d=d+Math.imul(he,st)|0,B=B+Math.imul(he,jt)|0;var De=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(De>>>26)|0,De&=67108863,v=Math.imul(Bt,vt),d=Math.imul(Bt,Pt),d=d+Math.imul(Dt,vt)|0,B=Math.imul(Dt,Pt),v=v+Math.imul(qt,At)|0,d=d+Math.imul(qt,Ft)|0,d=d+Math.imul(Lt,At)|0,B=B+Math.imul(Lt,Ft)|0,v=v+Math.imul(Ht,Jt)|0,d=d+Math.imul(Ht,Zt)|0,d=d+Math.imul(pt,Jt)|0,B=B+Math.imul(pt,Zt)|0,v=v+Math.imul(bt,gt)|0,d=d+Math.imul(bt,_t)|0,d=d+Math.imul(Nt,gt)|0,B=B+Math.imul(Nt,_t)|0,v=v+Math.imul(Xe,Kt)|0,d=d+Math.imul(Xe,$t)|0,d=d+Math.imul($e,Kt)|0,B=B+Math.imul($e,$t)|0,v=v+Math.imul(Ne,st)|0,d=d+Math.imul(Ne,jt)|0,d=d+Math.imul(ve,st)|0,B=B+Math.imul(ve,jt)|0,v=v+Math.imul(oe,_)|0,d=d+Math.imul(oe,E)|0,d=d+Math.imul(he,_)|0,B=B+Math.imul(he,E)|0;var Ue=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,v=Math.imul(Mt,vt),d=Math.imul(Mt,Pt),d=d+Math.imul(Ut,vt)|0,B=Math.imul(Ut,Pt),v=v+Math.imul(Bt,At)|0,d=d+Math.imul(Bt,Ft)|0,d=d+Math.imul(Dt,At)|0,B=B+Math.imul(Dt,Ft)|0,v=v+Math.imul(qt,Jt)|0,d=d+Math.imul(qt,Zt)|0,d=d+Math.imul(Lt,Jt)|0,B=B+Math.imul(Lt,Zt)|0,v=v+Math.imul(Ht,gt)|0,d=d+Math.imul(Ht,_t)|0,d=d+Math.imul(pt,gt)|0,B=B+Math.imul(pt,_t)|0,v=v+Math.imul(bt,Kt)|0,d=d+Math.imul(bt,$t)|0,d=d+Math.imul(Nt,Kt)|0,B=B+Math.imul(Nt,$t)|0,v=v+Math.imul(Xe,st)|0,d=d+Math.imul(Xe,jt)|0,d=d+Math.imul($e,st)|0,B=B+Math.imul($e,jt)|0,v=v+Math.imul(Ne,_)|0,d=d+Math.imul(Ne,E)|0,d=d+Math.imul(ve,_)|0,B=B+Math.imul(ve,E)|0,v=v+Math.imul(oe,T)|0,d=d+Math.imul(oe,F)|0,d=d+Math.imul(he,T)|0,B=B+Math.imul(he,F)|0;var Me=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Me>>>26)|0,Me&=67108863,v=Math.imul(Yt,vt),d=Math.imul(Yt,Pt),d=d+Math.imul(zt,vt)|0,B=Math.imul(zt,Pt),v=v+Math.imul(Mt,At)|0,d=d+Math.imul(Mt,Ft)|0,d=d+Math.imul(Ut,At)|0,B=B+Math.imul(Ut,Ft)|0,v=v+Math.imul(Bt,Jt)|0,d=d+Math.imul(Bt,Zt)|0,d=d+Math.imul(Dt,Jt)|0,B=B+Math.imul(Dt,Zt)|0,v=v+Math.imul(qt,gt)|0,d=d+Math.imul(qt,_t)|0,d=d+Math.imul(Lt,gt)|0,B=B+Math.imul(Lt,_t)|0,v=v+Math.imul(Ht,Kt)|0,d=d+Math.imul(Ht,$t)|0,d=d+Math.imul(pt,Kt)|0,B=B+Math.imul(pt,$t)|0,v=v+Math.imul(bt,st)|0,d=d+Math.imul(bt,jt)|0,d=d+Math.imul(Nt,st)|0,B=B+Math.imul(Nt,jt)|0,v=v+Math.imul(Xe,_)|0,d=d+Math.imul(Xe,E)|0,d=d+Math.imul($e,_)|0,B=B+Math.imul($e,E)|0,v=v+Math.imul(Ne,T)|0,d=d+Math.imul(Ne,F)|0,d=d+Math.imul(ve,T)|0,B=B+Math.imul(ve,F)|0,v=v+Math.imul(oe,Q)|0,d=d+Math.imul(oe,ie)|0,d=d+Math.imul(he,Q)|0,B=B+Math.imul(he,ie)|0;var be=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(be>>>26)|0,be&=67108863,v=Math.imul(kt,vt),d=Math.imul(kt,Pt),d=d+Math.imul(It,vt)|0,B=Math.imul(It,Pt),v=v+Math.imul(Yt,At)|0,d=d+Math.imul(Yt,Ft)|0,d=d+Math.imul(zt,At)|0,B=B+Math.imul(zt,Ft)|0,v=v+Math.imul(Mt,Jt)|0,d=d+Math.imul(Mt,Zt)|0,d=d+Math.imul(Ut,Jt)|0,B=B+Math.imul(Ut,Zt)|0,v=v+Math.imul(Bt,gt)|0,d=d+Math.imul(Bt,_t)|0,d=d+Math.imul(Dt,gt)|0,B=B+Math.imul(Dt,_t)|0,v=v+Math.imul(qt,Kt)|0,d=d+Math.imul(qt,$t)|0,d=d+Math.imul(Lt,Kt)|0,B=B+Math.imul(Lt,$t)|0,v=v+Math.imul(Ht,st)|0,d=d+Math.imul(Ht,jt)|0,d=d+Math.imul(pt,st)|0,B=B+Math.imul(pt,jt)|0,v=v+Math.imul(bt,_)|0,d=d+Math.imul(bt,E)|0,d=d+Math.imul(Nt,_)|0,B=B+Math.imul(Nt,E)|0,v=v+Math.imul(Xe,T)|0,d=d+Math.imul(Xe,F)|0,d=d+Math.imul($e,T)|0,B=B+Math.imul($e,F)|0,v=v+Math.imul(Ne,Q)|0,d=d+Math.imul(Ne,ie)|0,d=d+Math.imul(ve,Q)|0,B=B+Math.imul(ve,ie)|0,v=v+Math.imul(oe,fe)|0,d=d+Math.imul(oe,Be)|0,d=d+Math.imul(he,fe)|0,B=B+Math.imul(he,Be)|0;var Ae=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,v=Math.imul(kt,At),d=Math.imul(kt,Ft),d=d+Math.imul(It,At)|0,B=Math.imul(It,Ft),v=v+Math.imul(Yt,Jt)|0,d=d+Math.imul(Yt,Zt)|0,d=d+Math.imul(zt,Jt)|0,B=B+Math.imul(zt,Zt)|0,v=v+Math.imul(Mt,gt)|0,d=d+Math.imul(Mt,_t)|0,d=d+Math.imul(Ut,gt)|0,B=B+Math.imul(Ut,_t)|0,v=v+Math.imul(Bt,Kt)|0,d=d+Math.imul(Bt,$t)|0,d=d+Math.imul(Dt,Kt)|0,B=B+Math.imul(Dt,$t)|0,v=v+Math.imul(qt,st)|0,d=d+Math.imul(qt,jt)|0,d=d+Math.imul(Lt,st)|0,B=B+Math.imul(Lt,jt)|0,v=v+Math.imul(Ht,_)|0,d=d+Math.imul(Ht,E)|0,d=d+Math.imul(pt,_)|0,B=B+Math.imul(pt,E)|0,v=v+Math.imul(bt,T)|0,d=d+Math.imul(bt,F)|0,d=d+Math.imul(Nt,T)|0,B=B+Math.imul(Nt,F)|0,v=v+Math.imul(Xe,Q)|0,d=d+Math.imul(Xe,ie)|0,d=d+Math.imul($e,Q)|0,B=B+Math.imul($e,ie)|0,v=v+Math.imul(Ne,fe)|0,d=d+Math.imul(Ne,Be)|0,d=d+Math.imul(ve,fe)|0,B=B+Math.imul(ve,Be)|0;var ye=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(ye>>>26)|0,ye&=67108863,v=Math.imul(kt,Jt),d=Math.imul(kt,Zt),d=d+Math.imul(It,Jt)|0,B=Math.imul(It,Zt),v=v+Math.imul(Yt,gt)|0,d=d+Math.imul(Yt,_t)|0,d=d+Math.imul(zt,gt)|0,B=B+Math.imul(zt,_t)|0,v=v+Math.imul(Mt,Kt)|0,d=d+Math.imul(Mt,$t)|0,d=d+Math.imul(Ut,Kt)|0,B=B+Math.imul(Ut,$t)|0,v=v+Math.imul(Bt,st)|0,d=d+Math.imul(Bt,jt)|0,d=d+Math.imul(Dt,st)|0,B=B+Math.imul(Dt,jt)|0,v=v+Math.imul(qt,_)|0,d=d+Math.imul(qt,E)|0,d=d+Math.imul(Lt,_)|0,B=B+Math.imul(Lt,E)|0,v=v+Math.imul(Ht,T)|0,d=d+Math.imul(Ht,F)|0,d=d+Math.imul(pt,T)|0,B=B+Math.imul(pt,F)|0,v=v+Math.imul(bt,Q)|0,d=d+Math.imul(bt,ie)|0,d=d+Math.imul(Nt,Q)|0,B=B+Math.imul(Nt,ie)|0,v=v+Math.imul(Xe,fe)|0,d=d+Math.imul(Xe,Be)|0,d=d+Math.imul($e,fe)|0,B=B+Math.imul($e,Be)|0;var Re=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Re>>>26)|0,Re&=67108863,v=Math.imul(kt,gt),d=Math.imul(kt,_t),d=d+Math.imul(It,gt)|0,B=Math.imul(It,_t),v=v+Math.imul(Yt,Kt)|0,d=d+Math.imul(Yt,$t)|0,d=d+Math.imul(zt,Kt)|0,B=B+Math.imul(zt,$t)|0,v=v+Math.imul(Mt,st)|0,d=d+Math.imul(Mt,jt)|0,d=d+Math.imul(Ut,st)|0,B=B+Math.imul(Ut,jt)|0,v=v+Math.imul(Bt,_)|0,d=d+Math.imul(Bt,E)|0,d=d+Math.imul(Dt,_)|0,B=B+Math.imul(Dt,E)|0,v=v+Math.imul(qt,T)|0,d=d+Math.imul(qt,F)|0,d=d+Math.imul(Lt,T)|0,B=B+Math.imul(Lt,F)|0,v=v+Math.imul(Ht,Q)|0,d=d+Math.imul(Ht,ie)|0,d=d+Math.imul(pt,Q)|0,B=B+Math.imul(pt,ie)|0,v=v+Math.imul(bt,fe)|0,d=d+Math.imul(bt,Be)|0,d=d+Math.imul(Nt,fe)|0,B=B+Math.imul(Nt,Be)|0;var Se=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(Se>>>26)|0,Se&=67108863,v=Math.imul(kt,Kt),d=Math.imul(kt,$t),d=d+Math.imul(It,Kt)|0,B=Math.imul(It,$t),v=v+Math.imul(Yt,st)|0,d=d+Math.imul(Yt,jt)|0,d=d+Math.imul(zt,st)|0,B=B+Math.imul(zt,jt)|0,v=v+Math.imul(Mt,_)|0,d=d+Math.imul(Mt,E)|0,d=d+Math.imul(Ut,_)|0,B=B+Math.imul(Ut,E)|0,v=v+Math.imul(Bt,T)|0,d=d+Math.imul(Bt,F)|0,d=d+Math.imul(Dt,T)|0,B=B+Math.imul(Dt,F)|0,v=v+Math.imul(qt,Q)|0,d=d+Math.imul(qt,ie)|0,d=d+Math.imul(Lt,Q)|0,B=B+Math.imul(Lt,ie)|0,v=v+Math.imul(Ht,fe)|0,d=d+Math.imul(Ht,Be)|0,d=d+Math.imul(pt,fe)|0,B=B+Math.imul(pt,Be)|0;var me=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(me>>>26)|0,me&=67108863,v=Math.imul(kt,st),d=Math.imul(kt,jt),d=d+Math.imul(It,st)|0,B=Math.imul(It,jt),v=v+Math.imul(Yt,_)|0,d=d+Math.imul(Yt,E)|0,d=d+Math.imul(zt,_)|0,B=B+Math.imul(zt,E)|0,v=v+Math.imul(Mt,T)|0,d=d+Math.imul(Mt,F)|0,d=d+Math.imul(Ut,T)|0,B=B+Math.imul(Ut,F)|0,v=v+Math.imul(Bt,Q)|0,d=d+Math.imul(Bt,ie)|0,d=d+Math.imul(Dt,Q)|0,B=B+Math.imul(Dt,ie)|0,v=v+Math.imul(qt,fe)|0,d=d+Math.imul(qt,Be)|0,d=d+Math.imul(Lt,fe)|0,B=B+Math.imul(Lt,Be)|0;var G=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(G>>>26)|0,G&=67108863,v=Math.imul(kt,_),d=Math.imul(kt,E),d=d+Math.imul(It,_)|0,B=Math.imul(It,E),v=v+Math.imul(Yt,T)|0,d=d+Math.imul(Yt,F)|0,d=d+Math.imul(zt,T)|0,B=B+Math.imul(zt,F)|0,v=v+Math.imul(Mt,Q)|0,d=d+Math.imul(Mt,ie)|0,d=d+Math.imul(Ut,Q)|0,B=B+Math.imul(Ut,ie)|0,v=v+Math.imul(Bt,fe)|0,d=d+Math.imul(Bt,Be)|0,d=d+Math.imul(Dt,fe)|0,B=B+Math.imul(Dt,Be)|0;var J=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(J>>>26)|0,J&=67108863,v=Math.imul(kt,T),d=Math.imul(kt,F),d=d+Math.imul(It,T)|0,B=Math.imul(It,F),v=v+Math.imul(Yt,Q)|0,d=d+Math.imul(Yt,ie)|0,d=d+Math.imul(zt,Q)|0,B=B+Math.imul(zt,ie)|0,v=v+Math.imul(Mt,fe)|0,d=d+Math.imul(Mt,Be)|0,d=d+Math.imul(Ut,fe)|0,B=B+Math.imul(Ut,Be)|0;var ae=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(ae>>>26)|0,ae&=67108863,v=Math.imul(kt,Q),d=Math.imul(kt,ie),d=d+Math.imul(It,Q)|0,B=Math.imul(It,ie),v=v+Math.imul(Yt,fe)|0,d=d+Math.imul(Yt,Be)|0,d=d+Math.imul(zt,fe)|0,B=B+Math.imul(zt,Be)|0;var re=(L+v|0)+((d&8191)<<13)|0;L=(B+(d>>>13)|0)+(re>>>26)|0,re&=67108863,v=Math.imul(kt,fe),d=Math.imul(kt,Be),d=d+Math.imul(It,fe)|0,B=Math.imul(It,Be);var ne=(L+v|0)+((d&8191)<<13)|0;return L=(B+(d>>>13)|0)+(ne>>>26)|0,ne&=67108863,N[0]=Ee,N[1]=Pe,N[2]=Le,N[3]=Ve,N[4]=Fe,N[5]=De,N[6]=Ue,N[7]=Me,N[8]=be,N[9]=Ae,N[10]=ye,N[11]=Re,N[12]=Se,N[13]=me,N[14]=G,N[15]=J,N[16]=ae,N[17]=re,N[18]=ne,L!==0&&(N[19]=L,p.length++),p};Math.imul||(k=I);function z(b,c,l){l.negative=c.negative^b.negative,l.length=b.length+c.length;for(var p=0,w=0,x=0;x<l.length-1;x++){var N=w;w=0;for(var L=p&67108863,v=Math.min(x,c.length-1),d=Math.max(0,x-b.length+1);d<=v;d++){var B=x-d,X=b.words[B]|0,oe=c.words[d]|0,he=X*oe,we=he&67108863;N=N+(he/67108864|0)|0,we=we+L|0,L=we&67108863,N=N+(we>>>26)|0,w+=N>>>26,N&=67108863}l.words[x]=L,p=N,N=w}return p!==0?l.words[x]=p:l.length--,l._strip()}function M(b,c,l){return z(b,c,l)}s.prototype.mulTo=function(c,l){var p,w=this.length+c.length;return this.length===10&&c.length===10?p=k(this,c,l):w<63?p=I(this,c,l):w<1024?p=z(this,c,l):p=M(this,c,l),p};function K(b,c){this.x=b,this.y=c}K.prototype.makeRBT=function(c){for(var l=new Array(c),p=s.prototype._countBits(c)-1,w=0;w<c;w++)l[w]=this.revBin(w,p,c);return l},K.prototype.revBin=function(c,l,p){if(c===0||c===p-1)return c;for(var w=0,x=0;x<l;x++)w|=(c&1)<<l-x-1,c>>=1;return w},K.prototype.permute=function(c,l,p,w,x,N){for(var L=0;L<N;L++)w[L]=l[c[L]],x[L]=p[c[L]]},K.prototype.transform=function(c,l,p,w,x,N){this.permute(N,c,l,p,w,x);for(var L=1;L<x;L<<=1)for(var v=L<<1,d=Math.cos(2*Math.PI/v),B=Math.sin(2*Math.PI/v),X=0;X<x;X+=v)for(var oe=d,he=B,we=0;we<L;we++){var Ne=p[X+we],ve=w[X+we],rt=p[X+we+L],Xe=w[X+we+L],$e=oe*rt-he*Xe;Xe=oe*Xe+he*rt,rt=$e,p[X+we]=Ne+rt,w[X+we]=ve+Xe,p[X+we+L]=Ne-rt,w[X+we+L]=ve-Xe,we!==v&&($e=d*oe-B*he,he=d*he+B*oe,oe=$e)}},K.prototype.guessLen13b=function(c,l){var p=Math.max(l,c)|1,w=p&1,x=0;for(p=p/2|0;p;p=p>>>1)x++;return 1<<x+1+w},K.prototype.conjugate=function(c,l,p){if(!(p<=1))for(var w=0;w<p/2;w++){var x=c[w];c[w]=c[p-w-1],c[p-w-1]=x,x=l[w],l[w]=-l[p-w-1],l[p-w-1]=-x}},K.prototype.normalize13b=function(c,l){for(var p=0,w=0;w<l/2;w++){var x=Math.round(c[2*w+1]/l)*8192+Math.round(c[2*w]/l)+p;c[w]=x&67108863,x<67108864?p=0:p=x/67108864|0}return c},K.prototype.convert13b=function(c,l,p,w){for(var x=0,N=0;N<l;N++)x=x+(c[N]|0),p[2*N]=x&8191,x=x>>>13,p[2*N+1]=x&8191,x=x>>>13;for(N=2*l;N<w;++N)p[N]=0;r(x===0),r((x&-8192)===0)},K.prototype.stub=function(c){for(var l=new Array(c),p=0;p<c;p++)l[p]=0;return l},K.prototype.mulp=function(c,l,p){var w=2*this.guessLen13b(c.length,l.length),x=this.makeRBT(w),N=this.stub(w),L=new Array(w),v=new Array(w),d=new Array(w),B=new Array(w),X=new Array(w),oe=new Array(w),he=p.words;he.length=w,this.convert13b(c.words,c.length,L,w),this.convert13b(l.words,l.length,B,w),this.transform(L,N,v,d,w,x),this.transform(B,N,X,oe,w,x);for(var we=0;we<w;we++){var Ne=v[we]*X[we]-d[we]*oe[we];d[we]=v[we]*oe[we]+d[we]*X[we],v[we]=Ne}return this.conjugate(v,d,w),this.transform(v,d,he,N,w,x),this.conjugate(he,N,w),this.normalize13b(he,w),p.negative=c.negative^l.negative,p.length=c.length+l.length,p._strip()},s.prototype.mul=function(c){var l=new s(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},s.prototype.mulf=function(c){var l=new s(null);return l.words=new Array(this.length+c.length),M(this,c,l)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var l=c<0;l&&(c=-c),r(typeof c=="number"),r(c<67108864);for(var p=0,w=0;w<this.length;w++){var x=(this.words[w]|0)*c,N=(x&67108863)+(p&67108863);p>>=26,p+=x/67108864|0,p+=N>>>26,this.words[w]=N&67108863}return p!==0&&(this.words[w]=p,this.length++),this.length=c===0?1:this.length,l?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var l=A(c);if(l.length===0)return new s(1);for(var p=this,w=0;w<l.length&&l[w]===0;w++,p=p.sqr());if(++w<l.length)for(var x=p.sqr();w<l.length;w++,x=x.sqr())l[w]!==0&&(p=p.mul(x));return p},s.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var l=c%26,p=(c-l)/26,w=67108863>>>26-l<<26-l,x;if(l!==0){var N=0;for(x=0;x<this.length;x++){var L=this.words[x]&w,v=(this.words[x]|0)-L<<l;this.words[x]=v|N,N=L>>>26-l}N&&(this.words[x]=N,this.length++)}if(p!==0){for(x=this.length-1;x>=0;x--)this.words[x+p]=this.words[x];for(x=0;x<p;x++)this.words[x]=0;this.length+=p}return this._strip()},s.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,l,p){r(typeof c=="number"&&c>=0);var w;l?w=(l-l%26)/26:w=0;var x=c%26,N=Math.min((c-x)/26,this.length),L=67108863^67108863>>>x<<x,v=p;if(w-=N,w=Math.max(0,w),v){for(var d=0;d<N;d++)v.words[d]=this.words[d];v.length=N}if(N!==0)if(this.length>N)for(this.length-=N,d=0;d<this.length;d++)this.words[d]=this.words[d+N];else this.words[0]=0,this.length=1;var B=0;for(d=this.length-1;d>=0&&(B!==0||d>=w);d--){var X=this.words[d]|0;this.words[d]=B<<26-x|X>>>x,B=X&L}return v&&B!==0&&(v.words[v.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,l,p){return r(this.negative===0),this.iushrn(c,l,p)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,p=(c-l)/26,w=1<<l;if(this.length<=p)return!1;var x=this.words[p];return!!(x&w)},s.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,p=(c-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(l!==0&&p++,this.length=Math.min(p,this.length),l!==0){var w=67108863^67108863>>>l<<l;this.words[this.length-1]&=w}return this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,l,p){var w=c.length+p,x;this._expand(w);var N,L=0;for(x=0;x<c.length;x++){N=(this.words[x+p]|0)+L;var v=(c.words[x]|0)*l;N-=v&67108863,L=(N>>26)-(v/67108864|0),this.words[x+p]=N&67108863}for(;x<this.length-p;x++)N=(this.words[x+p]|0)+L,L=N>>26,this.words[x+p]=N&67108863;if(L===0)return this._strip();for(r(L===-1),L=0,x=0;x<this.length;x++)N=-(this.words[x]|0)+L,L=N>>26,this.words[x]=N&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,l){var p=this.length-c.length,w=this.clone(),x=c,N=x.words[x.length-1]|0,L=this._countBits(N);p=26-L,p!==0&&(x=x.ushln(p),w.iushln(p),N=x.words[x.length-1]|0);var v=w.length-x.length,d;if(l!=="mod"){d=new s(null),d.length=v+1,d.words=new Array(d.length);for(var B=0;B<d.length;B++)d.words[B]=0}var X=w.clone()._ishlnsubmul(x,1,v);X.negative===0&&(w=X,d&&(d.words[v]=1));for(var oe=v-1;oe>=0;oe--){var he=(w.words[x.length+oe]|0)*67108864+(w.words[x.length+oe-1]|0);for(he=Math.min(he/N|0,67108863),w._ishlnsubmul(x,he,oe);w.negative!==0;)he--,w.negative=0,w._ishlnsubmul(x,1,oe),w.isZero()||(w.negative^=1);d&&(d.words[oe]=he)}return d&&d._strip(),w._strip(),l!=="div"&&p!==0&&w.iushrn(p),{div:d||null,mod:w}},s.prototype.divmod=function(c,l,p){if(r(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,x,N;return this.negative!==0&&c.negative===0?(N=this.neg().divmod(c,l),l!=="mod"&&(w=N.div.neg()),l!=="div"&&(x=N.mod.neg(),p&&x.negative!==0&&x.iadd(c)),{div:w,mod:x}):this.negative===0&&c.negative!==0?(N=this.divmod(c.neg(),l),l!=="mod"&&(w=N.div.neg()),{div:w,mod:N.mod}):(this.negative&c.negative)!==0?(N=this.neg().divmod(c.neg(),l),l!=="div"&&(x=N.mod.neg(),p&&x.negative!==0&&x.isub(c)),{div:N.div,mod:x}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,l)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var p=l.div.negative!==0?l.mod.isub(c):l.mod,w=c.ushrn(1),x=c.andln(1),N=p.cmp(w);return N<0||x===1&&N===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modrn=function(c){var l=c<0;l&&(c=-c),r(c<=67108863);for(var p=(1<<26)%c,w=0,x=this.length-1;x>=0;x--)w=(p*w+(this.words[x]|0))%c;return l?-w:w},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var l=c<0;l&&(c=-c),r(c<=67108863);for(var p=0,w=this.length-1;w>=0;w--){var x=(this.words[w]|0)+p*67108864;this.words[w]=x/c|0,p=x%c}return this._strip(),l?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var l=this,p=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var w=new s(1),x=new s(0),N=new s(0),L=new s(1),v=0;l.isEven()&&p.isEven();)l.iushrn(1),p.iushrn(1),++v;for(var d=p.clone(),B=l.clone();!l.isZero();){for(var X=0,oe=1;(l.words[0]&oe)===0&&X<26;++X,oe<<=1);if(X>0)for(l.iushrn(X);X-- >0;)(w.isOdd()||x.isOdd())&&(w.iadd(d),x.isub(B)),w.iushrn(1),x.iushrn(1);for(var he=0,we=1;(p.words[0]&we)===0&&he<26;++he,we<<=1);if(he>0)for(p.iushrn(he);he-- >0;)(N.isOdd()||L.isOdd())&&(N.iadd(d),L.isub(B)),N.iushrn(1),L.iushrn(1);l.cmp(p)>=0?(l.isub(p),w.isub(N),x.isub(L)):(p.isub(l),N.isub(w),L.isub(x))}return{a:N,b:L,gcd:p.iushln(v)}},s.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var l=this,p=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var w=new s(1),x=new s(0),N=p.clone();l.cmpn(1)>0&&p.cmpn(1)>0;){for(var L=0,v=1;(l.words[0]&v)===0&&L<26;++L,v<<=1);if(L>0)for(l.iushrn(L);L-- >0;)w.isOdd()&&w.iadd(N),w.iushrn(1);for(var d=0,B=1;(p.words[0]&B)===0&&d<26;++d,B<<=1);if(d>0)for(p.iushrn(d);d-- >0;)x.isOdd()&&x.iadd(N),x.iushrn(1);l.cmp(p)>=0?(l.isub(p),w.isub(x)):(p.isub(l),x.isub(w))}var X;return l.cmpn(1)===0?X=w:X=x,X.cmpn(0)<0&&X.iadd(c),X},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),p=c.clone();l.negative=0,p.negative=0;for(var w=0;l.isEven()&&p.isEven();w++)l.iushrn(1),p.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;p.isEven();)p.iushrn(1);var x=l.cmp(p);if(x<0){var N=l;l=p,p=N}else if(x===0||p.cmpn(1)===0)break;l.isub(p)}while(!0);return p.iushln(w)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){r(typeof c=="number");var l=c%26,p=(c-l)/26,w=1<<l;if(this.length<=p)return this._expand(p+1),this.words[p]|=w,this;for(var x=w,N=p;x!==0&&N<this.length;N++){var L=this.words[N]|0;L+=x,x=L>>>26,L&=67108863,this.words[N]=L}return x!==0&&(this.words[N]=x,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var p;if(this.length>1)p=1;else{l&&(c=-c),r(c<=67108863,"Number is too big");var w=this.words[0]|0;p=w===c?0:w<c?-1:1}return this.negative!==0?-p|0:p},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,p=this.length-1;p>=0;p--){var w=this.words[p]|0,x=c.words[p]|0;if(w!==x){w<x?l=-1:w>x&&(l=1);break}}return l},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new se(c)},s.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var Z={k256:null,p224:null,p192:null,p25519:null};function V(b,c){this.name=b,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},V.prototype.ireduce=function(c){var l=c,p;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),p=l.bitLength();while(p>this.n);var w=p<this.n?-1:l.ucmp(this.p);return w===0?(l.words[0]=0,l.length=1):w>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},V.prototype.split=function(c,l){c.iushrn(this.n,0,l)},V.prototype.imulK=function(c){return c.imul(this.k)};function Y(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(Y,V),Y.prototype.split=function(c,l){for(var p=4194303,w=Math.min(c.length,9),x=0;x<w;x++)l.words[x]=c.words[x];if(l.length=w,c.length<=9){c.words[0]=0,c.length=1;return}var N=c.words[9];for(l.words[l.length++]=N&p,x=10;x<c.length;x++){var L=c.words[x]|0;c.words[x-10]=(L&p)<<4|N>>>22,N=L}N>>>=22,c.words[x-10]=N,N===0&&c.length>10?c.length-=10:c.length-=9},Y.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,p=0;p<c.length;p++){var w=c.words[p]|0;l+=w*977,c.words[p]=l&67108863,l=w*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function te(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(te,V);function j(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(j,V);function ce(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(ce,V),ce.prototype.imulK=function(c){for(var l=0,p=0;p<c.length;p++){var w=(c.words[p]|0)*19+l,x=w&67108863;w>>>=26,c.words[p]=x,l=w}return l!==0&&(c.words[c.length++]=l),c},s._prime=function(c){if(Z[c])return Z[c];var l;if(c==="k256")l=new Y;else if(c==="p224")l=new te;else if(c==="p192")l=new j;else if(c==="p25519")l=new ce;else throw new Error("Unknown prime "+c);return Z[c]=l,l};function se(b){if(typeof b=="string"){var c=s._prime(b);this.m=c.p,this.prime=c}else r(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}se.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},se.prototype._verify2=function(c,l){r((c.negative|l.negative)===0,"red works only with positives"),r(c.red&&c.red===l.red,"red works only with red numbers")},se.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(h(c,c.umod(this.m)._forceRed(this)),c)},se.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},se.prototype.add=function(c,l){this._verify2(c,l);var p=c.add(l);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},se.prototype.iadd=function(c,l){this._verify2(c,l);var p=c.iadd(l);return p.cmp(this.m)>=0&&p.isub(this.m),p},se.prototype.sub=function(c,l){this._verify2(c,l);var p=c.sub(l);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},se.prototype.isub=function(c,l){this._verify2(c,l);var p=c.isub(l);return p.cmpn(0)<0&&p.iadd(this.m),p},se.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},se.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},se.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},se.prototype.isqr=function(c){return this.imul(c,c.clone())},se.prototype.sqr=function(c){return this.mul(c,c)},se.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var p=this.m.add(new s(1)).iushrn(2);return this.pow(c,p)}for(var w=this.m.subn(1),x=0;!w.isZero()&&w.andln(1)===0;)x++,w.iushrn(1);r(!w.isZero());var N=new s(1).toRed(this),L=N.redNeg(),v=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new s(2*d*d).toRed(this);this.pow(d,v).cmp(L)!==0;)d.redIAdd(L);for(var B=this.pow(d,w),X=this.pow(c,w.addn(1).iushrn(1)),oe=this.pow(c,w),he=x;oe.cmp(N)!==0;){for(var we=oe,Ne=0;we.cmp(N)!==0;Ne++)we=we.redSqr();r(Ne<he);var ve=this.pow(B,new s(1).iushln(he-Ne-1));X=X.redMul(ve),B=ve.redSqr(),oe=oe.redMul(B),he=Ne}return X},se.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},se.prototype.pow=function(c,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var p=4,w=new Array(1<<p);w[0]=new s(1).toRed(this),w[1]=c;for(var x=2;x<w.length;x++)w[x]=this.mul(w[x-1],c);var N=w[0],L=0,v=0,d=l.bitLength()%26;for(d===0&&(d=26),x=l.length-1;x>=0;x--){for(var B=l.words[x],X=d-1;X>=0;X--){var oe=B>>X&1;if(N!==w[0]&&(N=this.sqr(N)),oe===0&&L===0){v=0;continue}L<<=1,L|=oe,v++,!(v!==p&&(x!==0||X!==0))&&(N=this.mul(N,w[L]),v=0,L=0)}d=26}return N},se.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},se.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},s.mont=function(c){return new de(c)};function de(b){se.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(de,se),de.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},de.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},de.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var p=c.imul(l),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(w).iushrn(this.shift),N=x;return x.cmp(this.m)>=0?N=x.isub(this.m):x.cmpn(0)<0&&(N=x.iadd(this.m)),N._forceRed(this)},de.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new s(0)._forceRed(this);var p=c.mul(l),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(w).iushrn(this.shift),N=x;return x.cmp(this.m)>=0?N=x.isub(this.m):x.cmpn(0)<0&&(N=x.iadd(this.m)),N._forceRed(this)},de.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof wd>"u"||wd,Im)});var _d=cr((bd,Am)=>{var _u=mn(),qn=_u.Buffer;function vm(t,e){for(var r in t)e[r]=t[r]}qn.from&&qn.alloc&&qn.allocUnsafe&&qn.allocUnsafeSlow?Am.exports=_u:(vm(_u,bd),bd.Buffer=Po);function Po(t,e,r){return qn(t,e,r)}Po.prototype=Object.create(qn.prototype);vm(qn,Po);Po.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return qn(t,e,r)};Po.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=qn(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Po.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return qn(t)};Po.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return _u.SlowBuffer(t)}});var Om=cr((i8,Tm)=>{"use strict";var xu=_d().Buffer;function Zv(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=n}var i=t.length,a=t.charAt(0),u=Math.log(i)/Math.log(256),h=Math.log(256)/Math.log(i);function m(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=xu.from(S)),!xu.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var R=0,A=0,I=0,k=S.length;I!==k&&S[I]===0;)I++,R++;for(var z=(k-I)*h+1>>>0,M=new Uint8Array(z);I!==k;){for(var K=S[I],Z=0,V=z-1;(K!==0||Z<A)&&V!==-1;V--,Z++)K+=256*M[V]>>>0,M[V]=K%i>>>0,K=K/i>>>0;if(K!==0)throw new Error("Non-zero carry");A=Z,I++}for(var Y=z-A;Y!==z&&M[Y]===0;)Y++;for(var te=a.repeat(R);Y<z;++Y)te+=t.charAt(M[Y]);return te}function y(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return xu.alloc(0);for(var R=0,A=0,I=0;S[R]===a;)A++,R++;for(var k=(S.length-R)*u+1>>>0,z=new Uint8Array(k);R<S.length;){var M=S.charCodeAt(R);if(M>255)return;var K=e[M];if(K===255)return;for(var Z=0,V=k-1;(K!==0||Z<I)&&V!==-1;V--,Z++)K+=i*z[V]>>>0,z[V]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");I=Z,R++}for(var Y=k-I;Y!==k&&z[Y]===0;)Y++;var te=xu.allocUnsafe(A+(k-Y));te.fill(0,0,A);for(var j=A;Y!==k;)te[j++]=z[Y++];return te}function O(S){var R=y(S);if(R)return R;throw new Error("Non-base"+i+" character")}return{encode:m,decodeUnsafe:y,decode:O}}Tm.exports=Zv});var Bm=cr((a8,Nm)=>{var Xv=Om(),Qv="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Nm.exports=Xv(Qv)});var Pm=cr((d8,km)=>{"use strict";var Ru=_d().Buffer;function eA(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=n}var i=t.length,a=t.charAt(0),u=Math.log(i)/Math.log(256),h=Math.log(256)/Math.log(i);function m(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=Ru.from(S)),!Ru.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var R=0,A=0,I=0,k=S.length;I!==k&&S[I]===0;)I++,R++;for(var z=(k-I)*h+1>>>0,M=new Uint8Array(z);I!==k;){for(var K=S[I],Z=0,V=z-1;(K!==0||Z<A)&&V!==-1;V--,Z++)K+=256*M[V]>>>0,M[V]=K%i>>>0,K=K/i>>>0;if(K!==0)throw new Error("Non-zero carry");A=Z,I++}for(var Y=z-A;Y!==z&&M[Y]===0;)Y++;for(var te=a.repeat(R);Y<z;++Y)te+=t.charAt(M[Y]);return te}function y(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return Ru.alloc(0);for(var R=0,A=0,I=0;S[R]===a;)A++,R++;for(var k=(S.length-R)*u+1>>>0,z=new Uint8Array(k);R<S.length;){var M=S.charCodeAt(R);if(M>255)return;var K=e[M];if(K===255)return;for(var Z=0,V=k-1;(K!==0||Z<I)&&V!==-1;V--,Z++)K+=i*z[V]>>>0,z[V]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");I=Z,R++}for(var Y=k-I;Y!==k&&z[Y]===0;)Y++;var te=Ru.allocUnsafe(A+(k-Y));te.fill(0,0,A);for(var j=A;Y!==k;)te[j++]=z[Y++];return te}function O(S){var R=y(S);if(R)return R;throw new Error("Non-base"+i+" character")}return{encode:m,decodeUnsafe:y,decode:O}}km.exports=eA});var Lm=cr((h8,Cm)=>{var tA=Pm(),rA="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Cm.exports=tA(rA)});var Dm=cr(Id=>{"use strict";function ds(t,e,r){return e<=t&&t<=r}function Tu(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function nA(t){for(var e=String(t),r=e.length,n=0,s=[];n<r;){var o=e.charCodeAt(n);if(o<55296||o>57343)s.push(o);else if(56320<=o&&o<=57343)s.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)s.push(65533);else{var i=t.charCodeAt(n+1);if(56320<=i&&i<=57343){var a=o&1023,u=i&1023;s.push(65536+(a<<10)+u),n+=1}else s.push(65533)}n+=1}return s}function sA(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Su=-1;function Sd(t){this.tokens=[].slice.call(t)}Sd.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Su},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var ki=-1;function Rd(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Iu="utf-8";function vu(t,e){if(!(this instanceof vu))return new vu(t,e);if(t=t!==void 0?String(t).toLowerCase():Iu,t!==Iu)throw new Error("Encoding not supported. Only utf-8 is supported");e=Tu(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}vu.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=Tu(r),this._streaming||(this._decoder=new oA({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var s=new Sd(n),o=[],i;!s.endOfStream()&&(i=this._decoder.handler(s,s.read()),i!==ki);)i!==null&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));if(!this._streaming){do{if(i=this._decoder.handler(s,s.read()),i===ki)break;i!==null&&(Array.isArray(i)?o.push.apply(o,i):o.push(i))}while(!s.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),sA(o)}};function Au(t,e){if(!(this instanceof Au))return new Au(t,e);if(t=t!==void 0?String(t).toLowerCase():Iu,t!==Iu)throw new Error("Encoding not supported. Only utf-8 is supported");e=Tu(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Au.prototype={encode:function(e,r){e=e?String(e):"",r=Tu(r),this._streaming||(this._encoder=new iA(this._options)),this._streaming=!!r.stream;for(var n=[],s=new Sd(nA(e)),o;!s.endOfStream()&&(o=this._encoder.handler(s,s.read()),o!==ki);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(s,s.read()),o!==ki;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function oA(t){var e=t.fatal,r=0,n=0,s=0,o=128,i=191;this.handler=function(a,u){if(u===Su&&s!==0)return s=0,Rd(e);if(u===Su)return ki;if(s===0){if(ds(u,0,127))return u;if(ds(u,194,223))s=1,r=u-192;else if(ds(u,224,239))u===224&&(o=160),u===237&&(i=159),s=2,r=u-224;else if(ds(u,240,244))u===240&&(o=144),u===244&&(i=143),s=3,r=u-240;else return Rd(e);return r=r<<6*s,null}if(!ds(u,o,i))return r=s=n=0,o=128,i=191,a.prepend(u),Rd(e);if(o=128,i=191,n+=1,r+=u-128<<6*(s-n),n!==s)return null;var h=r;return r=s=n=0,h}}function iA(t){var e=t.fatal;this.handler=function(r,n){if(n===Su)return ki;if(ds(n,0,127))return n;var s,o;ds(n,128,2047)?(s=1,o=192):ds(n,2048,65535)?(s=2,o=224):ds(n,65536,1114111)&&(s=3,o=240);for(var i=[(n>>6*s)+o];s>0;){var a=n>>6*(s-1);i.push(128|a&63),s-=1}return i}}Id.TextEncoder=Au;Id.TextDecoder=vu});var Km=cr(Et=>{"use strict";var aA=Et&&Et.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),cA=Et&&Et.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),$n=Et&&Et.__decorate||function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},uA=Et&&Et.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&aA(e,t,r);return cA(e,t),e},Mm=Et&&Et.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Et,"__esModule",{value:!0});Et.deserializeUnchecked=Et.deserialize=Et.serialize=Et.BinaryReader=Et.BinaryWriter=Et.BorshError=Et.baseDecode=Et.baseEncode=void 0;var Xs=Mm(Ed()),Um=Mm(Lm()),lA=uA(Dm()),fA=typeof TextDecoder!="function"?lA.TextDecoder:TextDecoder,dA=new fA("utf-8",{fatal:!0});function hA(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),Um.default.encode(Buffer.from(t))}Et.baseEncode=hA;function pA(t){return Buffer.from(Um.default.decode(t))}Et.baseDecode=pA;var vd=1024,_r=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};Et.BorshError=_r;var Ou=class{constructor(){this.buf=Buffer.alloc(vd),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(vd)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Xs.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Xs.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Xs.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Xs.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(vd)]),this.length+=e.length}writeString(e){this.maybeResize();let r=Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(let n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}};Et.BinaryWriter=Ou;function jn(t,e,r){let n=r.value;r.value=function(...s){try{return n.apply(this,s)}catch(o){if(o instanceof RangeError){let i=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(i)>=0)throw new _r("Reached the end of buffer when deserializing")}throw o}}}var qr=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new Xs.default(e,"le")}readU128(){let e=this.readBuffer(16);return new Xs.default(e,"le")}readU256(){let e=this.readBuffer(32);return new Xs.default(e,"le")}readU512(){let e=this.readBuffer(64);return new Xs.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new _r(`Expected buffer length ${e} isn't within bounds`);let r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){let e=this.readU32(),r=this.readBuffer(e);try{return dA.decode(r)}catch(n){throw new _r(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let r=this.readU32(),n=Array();for(let s=0;s<r;++s)n.push(e());return n}};$n([jn],qr.prototype,"readU8",null);$n([jn],qr.prototype,"readU16",null);$n([jn],qr.prototype,"readU32",null);$n([jn],qr.prototype,"readU64",null);$n([jn],qr.prototype,"readU128",null);$n([jn],qr.prototype,"readU256",null);$n([jn],qr.prototype,"readU512",null);$n([jn],qr.prototype,"readString",null);$n([jn],qr.prototype,"readFixedArray",null);$n([jn],qr.prototype,"readArray",null);Et.BinaryReader=qr;function zm(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Co(t,e,r,n,s){try{if(typeof n=="string")s[`write${zm(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new _r(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);s.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new _r(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let o=0;o<n[1];o++)Co(t,null,r[o],n[0],s)}else s.writeArray(r,o=>{Co(t,e,o,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?s.writeU8(0):(s.writeU8(1),Co(t,e,r,n.type,s));break}case"map":{s.writeU32(r.size),r.forEach((o,i)=>{Co(t,e,i,n.key,s),Co(t,e,o,n.value,s)});break}default:throw new _r(`FieldType ${n} unrecognized`)}else Fm(t,r,s)}catch(o){throw o instanceof _r&&o.addToFieldPath(e),o}}function Fm(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}let n=t.get(e.constructor);if(!n)throw new _r(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,o])=>{Co(t,s,e[s],o,r)});else if(n.kind==="enum"){let s=e[n.field];for(let o=0;o<n.values.length;++o){let[i,a]=n.values[o];if(i===s){r.writeU8(o),Co(t,i,e[i],a,r);break}}}else throw new _r(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function gA(t,e,r=Ou){let n=new r;return Fm(t,e,n),n.toArray()}Et.serialize=gA;function Lo(t,e,r,n){try{if(typeof r=="string")return n[`read${zm(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){let s=[];for(let o=0;o<r[1];o++)s.push(Lo(t,null,r[0],n));return s}else return n.readArray(()=>Lo(t,e,r[0],n))}if(r.kind==="option")return n.readU8()?Lo(t,e,r.type,n):void 0;if(r.kind==="map"){let s=new Map,o=n.readU32();for(let i=0;i<o;i++){let a=Lo(t,e,r.key,n),u=Lo(t,e,r.value,n);s.set(a,u)}return s}return Ad(t,r,n)}catch(s){throw s instanceof _r&&s.addToFieldPath(e),s}}function Ad(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);let n=t.get(e);if(!n)throw new _r(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){let s={};for(let[o,i]of t.get(e).fields)s[o]=Lo(t,o,i,r);return new e(s)}if(n.kind==="enum"){let s=r.readU8();if(s>=n.values.length)throw new _r(`Enum index: ${s} is out of range`);let[o,i]=n.values[s],a=Lo(t,o,i,r);return new e({[o]:a})}throw new _r(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function mA(t,e,r,n=qr){let s=new n(r),o=Ad(t,e,s);if(s.offset<r.length)throw new _r(`Unexpected ${r.length-s.offset} bytes after deserialized data`);return o}Et.deserialize=mA;function yA(t,e,r,n=qr){let s=new n(r);return Ad(t,e,s)}Et.deserializeUnchecked=yA});var Bd=cr($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.s16=$.s8=$.nu64be=$.u48be=$.u40be=$.u32be=$.u24be=$.u16be=$.nu64=$.u48=$.u40=$.u32=$.u24=$.u16=$.u8=$.offset=$.greedy=$.Constant=$.UTF8=$.CString=$.Blob=$.Boolean=$.BitField=$.BitStructure=$.VariantLayout=$.Union=$.UnionLayoutDiscriminator=$.UnionDiscriminator=$.Structure=$.Sequence=$.DoubleBE=$.Double=$.FloatBE=$.Float=$.NearInt64BE=$.NearInt64=$.NearUInt64BE=$.NearUInt64=$.IntBE=$.Int=$.UIntBE=$.UInt=$.OffsetLayout=$.GreedyCount=$.ExternalLayout=$.bindConstructorLayout=$.nameWithProperty=$.Layout=$.uint8ArrayToBuffer=$.checkUint8Array=void 0;$.constant=$.utf8=$.cstr=$.blob=$.unionLayoutDiscriminator=$.union=$.seq=$.bits=$.struct=$.f64be=$.f64=$.f32be=$.f32=$.ns64be=$.s48be=$.s40be=$.s32be=$.s24be=$.s16be=$.ns64=$.s48=$.s40=$.s32=$.s24=void 0;var Od=mn();function Li(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}$.checkUint8Array=Li;function lt(t){return Li(t),Od.Buffer.from(t.buffer,t.byteOffset,t.length)}$.uint8ArrayToBuffer=lt;var dt=class{constructor(e,r){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=r}makeDestinationObject(){return{}}getSpan(e,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=e,r}fromArray(e){}};$.Layout=dt;function Nd(t,e){return e.property?t+"["+e.property+"]":t}$.nameWithProperty=Nd;function wA(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof dt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=(()=>new t),Object.defineProperty(t.prototype,"encode",{value(r,n){return e.encode(this,r,n)},writable:!0}),Object.defineProperty(t,"decode",{value(r,n){return e.decode(r,n)},writable:!0})}$.bindConstructorLayout=wA;var Nr=class extends dt{isCount(){throw new Error("ExternalLayout is abstract")}};$.ExternalLayout=Nr;var Nu=class extends Nr{constructor(e=1,r){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=e}isCount(){return!0}decode(e,r=0){Li(e);let n=e.length-r;return Math.floor(n/this.elementSpan)}encode(e,r,n){return 0}};$.GreedyCount=Nu;var ka=class extends Nr{constructor(e,r=0,n){if(!(e instanceof dt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=r}isCount(){return this.layout instanceof en||this.layout instanceof un}decode(e,r=0){return this.layout.decode(e,r+this.offset)}encode(e,r,n=0){return this.layout.encode(e,r,n+this.offset)}};$.OffsetLayout=ka;var en=class extends dt{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return lt(e).readUIntLE(r,this.span)}encode(e,r,n=0){return lt(r).writeUIntLE(e,n,this.span),this.span}};$.UInt=en;var un=class extends dt{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return lt(e).readUIntBE(r,this.span)}encode(e,r,n=0){return lt(r).writeUIntBE(e,n,this.span),this.span}};$.UIntBE=un;var hs=class extends dt{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return lt(e).readIntLE(r,this.span)}encode(e,r,n=0){return lt(r).writeIntLE(e,n,this.span),this.span}};$.Int=hs;var Qs=class extends dt{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return lt(e).readIntBE(r,this.span)}encode(e,r,n=0){return lt(r).writeIntBE(e,n,this.span),this.span}};$.IntBE=Qs;var Td=Math.pow(2,32);function ju(t){let e=Math.floor(t/Td),r=t-e*Td;return{hi32:e,lo32:r}}function Gu(t,e){return t*Td+e}var Bu=class extends dt{constructor(e){super(8,e)}decode(e,r=0){let n=lt(e),s=n.readUInt32LE(r),o=n.readUInt32LE(r+4);return Gu(o,s)}encode(e,r,n=0){let s=ju(e),o=lt(r);return o.writeUInt32LE(s.lo32,n),o.writeUInt32LE(s.hi32,n+4),8}};$.NearUInt64=Bu;var ku=class extends dt{constructor(e){super(8,e)}decode(e,r=0){let n=lt(e),s=n.readUInt32BE(r),o=n.readUInt32BE(r+4);return Gu(s,o)}encode(e,r,n=0){let s=ju(e),o=lt(r);return o.writeUInt32BE(s.hi32,n),o.writeUInt32BE(s.lo32,n+4),8}};$.NearUInt64BE=ku;var Pu=class extends dt{constructor(e){super(8,e)}decode(e,r=0){let n=lt(e),s=n.readUInt32LE(r),o=n.readInt32LE(r+4);return Gu(o,s)}encode(e,r,n=0){let s=ju(e),o=lt(r);return o.writeUInt32LE(s.lo32,n),o.writeInt32LE(s.hi32,n+4),8}};$.NearInt64=Pu;var Cu=class extends dt{constructor(e){super(8,e)}decode(e,r=0){let n=lt(e),s=n.readInt32BE(r),o=n.readUInt32BE(r+4);return Gu(s,o)}encode(e,r,n=0){let s=ju(e),o=lt(r);return o.writeInt32BE(s.hi32,n),o.writeUInt32BE(s.lo32,n+4),8}};$.NearInt64BE=Cu;var Lu=class extends dt{constructor(e){super(4,e)}decode(e,r=0){return lt(e).readFloatLE(r)}encode(e,r,n=0){return lt(r).writeFloatLE(e,n),4}};$.Float=Lu;var Du=class extends dt{constructor(e){super(4,e)}decode(e,r=0){return lt(e).readFloatBE(r)}encode(e,r,n=0){return lt(r).writeFloatBE(e,n),4}};$.FloatBE=Du;var Mu=class extends dt{constructor(e){super(8,e)}decode(e,r=0){return lt(e).readDoubleLE(r)}encode(e,r,n=0){return lt(r).writeDoubleLE(e,n),8}};$.Double=Mu;var Uu=class extends dt{constructor(e){super(8,e)}decode(e,r=0){return lt(e).readDoubleBE(r)}encode(e,r,n=0){return lt(r).writeDoubleBE(e,n),8}};$.DoubleBE=Uu;var zu=class extends dt{constructor(e,r,n){if(!(e instanceof dt))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof Nr&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(r instanceof Nr)&&0<e.span&&(s=r*e.span),super(s,n),this.elementLayout=e,this.count=r}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof Nr&&(s=s.decode(e,r)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let o=0;for(;o<s;)n+=this.elementLayout.getSpan(e,r+n),++o}return n}decode(e,r=0){let n=[],s=0,o=this.count;for(o instanceof Nr&&(o=o.decode(e,r));s<o;)n.push(this.elementLayout.decode(e,r)),r+=this.elementLayout.getSpan(e,r),s+=1;return n}encode(e,r,n=0){let s=this.elementLayout,o=e.reduce((i,a)=>i+s.encode(a,r,n+i),0);return this.count instanceof Nr&&this.count.encode(e.length,r,n),o}};$.Sequence=zu;var Fu=class extends dt{constructor(e,r,n){if(!(Array.isArray(e)&&e.reduce((o,i)=>o&&i instanceof dt,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(let o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((o,i)=>o+i.getSpan(),0)}catch{}super(s,r),this.fields=e,this.decodePrefixes=!!n}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,o)=>{let i=o.getSpan(e,r);return r+=i,s+i},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,r=0){Li(e);let n=this.makeDestinationObject();for(let s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(e,r)),r+=s.getSpan(e,r),this.decodePrefixes&&e.length===r)break;return n}encode(e,r,n=0){let s=n,o=0,i=0;for(let a of this.fields){let u=a.span;if(i=0<u?u:0,a.property!==void 0){let h=e[a.property];h!==void 0&&(i=a.encode(h,r,n),0>u&&(u=a.getSpan(r,n)))}o=n,n+=u}return o+i-s}fromArray(e){let r=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<e.length&&(r[n.property]=e.shift());return r}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===e)return r}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let r=0;for(let n of this.fields){if(n.property===e)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}};$.Structure=Fu;var Pa=class{constructor(e){this.property=e}decode(e,r){throw new Error("UnionDiscriminator is abstract")}encode(e,r,n){throw new Error("UnionDiscriminator is abstract")}};$.UnionDiscriminator=Pa;var Ci=class extends Pa{constructor(e,r){if(!(e instanceof Nr&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||e.property||"variant"),this.layout=e}decode(e,r){return this.layout.decode(e,r)}encode(e,r,n){return this.layout.encode(e,r,n)}};$.UnionLayoutDiscriminator=Ci;var Ca=class extends dt{constructor(e,r,n){let s;if(e instanceof en||e instanceof un)s=new Ci(new ka(e));else if(e instanceof Nr&&e.isCount())s=new Ci(e);else if(e instanceof Pa)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof dt))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let o=-1;r&&(o=r.span,0<=o&&(e instanceof en||e instanceof un)&&(o+=s.layout.span)),super(o,n),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof en||e instanceof un,this.defaultLayout=r,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return i(a)},this.configGetSourceVariant=function(a){i=a.bind(this)}}getSpan(e,r=0){if(0<=this.span)return this.span;let n=this.getVariant(e,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,r)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let r=this.registry[e[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(e,r.property)))return r}else for(let r in this.registry){let n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,r=0){let n,s=this.discriminator,o=s.decode(e,r),i=this.registry[o];if(i===void 0){let a=this.defaultLayout,u=0;this.usesPrefixDiscriminator&&(u=s.layout.span),n=this.makeDestinationObject(),n[s.property]=o,n[a.property]=a.decode(e,r+u)}else n=i.decode(e,r);return n}encode(e,r,n=0){let s=this.getSourceVariant(e);if(s===void 0){let o=this.discriminator,i=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=o.layout.span),o.encode(e[o.property],r,n),a+i.encode(e[i.property],r,n+a)}return s.encode(e,r,n)}addVariant(e,r,n){let s=new Ku(this,e,r,n);return this.registry[e]=s,s}getVariant(e,r=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,r):n=e,this.registry[n]}};$.Union=Ca;var Ku=class extends dt{constructor(e,r,n,s){if(!(e instanceof Ca))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof dt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=n?n.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,s),this.union=e,this.variant=r,this.layout=n||null}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,r+n)),n+s}decode(e,r=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(e,r))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,r+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,r,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let o=s;if(this.layout&&(this.layout.encode(e[this.property],r,n+s),o+=this.layout.getSpan(r,n+s),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};$.VariantLayout=Ku;function Pi(t){return 0>t&&(t+=4294967296),t}var La=class extends dt{constructor(e,r,n){if(!(e instanceof en||e instanceof un))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!r,this.fields=[];let s=0;this._packedSetValue=function(o){return s=Pi(o),this},this._packedGetValue=function(){return s}}decode(e,r=0){let n=this.makeDestinationObject(),s=this.word.decode(e,r);this._packedSetValue(s);for(let o of this.fields)o.property!==void 0&&(n[o.property]=o.decode(e));return n}encode(e,r,n=0){let s=this.word.decode(r,n);this._packedSetValue(s);for(let o of this.fields)if(o.property!==void 0){let i=e[o.property];i!==void 0&&o.encode(i)}return this.word.encode(this._packedGetValue(),r,n)}addField(e,r){let n=new Da(this,e,r);return this.fields.push(n),n}addBoolean(e){let r=new Vu(this,e);return this.fields.push(r),r}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===e)return r}};$.BitStructure=La;var Da=class{constructor(e,r,n){if(!(e instanceof La))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");let s=8*e.span,o=e.fields.reduce((i,a)=>i+a.bits,0);if(r+o>s)throw new Error("bits too long for span remainder ("+(s-o)+" of "+s+" remain)");this.container=e,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=s-o-r),this.wordMask=Pi(this.valueMask<<this.start),this.property=n}decode(e,r){let n=this.container._packedGetValue();return Pi(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Pi(e&this.valueMask))throw new TypeError(Nd("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let r=this.container._packedGetValue(),n=Pi(e<<this.start);this.container._packedSetValue(Pi(r&~this.wordMask)|n)}};$.BitField=Da;var Vu=class extends Da{constructor(e,r){super(e,1,r)}decode(e,r){return!!super.decode(e,r)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};$.Boolean=Vu;var Wu=class extends dt{constructor(e,r){if(!(e instanceof Nr&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Nr||(n=e),super(n,r),this.length=e}getSpan(e,r){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),n}decode(e,r=0){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),lt(e).slice(r,r+n)}encode(e,r,n){let s=this.length;if(this.length instanceof Nr&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(Nd("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>r.length)throw new RangeError("encoding overruns Uint8Array");let o=lt(e);return lt(r).write(o.toString("hex"),n,s,"hex"),this.length instanceof Nr&&this.length.encode(s,r,n),s}};$.Blob=Wu;var Hu=class extends dt{constructor(e){super(-1,e)}getSpan(e,r=0){Li(e);let n=r;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-r}decode(e,r=0){let n=this.getSpan(e,r);return lt(e).slice(r,r+n-1).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));let s=Od.Buffer.from(e,"utf8"),o=s.length;if(n+o>r.length)throw new RangeError("encoding overruns Buffer");let i=lt(r);return s.copy(i,n),i[n+o]=0,o+1}};$.CString=Hu;var qu=class extends dt{constructor(e,r){if(typeof e=="string"&&r===void 0&&(r=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=e}getSpan(e,r=0){return Li(e),e.length-r}decode(e,r=0){let n=this.getSpan(e,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return lt(e).slice(r,r+n).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));let s=Od.Buffer.from(e,"utf8"),o=s.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>r.length)throw new RangeError("encoding overruns Buffer");return s.copy(lt(r),n),o}};$.UTF8=qu;var $u=class extends dt{constructor(e,r){super(0,r),this.value=e}decode(e,r){return this.value}encode(e,r,n){return 0}};$.Constant=$u;$.greedy=((t,e)=>new Nu(t,e));$.offset=((t,e,r)=>new ka(t,e,r));$.u8=(t=>new en(1,t));$.u16=(t=>new en(2,t));$.u24=(t=>new en(3,t));$.u32=(t=>new en(4,t));$.u40=(t=>new en(5,t));$.u48=(t=>new en(6,t));$.nu64=(t=>new Bu(t));$.u16be=(t=>new un(2,t));$.u24be=(t=>new un(3,t));$.u32be=(t=>new un(4,t));$.u40be=(t=>new un(5,t));$.u48be=(t=>new un(6,t));$.nu64be=(t=>new ku(t));$.s8=(t=>new hs(1,t));$.s16=(t=>new hs(2,t));$.s24=(t=>new hs(3,t));$.s32=(t=>new hs(4,t));$.s40=(t=>new hs(5,t));$.s48=(t=>new hs(6,t));$.ns64=(t=>new Pu(t));$.s16be=(t=>new Qs(2,t));$.s24be=(t=>new Qs(3,t));$.s32be=(t=>new Qs(4,t));$.s40be=(t=>new Qs(5,t));$.s48be=(t=>new Qs(6,t));$.ns64be=(t=>new Cu(t));$.f32=(t=>new Lu(t));$.f32be=(t=>new Du(t));$.f64=(t=>new Mu(t));$.f64be=(t=>new Uu(t));$.struct=((t,e,r)=>new Fu(t,e,r));$.bits=((t,e,r)=>new La(t,e,r));$.seq=((t,e,r)=>new zu(t,e,r));$.union=((t,e,r)=>new Ca(t,e,r));$.unionLayoutDiscriminator=((t,e)=>new Ci(t,e));$.blob=((t,e)=>new Wu(t,e));$.cstr=(t=>new Hu(t));$.utf8=((t,e)=>new qu(t,e));$.constant=((t,e)=>new $u(t,e))});function za(){if(!Xu&&(Xu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Xu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xu(SA)}var Xu,SA,Ld=Mr(()=>{SA=new Uint8Array(16)});var $m,jm=Mr(()=>{$m=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function IA(t){return typeof t=="string"&&$m.test(t)}var eo,Fa=Mr(()=>{jm();eo=IA});function vA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(xr[t[e+0]]+xr[t[e+1]]+xr[t[e+2]]+xr[t[e+3]]+"-"+xr[t[e+4]]+xr[t[e+5]]+"-"+xr[t[e+6]]+xr[t[e+7]]+"-"+xr[t[e+8]]+xr[t[e+9]]+"-"+xr[t[e+10]]+xr[t[e+11]]+xr[t[e+12]]+xr[t[e+13]]+xr[t[e+14]]+xr[t[e+15]]).toLowerCase();if(!eo(r))throw TypeError("Stringified UUID is invalid");return r}var xr,Qu,to,Ka=Mr(()=>{Fa();xr=[];for(Qu=0;Qu<256;++Qu)xr.push((Qu+256).toString(16).substr(1));to=vA});function AA(t,e,r){var n=e&&r||0,s=e||new Array(16);t=t||{};var o=t.node||Gm,i=t.clockseq!==void 0?t.clockseq:Dd;if(o==null||i==null){var a=t.random||(t.rng||za)();o==null&&(o=Gm=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),i==null&&(i=Dd=(a[6]<<8|a[7])&16383)}var u=t.msecs!==void 0?t.msecs:Date.now(),h=t.nsecs!==void 0?t.nsecs:Ud+1,m=u-Md+(h-Ud)/1e4;if(m<0&&t.clockseq===void 0&&(i=i+1&16383),(m<0||u>Md)&&t.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Md=u,Ud=h,Dd=i,u+=122192928e5;var y=((u&268435455)*1e4+h)%4294967296;s[n++]=y>>>24&255,s[n++]=y>>>16&255,s[n++]=y>>>8&255,s[n++]=y&255;var O=u/4294967296*1e4&268435455;s[n++]=O>>>8&255,s[n++]=O&255,s[n++]=O>>>24&15|16,s[n++]=O>>>16&255,s[n++]=i>>>8|128,s[n++]=i&255;for(var S=0;S<6;++S)s[n+S]=o[S];return e||to(s)}var Gm,Dd,Md,Ud,Ym,Jm=Mr(()=>{Ld();Ka();Md=0,Ud=0;Ym=AA});function TA(t){if(!eo(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var el,zd=Mr(()=>{Fa();el=TA});function OA(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function tl(t,e,r){function n(s,o,i,a){if(typeof s=="string"&&(s=OA(s)),typeof o=="string"&&(o=el(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(o),u.set(s,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,i){a=a||0;for(var h=0;h<16;++h)i[a+h]=u[h];return i}return to(u)}try{n.name=t}catch{}return n.DNS=NA,n.URL=BA,n}var NA,BA,Fd=Mr(()=>{Ka();zd();NA="6ba7b810-9dad-11d1-80b4-00c04fd430c8",BA="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function kA(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return PA(CA(LA(t),t.length*8))}function PA(t){for(var e=[],r=t.length*32,n="0123456789abcdef",s=0;s<r;s+=8){var o=t[s>>5]>>>s%32&255,i=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);e.push(i)}return e}function Zm(t){return(t+64>>>9<<4)+14+1}function CA(t,e){t[e>>5]|=128<<e%32,t[Zm(e)-1]=e;for(var r=1732584193,n=-271733879,s=-1732584194,o=271733878,i=0;i<t.length;i+=16){var a=r,u=n,h=s,m=o;r=kr(r,n,s,o,t[i],7,-680876936),o=kr(o,r,n,s,t[i+1],12,-389564586),s=kr(s,o,r,n,t[i+2],17,606105819),n=kr(n,s,o,r,t[i+3],22,-1044525330),r=kr(r,n,s,o,t[i+4],7,-176418897),o=kr(o,r,n,s,t[i+5],12,1200080426),s=kr(s,o,r,n,t[i+6],17,-1473231341),n=kr(n,s,o,r,t[i+7],22,-45705983),r=kr(r,n,s,o,t[i+8],7,1770035416),o=kr(o,r,n,s,t[i+9],12,-1958414417),s=kr(s,o,r,n,t[i+10],17,-42063),n=kr(n,s,o,r,t[i+11],22,-1990404162),r=kr(r,n,s,o,t[i+12],7,1804603682),o=kr(o,r,n,s,t[i+13],12,-40341101),s=kr(s,o,r,n,t[i+14],17,-1502002290),n=kr(n,s,o,r,t[i+15],22,1236535329),r=Pr(r,n,s,o,t[i+1],5,-165796510),o=Pr(o,r,n,s,t[i+6],9,-1069501632),s=Pr(s,o,r,n,t[i+11],14,643717713),n=Pr(n,s,o,r,t[i],20,-373897302),r=Pr(r,n,s,o,t[i+5],5,-701558691),o=Pr(o,r,n,s,t[i+10],9,38016083),s=Pr(s,o,r,n,t[i+15],14,-660478335),n=Pr(n,s,o,r,t[i+4],20,-405537848),r=Pr(r,n,s,o,t[i+9],5,568446438),o=Pr(o,r,n,s,t[i+14],9,-1019803690),s=Pr(s,o,r,n,t[i+3],14,-187363961),n=Pr(n,s,o,r,t[i+8],20,1163531501),r=Pr(r,n,s,o,t[i+13],5,-1444681467),o=Pr(o,r,n,s,t[i+2],9,-51403784),s=Pr(s,o,r,n,t[i+7],14,1735328473),n=Pr(n,s,o,r,t[i+12],20,-1926607734),r=Cr(r,n,s,o,t[i+5],4,-378558),o=Cr(o,r,n,s,t[i+8],11,-2022574463),s=Cr(s,o,r,n,t[i+11],16,1839030562),n=Cr(n,s,o,r,t[i+14],23,-35309556),r=Cr(r,n,s,o,t[i+1],4,-1530992060),o=Cr(o,r,n,s,t[i+4],11,1272893353),s=Cr(s,o,r,n,t[i+7],16,-155497632),n=Cr(n,s,o,r,t[i+10],23,-1094730640),r=Cr(r,n,s,o,t[i+13],4,681279174),o=Cr(o,r,n,s,t[i],11,-358537222),s=Cr(s,o,r,n,t[i+3],16,-722521979),n=Cr(n,s,o,r,t[i+6],23,76029189),r=Cr(r,n,s,o,t[i+9],4,-640364487),o=Cr(o,r,n,s,t[i+12],11,-421815835),s=Cr(s,o,r,n,t[i+15],16,530742520),n=Cr(n,s,o,r,t[i+2],23,-995338651),r=Lr(r,n,s,o,t[i],6,-198630844),o=Lr(o,r,n,s,t[i+7],10,1126891415),s=Lr(s,o,r,n,t[i+14],15,-1416354905),n=Lr(n,s,o,r,t[i+5],21,-57434055),r=Lr(r,n,s,o,t[i+12],6,1700485571),o=Lr(o,r,n,s,t[i+3],10,-1894986606),s=Lr(s,o,r,n,t[i+10],15,-1051523),n=Lr(n,s,o,r,t[i+1],21,-2054922799),r=Lr(r,n,s,o,t[i+8],6,1873313359),o=Lr(o,r,n,s,t[i+15],10,-30611744),s=Lr(s,o,r,n,t[i+6],15,-1560198380),n=Lr(n,s,o,r,t[i+13],21,1309151649),r=Lr(r,n,s,o,t[i+4],6,-145523070),o=Lr(o,r,n,s,t[i+11],10,-1120210379),s=Lr(s,o,r,n,t[i+2],15,718787259),n=Lr(n,s,o,r,t[i+9],21,-343485551),r=ro(r,a),n=ro(n,u),s=ro(s,h),o=ro(o,m)}return[r,n,s,o]}function LA(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(Zm(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function ro(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function DA(t,e){return t<<e|t>>>32-e}function rl(t,e,r,n,s,o){return ro(DA(ro(ro(e,t),ro(n,o)),s),r)}function kr(t,e,r,n,s,o,i){return rl(e&r|~e&n,t,e,s,o,i)}function Pr(t,e,r,n,s,o,i){return rl(e&n|r&~n,t,e,s,o,i)}function Cr(t,e,r,n,s,o,i){return rl(e^r^n,t,e,s,o,i)}function Lr(t,e,r,n,s,o,i){return rl(r^(e|~n),t,e,s,o,i)}var Xm,Qm=Mr(()=>{Xm=kA});var MA,ey,ty=Mr(()=>{Fd();Qm();MA=tl("v3",48,Xm),ey=MA});function UA(t,e,r){t=t||{};var n=t.random||(t.rng||za)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return to(n)}var ry,ny=Mr(()=>{Ld();Ka();ry=UA});function zA(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function Kd(t,e){return t<<e|t>>>32-e}function FA(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var s=0;s<n.length;++s)t.push(n.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,i=Math.ceil(o/16),a=new Array(i),u=0;u<i;++u){for(var h=new Uint32Array(16),m=0;m<16;++m)h[m]=t[u*64+m*4]<<24|t[u*64+m*4+1]<<16|t[u*64+m*4+2]<<8|t[u*64+m*4+3];a[u]=h}a[i-1][14]=(t.length-1)*8/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=(t.length-1)*8&4294967295;for(var y=0;y<i;++y){for(var O=new Uint32Array(80),S=0;S<16;++S)O[S]=a[y][S];for(var R=16;R<80;++R)O[R]=Kd(O[R-3]^O[R-8]^O[R-14]^O[R-16],1);for(var A=r[0],I=r[1],k=r[2],z=r[3],M=r[4],K=0;K<80;++K){var Z=Math.floor(K/20),V=Kd(A,5)+zA(Z,I,k,z)+M+e[Z]+O[K]>>>0;M=z,z=k,k=Kd(I,30)>>>0,I=A,A=V}r[0]=r[0]+A>>>0,r[1]=r[1]+I>>>0,r[2]=r[2]+k>>>0,r[3]=r[3]+z>>>0,r[4]=r[4]+M>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var sy,oy=Mr(()=>{sy=FA});var KA,iy,ay=Mr(()=>{Fd();oy();KA=tl("v5",80,sy),iy=KA});var cy,uy=Mr(()=>{cy="00000000-0000-0000-0000-000000000000"});function VA(t){if(!eo(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var ly,fy=Mr(()=>{Fa();ly=VA});var Vd={};wl(Vd,{NIL:()=>cy,parse:()=>el,stringify:()=>to,v1:()=>Ym,v3:()=>ey,v4:()=>ry,v5:()=>iy,validate:()=>eo,version:()=>ly});var Wd=Mr(()=>{Jm();ty();ny();ay();uy();fy();Fa();Ka();zd()});var hy=cr((t5,dy)=>{"use strict";var WA=(Wd(),Dh(Vd)).v4,HA=function(t,e,r,n){if(typeof t!="string")throw new TypeError(t+" must be a string");n=n||{};let s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");let o={method:t};if(s===2&&(o.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(typeof r>"u"){let i=typeof n.generator=="function"?n.generator:function(){return WA()};o.id=i(o,n)}else s===2&&r===null?n.notificationIdNull&&(o.id=null):o.id=r;return o};dy.exports=HA});var gy=cr((r5,py)=>{"use strict";var qA=(Wd(),Dh(Vd)).v4,$A=hy(),Va=function(t,e){if(!(this instanceof Va))return new Va(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return qA()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};py.exports=Va;Va.prototype.request=function(t,e,r,n){let s=this,o=null,i=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&i)throw new TypeError("JSON-RPC 1.0 does not support batching");if(i||!i&&t&&typeof t=="object"&&typeof e=="function")n=e,o=t;else{typeof r=="function"&&(n=r,r=void 0);let h=typeof n=="function";try{o=$A(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(m){if(h){n(m);return}throw m}if(!h)return o}let u;try{u=JSON.stringify(o,this.options.replacer)}catch(h){n(h);return}return this.callServer(u,function(h,m){s._parseResponse(h,m,n)}),o};Va.prototype._parseResponse=function(t,e,r){if(t){r(t);return}if(!e){r();return}let n;try{n=JSON.parse(e,this.options.reviver)}catch(s){r(s);return}if(r.length===3)if(Array.isArray(n)){let s=function(i){return typeof i.error<"u"},o=function(i){return!s(i)};r(null,n.filter(s),n.filter(o));return}else{r(null,n.error,n.result);return}r(null,n)}});function Ji(t,e){return function(){return t.apply(e,arguments)}}var{toString:Iw}=Object.prototype,{getPrototypeOf:_l}=Object,{iterator:tc,toStringTag:Uh}=Symbol,rc=(t=>e=>{let r=Iw.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),An=t=>(t=t.toLowerCase(),e=>rc(e)===t),nc=t=>e=>typeof e===t,{isArray:qo}=Array,Ho=nc("undefined");function Zi(t){return t!==null&&!Ho(t)&&t.constructor!==null&&!Ho(t.constructor)&&Gr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var zh=An("ArrayBuffer");function vw(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&zh(t.buffer),e}var Aw=nc("string"),Gr=nc("function"),Fh=nc("number"),Xi=t=>t!==null&&typeof t=="object",Tw=t=>t===!0||t===!1,ec=t=>{if(rc(t)!=="object")return!1;let e=_l(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Uh in t)&&!(tc in t)},Ow=t=>{if(!Xi(t)||Zi(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Nw=An("Date"),Bw=An("File"),kw=An("Blob"),Pw=An("FileList"),Cw=t=>Xi(t)&&Gr(t.pipe),Lw=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Gr(t.append)&&((e=rc(t))==="formdata"||e==="object"&&Gr(t.toString)&&t.toString()==="[object FormData]"))},Dw=An("URLSearchParams"),[Mw,Uw,zw,Fw]=["ReadableStream","Request","Response","Headers"].map(An),Kw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qi(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),qo(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{if(Zi(t))return;let o=r?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length,a;for(n=0;n<i;n++)a=o[n],e.call(null,t[a],a,t)}}function Kh(t,e){if(Zi(t))return null;e=e.toLowerCase();let r=Object.keys(t),n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}var ao=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Vh=t=>!Ho(t)&&t!==ao;function bl(){let{caseless:t,skipUndefined:e}=Vh(this)&&this||{},r={},n=(s,o)=>{if(o==="__proto__"||o==="constructor"||o==="prototype")return;let i=t&&Kh(r,o)||o;ec(r[i])&&ec(s)?r[i]=bl(r[i],s):ec(s)?r[i]=bl({},s):qo(s)?r[i]=s.slice():(!e||!Ho(s))&&(r[i]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&Qi(arguments[s],n);return r}var Vw=(t,e,r,{allOwnKeys:n}={})=>(Qi(e,(s,o)=>{r&&Gr(s)?Object.defineProperty(t,o,{value:Ji(s,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,o,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),t),Ww=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Hw=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},qw=(t,e,r,n)=>{let s,o,i,a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!n||n(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=r!==!1&&_l(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},$w=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},jw=t=>{if(!t)return null;if(qo(t))return t;let e=t.length;if(!Fh(e))return null;let r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Gw=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&_l(Uint8Array)),Yw=(t,e)=>{let n=(t&&t[tc]).call(t),s;for(;(s=n.next())&&!s.done;){let o=s.value;e.call(t,o[0],o[1])}},Jw=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Zw=An("HTMLFormElement"),Xw=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Mh=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Qw=An("RegExp"),Wh=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};Qi(r,(s,o)=>{let i;(i=e(s,o,t))!==!1&&(n[o]=i||s)}),Object.defineProperties(t,n)},eE=t=>{Wh(t,(e,r)=>{if(Gr(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(Gr(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},tE=(t,e)=>{let r={},n=s=>{s.forEach(o=>{r[o]=!0})};return qo(t)?n(t):n(String(t).split(e)),r},rE=()=>{},nE=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function sE(t){return!!(t&&Gr(t.append)&&t[Uh]==="FormData"&&t[tc])}var oE=t=>{let e=new Array(10),r=(n,s)=>{if(Xi(n)){if(e.indexOf(n)>=0)return;if(Zi(n))return n;if(!("toJSON"in n)){e[s]=n;let o=qo(n)?[]:{};return Qi(n,(i,a)=>{let u=r(i,s+1);!Ho(u)&&(o[a]=u)}),e[s]=void 0,o}}return n};return r(t,0)},iE=An("AsyncFunction"),aE=t=>t&&(Xi(t)||Gr(t))&&Gr(t.then)&&Gr(t.catch),Hh=((t,e)=>t?setImmediate:e?((r,n)=>(ao.addEventListener("message",({source:s,data:o})=>{s===ao&&o===r&&n.length&&n.shift()()},!1),s=>{n.push(s),ao.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Gr(ao.postMessage)),cE=typeof queueMicrotask<"u"?queueMicrotask.bind(ao):typeof process<"u"&&process.nextTick||Hh,uE=t=>t!=null&&Gr(t[tc]),H={isArray:qo,isArrayBuffer:zh,isBuffer:Zi,isFormData:Lw,isArrayBufferView:vw,isString:Aw,isNumber:Fh,isBoolean:Tw,isObject:Xi,isPlainObject:ec,isEmptyObject:Ow,isReadableStream:Mw,isRequest:Uw,isResponse:zw,isHeaders:Fw,isUndefined:Ho,isDate:Nw,isFile:Bw,isBlob:kw,isRegExp:Qw,isFunction:Gr,isStream:Cw,isURLSearchParams:Dw,isTypedArray:Gw,isFileList:Pw,forEach:Qi,merge:bl,extend:Vw,trim:Kw,stripBOM:Ww,inherits:Hw,toFlatObject:qw,kindOf:rc,kindOfTest:An,endsWith:$w,toArray:jw,forEachEntry:Yw,matchAll:Jw,isHTMLForm:Zw,hasOwnProperty:Mh,hasOwnProp:Mh,reduceDescriptors:Wh,freezeMethods:eE,toObjectSet:tE,toCamelCase:Xw,noop:rE,toFiniteNumber:nE,findKey:Kh,global:ao,isContextDefined:Vh,isSpecCompliantForm:sE,toJSONObject:oE,isAsyncFn:iE,isThenable:aE,setImmediate:Hh,asap:cE,isIterable:uE};var Ur=class t extends Error{static from(e,r,n,s,o,i){let a=new t(e.message,r||e.code,n,s,o);return a.cause=e,a.name=e.name,i&&Object.assign(a,i),a}constructor(e,r,n,s,o){super(e),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}};Ur.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Ur.ERR_BAD_OPTION="ERR_BAD_OPTION";Ur.ECONNABORTED="ECONNABORTED";Ur.ETIMEDOUT="ETIMEDOUT";Ur.ERR_NETWORK="ERR_NETWORK";Ur.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Ur.ERR_DEPRECATED="ERR_DEPRECATED";Ur.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Ur.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Ur.ERR_CANCELED="ERR_CANCELED";Ur.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Ur.ERR_INVALID_URL="ERR_INVALID_URL";var We=Ur;var sc=null;function xl(t){return H.isPlainObject(t)||H.isArray(t)}function $h(t){return H.endsWith(t,"[]")?t.slice(0,-2):t}function qh(t,e,r){return t?t.concat(e).map(function(s,o){return s=$h(s),!r&&o?"["+s+"]":s}).join(r?".":""):e}function lE(t){return H.isArray(t)&&!t.some(xl)}var fE=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function dE(t,e,r){if(!H.isObject(t))throw new TypeError("target must be an object");e=e||new(sc||FormData),r=H.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,I){return!H.isUndefined(I[A])});let n=r.metaTokens,s=r.visitor||m,o=r.dots,i=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(s))throw new TypeError("visitor must be a function");function h(R){if(R===null)return"";if(H.isDate(R))return R.toISOString();if(H.isBoolean(R))return R.toString();if(!u&&H.isBlob(R))throw new We("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(R)||H.isTypedArray(R)?u&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function m(R,A,I){let k=R;if(R&&!I&&typeof R=="object"){if(H.endsWith(A,"{}"))A=n?A:A.slice(0,-2),R=JSON.stringify(R);else if(H.isArray(R)&&lE(R)||(H.isFileList(R)||H.endsWith(A,"[]"))&&(k=H.toArray(R)))return A=$h(A),k.forEach(function(M,K){!(H.isUndefined(M)||M===null)&&e.append(i===!0?qh([A],K,o):i===null?A:A+"[]",h(M))}),!1}return xl(R)?!0:(e.append(qh(I,A,o),h(R)),!1)}let y=[],O=Object.assign(fE,{defaultVisitor:m,convertValue:h,isVisitable:xl});function S(R,A){if(!H.isUndefined(R)){if(y.indexOf(R)!==-1)throw Error("Circular reference detected in "+A.join("."));y.push(R),H.forEach(R,function(k,z){(!(H.isUndefined(k)||k===null)&&s.call(e,k,H.isString(z)?z.trim():z,A,O))===!0&&S(k,A?A.concat(z):[z])}),y.pop()}}if(!H.isObject(t))throw new TypeError("data must be an object");return S(t),e}var bs=dE;function jh(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Gh(t,e){this._pairs=[],t&&bs(t,this,e)}var Yh=Gh.prototype;Yh.append=function(e,r){this._pairs.push([e,r])};Yh.toString=function(e){let r=e?function(n){return e.call(this,n,jh)}:jh;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};var oc=Gh;function hE(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ea(t,e,r){if(!e)return t;let n=r&&r.encode||hE,s=H.isFunction(r)?{serialize:r}:r,o=s&&s.serialize,i;if(o?i=o(e,s):i=H.isURLSearchParams(e)?e.toString():new oc(e,s).toString(n),i){let a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}var Rl=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(n){n!==null&&e(n)})}},Sl=Rl;var $o={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0};var Jh=typeof URLSearchParams<"u"?URLSearchParams:oc;var Zh=typeof FormData<"u"?FormData:null;var Xh=typeof Blob<"u"?Blob:null;var Qh={isBrowser:!0,classes:{URLSearchParams:Jh,FormData:Zh,Blob:Xh},protocols:["http","https","file","blob","url","data"]};var Al={};wl(Al,{hasBrowserEnv:()=>vl,hasStandardBrowserEnv:()=>pE,hasStandardBrowserWebWorkerEnv:()=>gE,navigator:()=>Il,origin:()=>mE});var vl=typeof window<"u"&&typeof document<"u",Il=typeof navigator=="object"&&navigator||void 0,pE=vl&&(!Il||["ReactNative","NativeScript","NS"].indexOf(Il.product)<0),gE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mE=vl&&window.location.href||"http://localhost";var Gt={...Al,...Qh};function Tl(t,e){return bs(t,new Gt.classes.URLSearchParams,{visitor:function(r,n,s,o){return Gt.isNode&&H.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function yE(t){return H.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function wE(t){let e={},r=Object.keys(t),n,s=r.length,o;for(n=0;n<s;n++)o=r[n],e[o]=t[o];return e}function EE(t){function e(r,n,s,o){let i=r[o++];if(i==="__proto__")return!0;let a=Number.isFinite(+i),u=o>=r.length;return i=!i&&H.isArray(s)?s.length:i,u?(H.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!a):((!s[i]||!H.isObject(s[i]))&&(s[i]=[]),e(r,n,s[i],o)&&H.isArray(s[i])&&(s[i]=wE(s[i])),!a)}if(H.isFormData(t)&&H.isFunction(t.entries)){let r={};return H.forEachEntry(t,(n,s)=>{e(yE(n),s,r,0)}),r}return null}var ic=EE;function bE(t,e,r){if(H.isString(t))try{return(e||JSON.parse)(t),H.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Ol={transitional:$o,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){let n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=H.isObject(e);if(o&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return s?JSON.stringify(ic(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Tl(e,this.formSerializer).toString();if((a=H.isFileList(e))||n.indexOf("multipart/form-data")>-1){let u=this.env&&this.env.FormData;return bs(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),bE(e)):e}],transformResponse:[function(e){let r=this.transitional||Ol.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(n&&!this.responseType||s)){let i=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(i)throw a.name==="SyntaxError"?We.from(a,We.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],t=>{Ol.headers[t]={}});var jo=Ol;var _E=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),e0=t=>{let e={},r,n,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),r=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!r||e[r]&&_E[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e};var t0=Symbol("internals");function ta(t){return t&&String(t).trim().toLowerCase()}function ac(t){return t===!1||t==null?t:H.isArray(t)?t.map(ac):String(t)}function xE(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}var RE=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Nl(t,e,r,n,s){if(H.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!H.isString(e)){if(H.isString(n))return e.indexOf(n)!==-1;if(H.isRegExp(n))return n.test(e)}}function SE(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function IE(t,e){let r=H.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,o,i){return this[n].call(this,e,s,o,i)},configurable:!0})})}var Go=class{constructor(e){e&&this.set(e)}set(e,r,n){let s=this;function o(a,u,h){let m=ta(u);if(!m)throw new Error("header name must be a non-empty string");let y=H.findKey(s,m);(!y||s[y]===void 0||h===!0||h===void 0&&s[y]!==!1)&&(s[y||u]=ac(a))}let i=(a,u)=>H.forEach(a,(h,m)=>o(h,m,u));if(H.isPlainObject(e)||e instanceof this.constructor)i(e,r);else if(H.isString(e)&&(e=e.trim())&&!RE(e))i(e0(e),r);else if(H.isObject(e)&&H.isIterable(e)){let a={},u,h;for(let m of e){if(!H.isArray(m))throw TypeError("Object iterator must return a key-value pair");a[h=m[0]]=(u=a[h])?H.isArray(u)?[...u,m[1]]:[u,m[1]]:m[1]}i(a,r)}else e!=null&&o(r,e,n);return this}get(e,r){if(e=ta(e),e){let n=H.findKey(this,e);if(n){let s=this[n];if(!r)return s;if(r===!0)return xE(s);if(H.isFunction(r))return r.call(this,s,n);if(H.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ta(e),e){let n=H.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Nl(this,this[n],n,r)))}return!1}delete(e,r){let n=this,s=!1;function o(i){if(i=ta(i),i){let a=H.findKey(n,i);a&&(!r||Nl(n,n[a],a,r))&&(delete n[a],s=!0)}}return H.isArray(e)?e.forEach(o):o(e),s}clear(e){let r=Object.keys(this),n=r.length,s=!1;for(;n--;){let o=r[n];(!e||Nl(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){let r=this,n={};return H.forEach(this,(s,o)=>{let i=H.findKey(n,o);if(i){r[i]=ac(s),delete r[o];return}let a=e?SE(o):String(o).trim();a!==o&&delete r[o],r[a]=ac(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return H.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&H.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){let n=(this[t0]=this[t0]={accessors:{}}).accessors,s=this.prototype;function o(i){let a=ta(i);n[a]||(IE(s,i),n[a]=!0)}return H.isArray(e)?e.forEach(o):o(e),this}};Go.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(Go.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});H.freezeMethods(Go);var dr=Go;function ra(t,e){let r=this||jo,n=e||r,s=dr.from(n.headers),o=n.data;return H.forEach(t,function(a){o=a.call(r,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function na(t){return!!(t&&t.__CANCEL__)}var Bl=class extends We{constructor(e,r,n){super(e??"canceled",We.ERR_CANCELED,r,n),this.name="CanceledError",this.__CANCEL__=!0}},Dn=Bl;function sa(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new We("Request failed with status code "+r.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function kl(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function vE(t,e){t=t||10;let r=new Array(t),n=new Array(t),s=0,o=0,i;return e=e!==void 0?e:1e3,function(u){let h=Date.now(),m=n[o];i||(i=h),r[s]=u,n[s]=h;let y=o,O=0;for(;y!==s;)O+=r[y++],y=y%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),h-i<e)return;let S=m&&h-m;return S?Math.round(O*1e3/S):void 0}}var r0=vE;function AE(t,e){let r=0,n=1e3/e,s,o,i=(h,m=Date.now())=>{r=m,s=null,o&&(clearTimeout(o),o=null),t(...h)};return[(...h)=>{let m=Date.now(),y=m-r;y>=n?i(h,m):(s=h,o||(o=setTimeout(()=>{o=null,i(s)},n-y)))},()=>s&&i(s)]}var n0=AE;var Yo=(t,e,r=3)=>{let n=0,s=r0(50,250);return n0(o=>{let i=o.loaded,a=o.lengthComputable?o.total:void 0,u=i-n,h=s(u),m=i<=a;n=i;let y={loaded:i,total:a,progress:a?i/a:void 0,bytes:u,rate:h||void 0,estimated:h&&a&&m?(a-i)/h:void 0,event:o,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(y)},r)},Pl=(t,e)=>{let r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},Cl=t=>(...e)=>H.asap(()=>t(...e));var s0=Gt.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Gt.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0;var o0=Gt.hasStandardBrowserEnv?{write(t,e,r,n,s,o,i){if(typeof document>"u")return;let a=[`${t}=${encodeURIComponent(e)}`];H.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),H.isString(n)&&a.push(`path=${n}`),H.isString(s)&&a.push(`domain=${s}`),o===!0&&a.push("secure"),H.isString(i)&&a.push(`SameSite=${i}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;let e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ll(t){return typeof t!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Dl(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function oa(t,e,r){let n=!Ll(e);return t&&(n||r==!1)?Dl(t,e):e}var i0=t=>t instanceof dr?{...t}:t;function Tn(t,e){e=e||{};let r={};function n(h,m,y,O){return H.isPlainObject(h)&&H.isPlainObject(m)?H.merge.call({caseless:O},h,m):H.isPlainObject(m)?H.merge({},m):H.isArray(m)?m.slice():m}function s(h,m,y,O){if(H.isUndefined(m)){if(!H.isUndefined(h))return n(void 0,h,y,O)}else return n(h,m,y,O)}function o(h,m){if(!H.isUndefined(m))return n(void 0,m)}function i(h,m){if(H.isUndefined(m)){if(!H.isUndefined(h))return n(void 0,h)}else return n(void 0,m)}function a(h,m,y){if(y in e)return n(h,m);if(y in t)return n(void 0,h)}let u={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(h,m,y)=>s(i0(h),i0(m),y,!0)};return H.forEach(Object.keys({...t,...e}),function(m){if(m==="__proto__"||m==="constructor"||m==="prototype")return;let y=H.hasOwnProp(u,m)?u[m]:s,O=y(t[m],e[m],m);H.isUndefined(O)&&y!==a||(r[m]=O)}),r}var cc=t=>{let e=Tn({},t),{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:a}=e;if(e.headers=i=dr.from(i),e.url=ea(oa(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),H.isFormData(r)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(H.isFunction(r.getHeaders)){let u=r.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([m,y])=>{h.includes(m.toLowerCase())&&i.set(m,y)})}}if(Gt.hasStandardBrowserEnv&&(n&&H.isFunction(n)&&(n=n(e)),n||n!==!1&&s0(e.url))){let u=s&&o&&o0.read(o);u&&i.set(s,u)}return e};var TE=typeof XMLHttpRequest<"u",a0=TE&&function(t){return new Promise(function(r,n){let s=cc(t),o=s.data,i=dr.from(s.headers).normalize(),{responseType:a,onUploadProgress:u,onDownloadProgress:h}=s,m,y,O,S,R;function A(){S&&S(),R&&R(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let I=new XMLHttpRequest;I.open(s.method.toUpperCase(),s.url,!0),I.timeout=s.timeout;function k(){if(!I)return;let M=dr.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),Z={data:!a||a==="text"||a==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:M,config:t,request:I};sa(function(Y){r(Y),A()},function(Y){n(Y),A()},Z),I=null}"onloadend"in I?I.onloadend=k:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(k)},I.onabort=function(){I&&(n(new We("Request aborted",We.ECONNABORTED,t,I)),I=null)},I.onerror=function(K){let Z=K&&K.message?K.message:"Network Error",V=new We(Z,We.ERR_NETWORK,t,I);V.event=K||null,n(V),I=null},I.ontimeout=function(){let K=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded",Z=s.transitional||$o;s.timeoutErrorMessage&&(K=s.timeoutErrorMessage),n(new We(K,Z.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,t,I)),I=null},o===void 0&&i.setContentType(null),"setRequestHeader"in I&&H.forEach(i.toJSON(),function(K,Z){I.setRequestHeader(Z,K)}),H.isUndefined(s.withCredentials)||(I.withCredentials=!!s.withCredentials),a&&a!=="json"&&(I.responseType=s.responseType),h&&([O,R]=Yo(h,!0),I.addEventListener("progress",O)),u&&I.upload&&([y,S]=Yo(u),I.upload.addEventListener("progress",y),I.upload.addEventListener("loadend",S)),(s.cancelToken||s.signal)&&(m=M=>{I&&(n(!M||M.type?new Dn(null,t,I):M),I.abort(),I=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));let z=kl(s.url);if(z&&Gt.protocols.indexOf(z)===-1){n(new We("Unsupported protocol "+z+":",We.ERR_BAD_REQUEST,t));return}I.send(o||null)})};var OE=(t,e)=>{let{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s,o=function(h){if(!s){s=!0,a();let m=h instanceof Error?h:this.reason;n.abort(m instanceof We?m:new Dn(m instanceof Error?m.message:m))}},i=e&&setTimeout(()=>{i=null,o(new We(`timeout of ${e}ms exceeded`,We.ETIMEDOUT))},e),a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),t=null)};t.forEach(h=>h.addEventListener("abort",o));let{signal:u}=n;return u.unsubscribe=()=>H.asap(a),u}},c0=OE;var NE=function*(t,e){let r=t.byteLength;if(!e||r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},BE=async function*(t,e){for await(let r of kE(t))yield*NE(r,e)},kE=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},Ml=(t,e,r,n)=>{let s=BE(t,e),o=0,i,a=u=>{i||(i=!0,n&&n(u))};return new ReadableStream({async pull(u){try{let{done:h,value:m}=await s.next();if(h){a(),u.close();return}let y=m.byteLength;if(r){let O=o+=y;r(O)}u.enqueue(new Uint8Array(m))}catch(h){throw a(h),h}},cancel(u){return a(u),s.return()}},{highWaterMark:2})};var u0=64*1024,{isFunction:uc}=H,PE=(({Request:t,Response:e})=>({Request:t,Response:e}))(H.global),{ReadableStream:l0,TextEncoder:f0}=H.global,d0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},CE=t=>{t=H.merge.call({skipUndefined:!0},PE,t);let{fetch:e,Request:r,Response:n}=t,s=e?uc(e):typeof fetch=="function",o=uc(r),i=uc(n);if(!s)return!1;let a=s&&uc(l0),u=s&&(typeof f0=="function"?(R=>A=>R.encode(A))(new f0):async R=>new Uint8Array(await new r(R).arrayBuffer())),h=o&&a&&d0(()=>{let R=!1,A=new r(Gt.origin,{body:new l0,method:"POST",get duplex(){return R=!0,"half"}}).headers.has("Content-Type");return R&&!A}),m=i&&a&&d0(()=>H.isReadableStream(new n("").body)),y={stream:m&&(R=>R.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(R=>{!y[R]&&(y[R]=(A,I)=>{let k=A&&A[R];if(k)return k.call(A);throw new We(`Response type '${R}' is not supported`,We.ERR_NOT_SUPPORT,I)})});let O=async R=>{if(R==null)return 0;if(H.isBlob(R))return R.size;if(H.isSpecCompliantForm(R))return(await new r(Gt.origin,{method:"POST",body:R}).arrayBuffer()).byteLength;if(H.isArrayBufferView(R)||H.isArrayBuffer(R))return R.byteLength;if(H.isURLSearchParams(R)&&(R=R+""),H.isString(R))return(await u(R)).byteLength},S=async(R,A)=>{let I=H.toFiniteNumber(R.getContentLength());return I??O(A)};return async R=>{let{url:A,method:I,data:k,signal:z,cancelToken:M,timeout:K,onDownloadProgress:Z,onUploadProgress:V,responseType:Y,headers:te,withCredentials:j="same-origin",fetchOptions:ce}=cc(R),se=e||fetch;Y=Y?(Y+"").toLowerCase():"text";let de=c0([z,M&&M.toAbortSignal()],K),b=null,c=de&&de.unsubscribe&&(()=>{de.unsubscribe()}),l;try{if(V&&h&&I!=="get"&&I!=="head"&&(l=await S(te,k))!==0){let v=new r(A,{method:"POST",body:k,duplex:"half"}),d;if(H.isFormData(k)&&(d=v.headers.get("content-type"))&&te.setContentType(d),v.body){let[B,X]=Pl(l,Yo(Cl(V)));k=Ml(v.body,u0,B,X)}}H.isString(j)||(j=j?"include":"omit");let p=o&&"credentials"in r.prototype,w={...ce,signal:de,method:I.toUpperCase(),headers:te.normalize().toJSON(),body:k,duplex:"half",credentials:p?j:void 0};b=o&&new r(A,w);let x=await(o?se(b,ce):se(A,w)),N=m&&(Y==="stream"||Y==="response");if(m&&(Z||N&&c)){let v={};["status","statusText","headers"].forEach(oe=>{v[oe]=x[oe]});let d=H.toFiniteNumber(x.headers.get("content-length")),[B,X]=Z&&Pl(d,Yo(Cl(Z),!0))||[];x=new n(Ml(x.body,u0,B,()=>{X&&X(),c&&c()}),v)}Y=Y||"text";let L=await y[H.findKey(y,Y)||"text"](x,R);return!N&&c&&c(),await new Promise((v,d)=>{sa(v,d,{data:L,headers:dr.from(x.headers),status:x.status,statusText:x.statusText,config:R,request:b})})}catch(p){throw c&&c(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,R,b,p&&p.response),{cause:p.cause||p}):We.from(p,p&&p.code,R,b,p&&p.response)}}},LE=new Map,Ul=t=>{let e=t&&t.env||{},{fetch:r,Request:n,Response:s}=e,o=[n,s,r],i=o.length,a=i,u,h,m=LE;for(;a--;)u=o[a],h=m.get(u),h===void 0&&m.set(u,h=a?new Map:CE(e)),m=h;return h},HN=Ul();var zl={http:sc,xhr:a0,fetch:{get:Ul}};H.forEach(zl,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var h0=t=>`- ${t}`,ME=t=>H.isFunction(t)||t===null||t===!1;function UE(t,e){t=H.isArray(t)?t:[t];let{length:r}=t,n,s,o={};for(let i=0;i<r;i++){n=t[i];let a;if(s=n,!ME(n)&&(s=zl[(a=String(n)).toLowerCase()],s===void 0))throw new We(`Unknown adapter '${a}'`);if(s&&(H.isFunction(s)||(s=s.get(e))))break;o[a||"#"+i]=s}if(!s){let i=Object.entries(o).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build")),a=r?i.length>1?`since :
`+i.map(h0).join(`
`):" "+h0(i[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}var lc={getAdapter:UE,adapters:zl};function Fl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Dn(null,t)}function fc(t){return Fl(t),t.headers=dr.from(t.headers),t.data=ra.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),lc.getAdapter(t.adapter||jo.adapter,t)(t).then(function(n){return Fl(t),n.data=ra.call(t,t.transformResponse,n),n.headers=dr.from(n.headers),n},function(n){return na(n)||(Fl(t),n&&n.response&&(n.response.data=ra.call(t,t.transformResponse,n.response),n.response.headers=dr.from(n.response.headers))),Promise.reject(n)})}var dc="1.13.5";var hc={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{hc[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var p0={};hc.transitional=function(e,r,n){function s(o,i){return"[Axios v"+dc+"] Transitional option '"+o+"'"+i+(n?". "+n:"")}return(o,i,a)=>{if(e===!1)throw new We(s(i," has been removed"+(r?" in "+r:"")),We.ERR_DEPRECATED);return r&&!p0[i]&&(p0[i]=!0,console.warn(s(i," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,i,a):!0}};hc.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function zE(t,e,r){if(typeof t!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),s=n.length;for(;s-- >0;){let o=n[s],i=e[o];if(i){let a=t[o],u=a===void 0||i(a,o,t);if(u!==!0)throw new We("option "+o+" must be "+u,We.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new We("Unknown option "+o,We.ERR_BAD_OPTION)}}var ia={assertOptions:zE,validators:hc};var pn=ia.validators,Jo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Sl,response:new Sl}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;let o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Tn(this.defaults,r);let{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&ia.assertOptions(n,{silentJSONParsing:pn.transitional(pn.boolean),forcedJSONParsing:pn.transitional(pn.boolean),clarifyTimeoutError:pn.transitional(pn.boolean),legacyInterceptorReqResOrdering:pn.transitional(pn.boolean)},!1),s!=null&&(H.isFunction(s)?r.paramsSerializer={serialize:s}:ia.assertOptions(s,{encode:pn.function,serialize:pn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ia.assertOptions(r,{baseUrl:pn.spelling("baseURL"),withXsrfToken:pn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&H.merge(o.common,o[r.method]);o&&H.forEach(["delete","get","head","post","put","patch","common"],R=>{delete o[R]}),r.headers=dr.concat(i,o);let a=[],u=!0;this.interceptors.request.forEach(function(A){if(typeof A.runWhen=="function"&&A.runWhen(r)===!1)return;u=u&&A.synchronous;let I=r.transitional||$o;I&&I.legacyInterceptorReqResOrdering?a.unshift(A.fulfilled,A.rejected):a.push(A.fulfilled,A.rejected)});let h=[];this.interceptors.response.forEach(function(A){h.push(A.fulfilled,A.rejected)});let m,y=0,O;if(!u){let R=[fc.bind(this),void 0];for(R.unshift(...a),R.push(...h),O=R.length,m=Promise.resolve(r);y<O;)m=m.then(R[y++],R[y++]);return m}O=a.length;let S=r;for(;y<O;){let R=a[y++],A=a[y++];try{S=R(S)}catch(I){A.call(this,I);break}}try{m=fc.call(this,S)}catch(R){return Promise.reject(R)}for(y=0,O=h.length;y<O;)m=m.then(h[y++],h[y++]);return m}getUri(e){e=Tn(this.defaults,e);let r=oa(e.baseURL,e.url,e.allowAbsoluteUrls);return ea(r,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){Jo.prototype[e]=function(r,n){return this.request(Tn(n||{},{method:e,url:r,data:(n||{}).data}))}});H.forEach(["post","put","patch"],function(e){function r(n){return function(o,i,a){return this.request(Tn(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Jo.prototype[e]=r(),Jo.prototype[e+"Form"]=r(!0)});var aa=Jo;var Kl=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});let n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o,i=new Promise(a=>{n.subscribe(a),o=a}).then(s);return i.cancel=function(){n.unsubscribe(o)},i},e(function(o,i,a){n.reason||(n.reason=new Dn(o,i,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){let e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new t(function(s){e=s}),cancel:e}}},g0=Kl;function Vl(t){return function(r){return t.apply(null,r)}}function Wl(t){return H.isObject(t)&&t.isAxiosError===!0}var Hl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Hl).forEach(([t,e])=>{Hl[e]=t});var m0=Hl;function y0(t){let e=new aa(t),r=Ji(aa.prototype.request,e);return H.extend(r,aa.prototype,e,{allOwnKeys:!0}),H.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return y0(Tn(t,s))},r}var ur=y0(jo);ur.Axios=aa;ur.CanceledError=Dn;ur.CancelToken=g0;ur.isCancel=na;ur.VERSION=dc;ur.toFormData=bs;ur.AxiosError=We;ur.Cancel=ur.CanceledError;ur.all=function(e){return Promise.all(e)};ur.spread=Vl;ur.isAxiosError=Wl;ur.mergeConfig=Tn;ur.AxiosHeaders=dr;ur.formToJSON=t=>ic(H.isHTMLForm(t)?new FormData(t):t);ur.getAdapter=lc.getAdapter;ur.HttpStatusCode=m0;ur.default=ur;var _s=ur;var{Axios:V6,AxiosError:W6,CanceledError:H6,isCancel:q6,CancelToken:$6,VERSION:j6,all:G6,Cancel:Y6,isAxiosError:w0,spread:J6,toFormData:Z6,AxiosHeaders:X6,HttpStatusCode:Q6,formToJSON:e3,getAdapter:t3,mergeConfig:r3}=_s;var ql="http://localhost:8000".replace(/\/+$/,"");var pc=class{constructor(e,r=ql,n=_s){var s;this.basePath=r,this.axios=n,e&&(this.configuration=e,this.basePath=(s=e.basePath)!==null&&s!==void 0?s:r)}},gc=class extends Error{constructor(e,r){super(r),this.field=e,this.name="RequiredError"}},E0={};var b0="https://example.com",_0=function(t,e,r){if(r==null)throw new gc(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};function $l(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>$l(t,n,r)):Object.keys(e).forEach(n=>$l(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}var x0=function(t,...e){let r=new URLSearchParams(t.search);$l(r,e),t.search=r.toString()},R0=function(t,e,r){let n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""},S0=function(t){return t.pathname+t.search+t.hash},I0=function(t,e,r,n){return(s=e,o=r)=>{var i;let a=Object.assign(Object.assign({},t.options),{url:(s.defaults.baseURL?"":(i=n?.basePath)!==null&&i!==void 0?i:o)+t.url});return s.request(a)}};var v0=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(m){try{h(n.next(m))}catch(y){i(y)}}function u(m){try{h(n.throw(m))}catch(y){i(y)}}function h(m){m.done?o(m.value):s(m.value).then(a,u)}h((n=n.apply(t,e||[])).next())})},FE=function(t){return{postKmsRpc:(e,...r)=>v0(this,[e,...r],void 0,function*(n,s={}){_0("postKmsRpc","kmsRpcRequest",n);let o="/kms/rpc",i=new URL(o,b0),a;t&&(a=t.baseOptions);let u=Object.assign(Object.assign({method:"POST"},a),s),h={},m={};h["Content-Type"]="application/json",x0(i,m);let y=a&&a.headers?a.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},h),y),s.headers),u.data=R0(n,u,t),{url:S0(i),options:u}})}},KE=function(t){let e=FE(t);return{postKmsRpc(r,n){return v0(this,void 0,void 0,function*(){var s,o,i;let a=yield e.postKmsRpc(r,n),u=(s=t?.serverIndex)!==null&&s!==void 0?s:0,h=(i=(o=E0["KMSRPCApi.postKmsRpc"])===null||o===void 0?void 0:o[u])===null||i===void 0?void 0:i.url;return(m,y)=>I0(a,_s,ql,t)(m,h||y)})}}};var mc=class extends pc{postKmsRpc(e,r){return KE(this.configuration).postKmsRpc(e,r).then(n=>n(this.axios,this.basePath))}};var yc=class{constructor(e={}){var r;this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.serverIndex=e.serverIndex,this.baseOptions=Object.assign(Object.assign({},e.baseOptions),{headers:Object.assign({},(r=e.baseOptions)===null||r===void 0?void 0:r.headers)}),this.formDataCtor=e.formDataCtor}isJsonMime(e){let r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}};var wc;(function(t){t.addUserToOrganization="addUserToOrganization"})(wc||(wc={}));var Yr;(function(t){t.ed25519="Ed25519",t.secp256r1="Secp256r1",t.secp256k1="Secp256k1",t.secp256k1Keccak256="Secp256k1Keccak256",t.secp256k1Schnorr="Secp256k1Schnorr"})(Yr||(Yr={}));var Ec;(function(t){t.createAuthenticator="createAuthenticator"})(Ec||(Ec={}));var bc;(function(t){t.createOrganization="createOrganization"})(bc||(bc={}));var _c;(function(t){t.createWallet="createWallet"})(_c||(_c={}));var xc;(function(t){t.deleteAuthenticator="deleteAuthenticator"})(xc||(xc={}));var co;(function(t){t.ed25519="Ed25519",t.secp256k1="Secp256k1"})(co||(co={}));var Ce;(function(t){t.ethereum="Ethereum",t.solana="Solana",t.bitcoinSegwit="BitcoinSegwit",t.sui="Sui"})(Ce||(Ce={}));var ca;(function(t){t.getAccounts="getAccounts"})(ca||(ca={}));var Rc;(function(t){t.grantOrganizationAccess="grantOrganizationAccess"})(Rc||(Rc={}));var Sc;(function(t){t.signTransaction="signTransaction"})(Sc||(Sc={}));var Ic;(function(t){t.signUtf8Message="signUtf8Message"})(Ic||(Ic={}));var vc;(function(t){t.root="ROOT"})(vc||(vc={}));var op=pr(mn(),1);var la=Yr.ed25519,fa="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEwOCIgdmlld0JveD0iMCAwIDEwOCAxMDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPgo=",Rt=(t=>(t.SOLANA_MAINNET="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",t.SOLANA_DEVNET="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",t.SOLANA_TESTNET="solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",t.ETHEREUM_MAINNET="eip155:1",t.ETHEREUM_SEPOLIA="eip155:11155111",t.POLYGON_MAINNET="eip155:137",t.POLYGON_AMOY="eip155:80002",t.BASE_MAINNET="eip155:8453",t.BASE_SEPOLIA="eip155:84532",t.ARBITRUM_ONE="eip155:42161",t.ARBITRUM_SEPOLIA="eip155:421614",t.MONAD_MAINNET="eip155:143",t.MONAD_TESTNET="eip155:10143",t.BITCOIN_MAINNET="bip122:000000000019d6689c085ae165831e93",t.BITCOIN_TESTNET="bip122:000000000933ea01ad0ee984209779ba",t.SUI_MAINNET="sui:35834a8a",t.SUI_TESTNET="sui:4c78adac",t.SUI_DEVNET="sui:devnet",t))(Rt||{}),fo={"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":{name:"Solana Mainnet",chain:"solana",network:"mainnet",internalCaip:"solana:101",slip44:"501",explorer:{name:"Solscan",transactionUrl:"https://solscan.io/tx/{hash}",addressUrl:"https://solscan.io/account/{address}"}},"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":{name:"Solana Devnet",chain:"solana",network:"devnet",internalCaip:"solana:103",slip44:"501",explorer:{name:"Solscan",transactionUrl:"https://solscan.io/tx/{hash}?cluster=devnet",addressUrl:"https://solscan.io/account/{address}?cluster=devnet"}},"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":{name:"Solana Testnet",chain:"solana",network:"testnet",internalCaip:"solana:102",slip44:"501",explorer:{name:"Solscan",transactionUrl:"https://solscan.io/tx/{hash}?cluster=testnet",addressUrl:"https://solscan.io/account/{address}?cluster=testnet"}},"eip155:1":{name:"Ethereum Mainnet",chain:"ethereum",network:"mainnet",internalCaip:"eip155:1",chainId:1,slip44:"60",explorer:{name:"Etherscan",transactionUrl:"https://etherscan.io/tx/{hash}",addressUrl:"https://etherscan.io/address/{address}"}},"eip155:11155111":{name:"Ethereum Sepolia",chain:"ethereum",network:"sepolia",internalCaip:"eip155:11155111",chainId:11155111,slip44:"60",explorer:{name:"Etherscan",transactionUrl:"https://sepolia.etherscan.io/tx/{hash}",addressUrl:"https://sepolia.etherscan.io/address/{address}"}},"eip155:137":{name:"Polygon Mainnet",chain:"polygon",network:"mainnet",internalCaip:"eip155:137",chainId:137,slip44:"137",explorer:{name:"Polygonscan",transactionUrl:"https://polygonscan.com/tx/{hash}",addressUrl:"https://polygonscan.com/address/{address}"}},"eip155:80002":{name:"Polygon Amoy",chain:"polygon",network:"amoy",internalCaip:"eip155:80002",chainId:80002,slip44:"137",explorer:{name:"Polygonscan",transactionUrl:"https://amoy.polygonscan.com/tx/{hash}",addressUrl:"https://amoy.polygonscan.com/address/{address}"}},"eip155:8453":{name:"Base Mainnet",chain:"base",network:"mainnet",internalCaip:"eip155:8453",chainId:8453,slip44:"8453",explorer:{name:"Basescan",transactionUrl:"https://basescan.org/tx/{hash}",addressUrl:"https://basescan.org/address/{address}"}},"eip155:84532":{name:"Base Sepolia",chain:"base",network:"sepolia",internalCaip:"eip155:84532",chainId:84532,slip44:"8453",explorer:{name:"Basescan",transactionUrl:"https://sepolia.basescan.org/tx/{hash}",addressUrl:"https://sepolia.basescan.org/address/{address}"}},"eip155:42161":{name:"Arbitrum One",chain:"arbitrum",network:"mainnet",internalCaip:"eip155:42161",chainId:42161,slip44:"42161",explorer:{name:"Arbiscan",transactionUrl:"https://arbiscan.io/tx/{hash}",addressUrl:"https://arbiscan.io/address/{address}"}},"eip155:421614":{name:"Arbitrum Sepolia",chain:"arbitrum",network:"sepolia",internalCaip:"eip155:421614",chainId:421614,slip44:"42161",explorer:{name:"Arbiscan",transactionUrl:"https://sepolia.arbiscan.io/tx/{hash}",addressUrl:"https://sepolia.arbiscan.io/address/{address}"}},"eip155:143":{name:"Monad Mainnet",chain:"monad",network:"mainnet",internalCaip:"eip155:143",chainId:143,slip44:"60",explorer:{name:"Monad Explorer",transactionUrl:"https://monadexplorer.com/tx/{hash}",addressUrl:"https://monadexplorer.com/address/{address}"}},"eip155:10143":{name:"Monad Testnet",chain:"monad",network:"testnet",internalCaip:"eip155:10143",chainId:10143,slip44:"60",explorer:{name:"Monad Testnet Explorer",transactionUrl:"https://testnet.monadexplorer.com/tx/{hash}",addressUrl:"https://testnet.monadexplorer.com/address/{address}"}},"bip122:000000000019d6689c085ae165831e93":{name:"Bitcoin Mainnet",chain:"bitcoin",network:"mainnet",internalCaip:"bip122:000000000019d6689c085ae165831e93",slip44:"0",explorer:{name:"Blockstream",transactionUrl:"https://blockstream.info/tx/{hash}",addressUrl:"https://blockstream.info/address/{address}"}},"bip122:000000000933ea01ad0ee984209779ba":{name:"Bitcoin Testnet",chain:"bitcoin",network:"testnet",internalCaip:"bip122:000000000933ea01ad0ee984209779ba",slip44:"0",explorer:{name:"Blockstream",transactionUrl:"https://blockstream.info/testnet/tx/{hash}",addressUrl:"https://blockstream.info/testnet/address/{address}"}},"sui:35834a8a":{name:"Sui Mainnet",chain:"sui",network:"mainnet",internalCaip:"sui:mainnet",slip44:"784",explorer:{name:"Sui Explorer",transactionUrl:"https://explorer.sui.io/txblock/{hash}?network=mainnet",addressUrl:"https://explorer.sui.io/address/{address}?network=mainnet"}},"sui:4c78adac":{name:"Sui Testnet",chain:"sui",network:"testnet",internalCaip:"sui:testnet",slip44:"784",explorer:{name:"Sui Explorer",transactionUrl:"https://explorer.sui.io/txblock/{hash}?network=testnet",addressUrl:"https://explorer.sui.io/address/{address}?network=testnet"}},"sui:devnet":{name:"Sui Devnet",chain:"sui",network:"devnet",internalCaip:"sui:devnet",slip44:"784",explorer:{name:"Sui Explorer",transactionUrl:"https://explorer.sui.io/txblock/{hash}?network=devnet",addressUrl:"https://explorer.sui.io/address/{address}?network=devnet"}}};function bb(t){return fo[t]}function j0(t,e,r){let n=bb(t);if(!n?.explorer)return;let s=e==="transaction"?n.explorer.transactionUrl:n.explorer.addressUrl,o=e==="transaction"?"{hash}":"{address}";return s.replace(o,r)}function da(t){return Object.keys(fo).find(e=>fo[e].chainId===t)}function Nc(t){return fo[t]?.chainId}function G0(t){let e=fo[t];if(!e||!e.internalCaip)throw new Error(`No internal CAIP mapping found for NetworkId: ${t}`);return e.internalCaip}function Rs(t){let e=Object.keys(fo).find(r=>fo[r].internalCaip===t);if(!e)throw new Error(`No NetworkId mapping found for internal CAIP: ${t}`);return e}var ho={SDK_TYPE:"x-phantom-sdk-type",SDK_VERSION:"x-phantom-sdk-version",PLATFORM:"x-phantom-platform",WALLET_TYPE:"x-phantom-wallet-type",APP_ID:"x-app-id",PLATFORM_VERSION:"x-phantom-platform-version"},Bc="https://connect.phantom.app/login",Y0="https://api.phantom.app/v1/wallets",kc="user-wallet";function Pc(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}var ha=class{constructor(){this.cache=null,this.CACHE_DURATION=3e4,this.TIME_API_URL="https://time.phantom.app/utc"}static getInstance(){return ha.instance||(ha.instance=new ha),ha.instance}async now(){let t=Date.now();if(this.cache&&t-this.cache.fetchedAt<this.CACHE_DURATION){let e=t-this.cache.fetchedAt;return this.cache.timestamp+e}try{let e=await fetch(this.TIME_API_URL);if(!e.ok)throw new Error(`Time API responded with status: ${e.status}`);let r=await e.text(),n=parseInt(r,10);if(isNaN(n))throw new Error(`Invalid timestamp received: ${r}`);return this.cache={timestamp:n,fetchedAt:t},n}catch{return Date.now()}}nowSync(){if(this.cache){let t=Date.now()-this.cache.fetchedAt;if(t<this.CACHE_DURATION)return this.cache.timestamp+t}return Date.now()}clearCache(){this.cache=null}},_b=ha.getInstance(),zr=()=>_b.now();function J0(t){return t.split(":")[0].toLowerCase()}function pa(t){return J0(t)==="eip155"}function Z0(t){return J0(t)==="solana"}var Ib=pr(Q0(),1),vb=pr(np(),1),Ab=pr(mn(),1);var Tb={[Rt.SOLANA_MAINNET]:{chain:"solana",network:"mainnet",description:"Solana Mainnet-Beta"},[Rt.SOLANA_DEVNET]:{chain:"solana",network:"devnet",description:"Solana Devnet"},[Rt.SOLANA_TESTNET]:{chain:"solana",network:"testnet",description:"Solana Testnet"},[Rt.ETHEREUM_MAINNET]:{chain:"ethereum",network:"mainnet",description:"Ethereum Mainnet"},[Rt.ETHEREUM_SEPOLIA]:{chain:"ethereum",network:"sepolia",description:"Sepolia Testnet"},[Rt.POLYGON_MAINNET]:{chain:"polygon",network:"mainnet",description:"Polygon Mainnet"},[Rt.POLYGON_AMOY]:{chain:"polygon",network:"amoy",description:"Polygon Amoy Testnet"},[Rt.BASE_MAINNET]:{chain:"base",network:"mainnet",description:"Base Mainnet"},[Rt.BASE_SEPOLIA]:{chain:"base",network:"sepolia",description:"Base Sepolia Testnet"},[Rt.ARBITRUM_ONE]:{chain:"arbitrum",network:"mainnet",description:"Arbitrum One"},[Rt.ARBITRUM_SEPOLIA]:{chain:"arbitrum",network:"sepolia",description:"Arbitrum Sepolia Testnet"},[Rt.MONAD_MAINNET]:{chain:"monad",network:"mainnet",description:"Monad Mainnet"},[Rt.MONAD_TESTNET]:{chain:"monad",network:"testnet",description:"Monad Testnet"},[Rt.BITCOIN_MAINNET]:{chain:"bitcoin",network:"mainnet",description:"Bitcoin Mainnet"},[Rt.BITCOIN_TESTNET]:{chain:"bitcoin",network:"testnet",description:"Bitcoin Testnet"},[Rt.SUI_MAINNET]:{chain:"sui",network:"mainnet",description:"Sui Mainnet"},[Rt.SUI_TESTNET]:{chain:"sui",network:"testnet",description:"Sui Testnet"}};function Ob(t){let e=Tb[t];if(e)return{chain:e.chain,network:e.network}}var vr={Solana:(t=0)=>`m/44'/501'/${t}'/0'`,Ethereum:(t=0)=>`m/44'/60'/0'/0/${t}`,Bitcoin:(t=0)=>`m/84'/0'/${t}'/0`,Sui:(t=0)=>`m/44'/784'/${t}'/0'/0'`};function Lc(t,e=0){switch(t.split(":")[0].toLowerCase()){case"solana":return{derivationPath:vr.Solana(e),curve:co.ed25519,algorithm:Yr.ed25519,addressFormat:Ce.solana};case"sui":return{derivationPath:vr.Sui(e),curve:co.ed25519,algorithm:Yr.ed25519,addressFormat:Ce.sui};case"bitcoin":case"btc":return{derivationPath:vr.Bitcoin(e),curve:co.secp256k1,algorithm:Yr.secp256k1,addressFormat:Ce.bitcoinSegwit};case"eip155":return{derivationPath:vr.Ethereum(e),curve:co.secp256k1,algorithm:Yr.secp256k1,addressFormat:Ce.ethereum};default:return null}}var ga=class extends Error{constructor(t,e){super(t.detail),this.name=e,this.type=t.type,this.title=t.title,this.detail=t.detail,this.requestId=t.requestId}};function ip(t){if(w0(t))return t.response?.data}function sp(t,e="An error occurred"){if(t instanceof ga)return t.detail||t.title||t.message||e;let r=ip(t);return r?r.message||r.detail||r.title||e:t instanceof Error?t.message:e}function Nb(t){if(!t||!t.type)return null;switch(t.type){case"spending-limit-exceeded":return new nf(t);case"transaction-blocked":return new Bb(t);default:return null}}var nf=class extends ga{constructor(t){super(t,"SpendingLimitError"),this.previousSpendCents=t.previousSpendCents,this.transactionSpendCents=t.transactionSpendCents,this.totalSpendCents=t.totalSpendCents,this.limitCents=t.limitCents}},Bb=class extends ga{constructor(t){super(t,"TransactionBlockedError"),this.scannerResult=t.scannerResult}},Dc=class{constructor(t,e){this.config={...t,walletType:t.walletType||"user-wallet"},this.axiosInstance=_s.create();let r={};t.headers&&Object.assign(r,t.headers),Object.keys(r).length>0&&this.axiosInstance.interceptors.request.use(s=>(Object.assign(s.headers,r),s)),e&&(this.axiosInstance.interceptors.request.use(async s=>await this.stampRequest(s,e)),this.stamper=e);let n=new yc({basePath:t.apiBaseUrl});this.kmsApi=new mc(n,t.apiBaseUrl,this.axiosInstance)}setOrganizationId(t){if(!t)throw new Error("organizationId is required");this.config.organizationId=t}getAuthenticatorPublicKey(){if(this.stamper&&"getKeyInfo"in this.stamper&&typeof this.stamper.getKeyInfo=="function")return this.stamper.getKeyInfo()?.publicKey}async createWallet(t){try{if(!this.config.organizationId)throw new Error("organizationId is required to create a wallet");let e=await zr(),r={organizationId:this.config.organizationId,walletName:t||`Wallet ${e}`,accounts:[vr.Solana(),vr.Ethereum(),vr.Bitcoin(),vr.Sui()]},n={method:_c.createWallet,params:r,timestampMs:e},o=(await this.kmsApi.postKmsRpc(n)).data.result,i={method:ca.getAccounts,params:{accounts:[vr.Solana(),vr.Ethereum(),vr.Bitcoin(),vr.Sui()],organizationId:this.config.organizationId,walletId:o.walletId},timestampMs:e},u=(await this.kmsApi.postKmsRpc(i)).data.result;return{walletId:o.walletId,addresses:u.map(h=>({addressType:h.addressFormat,address:h.address}))}}catch(e){throw console.error("Failed to create wallet:",e.response?.data||e.message),new Error(`Failed to create wallet: ${e.response?.data?.message||e.message}`)}}async prepare(t,e,r,n,s,o){try{let i={transaction:t,organizationId:e,submissionConfig:r,simulationConfig:{account:n},authenticatorPublicKey:s};return(await this.axiosInstance.post(`${this.config.apiBaseUrl}/prepare`,i,{headers:{"Content-Type":"application/json","X-Rpc-Method":o}})).data}catch(i){let a=ip(i),u=Nb(a);if(u)throw u;let h=a?.detail||sp(i,"Failed to submit transaction");throw new Error(h)}}async getTransactionForSigning(t){let{encodedTransaction:e,networkId:r,submissionConfig:n,account:s,authenticatorPublicKey:o}=t,i=pa(r),a=Z0(r);if(i)return{kind:"RLP_ENCODED",bytes:e};if(a&&this.config.walletType==="user-wallet"){if(!s)throw new Error("Account is required to simulate Solana transactions with spending limits");try{return(await this.prepare(e,this.config.organizationId,n,s,o,t.methodName)).transaction}catch(u){if(u instanceof ga)throw u;let h=u instanceof Error?u.message:String(u);throw new Error(h)}}return e}getRpcMethodName(t,e){return pa(t)?e?"eth_sendTransaction":"eth_signTransaction":e?"signAndSendTransaction":"signTransaction"}async performTransactionSigning(t,e){let r=t.walletId,n=t.transaction,s=t.networkId,o=t.derivationIndex??0,i=this.getRpcMethodName(s,e);try{if(!this.config.organizationId)throw new Error("organizationId is required to sign a transaction");let a=Ob(s);if(!a)throw new Error(`SubmissionConfig could not be derived for network ID: ${s}`);let u=Lc(s,o);if(!u)throw new Error(`Unsupported network ID: ${s}`);let h={derivationPath:u.derivationPath,curve:u.curve,addressFormat:u.addressFormat},m=this.getAuthenticatorPublicKey(),y=await this.getTransactionForSigning({encodedTransaction:n,networkId:s,submissionConfig:a,authenticatorPublicKey:m,account:t.account,methodName:i}),O={organizationId:this.config.organizationId,walletId:r,transaction:y,derivationInfo:h};e&&(O.submissionConfig=a),e&&t.account&&(O.simulationConfig={account:t.account});let S={method:Sc.signTransaction,params:O,timestampMs:await zr()},R=await this.kmsApi.postKmsRpc(S,{headers:{"X-Rpc-Method":i}}),A=R.data.result,I=R.data.rpc_submission_result,k=e&&I?I.result:null;return{signedTransaction:A.transaction,hash:k}}catch(a){let u=e?"sign and send":"sign";throw a instanceof ga?a:new Error(sp(a,`Failed to ${u} transaction`))}}async signTransaction(t){return{rawTransaction:(await this.performTransactionSigning(t,!1)).signedTransaction}}async signAndSendTransaction(t){let e=await this.performTransactionSigning(t,!0);return{rawTransaction:e.signedTransaction,hash:e.hash}}async getWalletAddresses(t,e,r){try{let n=r??0,s=e||[vr.Solana(n),vr.Ethereum(n),vr.Bitcoin(n),vr.Sui(n)],o={method:ca.getAccounts,params:{accounts:s,organizationId:this.config.organizationId,walletId:t},timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(o)).data.result.map(h=>({addressType:h.addressFormat,address:h.address}))}catch(n){throw console.error("Failed to get wallet addresses:",n.response?.data||n.message),new Error(`Failed to get wallet addresses: ${n.response?.data?.message||n.message}`)}}async ethereumSignMessage(t){let e=t.walletId,r=t.message,n=t.networkId,s=t.derivationIndex??0;try{if(!this.config.organizationId)throw new Error("organizationId is required to sign a message");let o=Lc(n,s);if(!o)throw new Error(`Unsupported network ID: ${n}`);let i={derivationPath:o.derivationPath,curve:o.curve,addressFormat:o.addressFormat},u={method:"ethereumSignMessage",params:{message:r,organizationId:this.config.organizationId,walletId:e,derivationInfo:i},timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(u)).data.result.signature}catch(o){throw console.error("Failed to sign Ethereum message:",o.response?.data||o.message),new Error(`Failed to sign Ethereum message: ${o.response?.data?.message||o.message}`)}}async signUtf8Message(t){let e=t.walletId,r=t.message,n=t.networkId,s=t.derivationIndex??0;try{if(!this.config.organizationId)throw new Error("organizationId is required to sign a message");let o=Lc(n,s);if(!o)throw new Error(`Unsupported network ID: ${n}`);let i={derivationPath:o.derivationPath,curve:o.curve,addressFormat:o.addressFormat},a={organizationId:this.config.organizationId,walletId:e,message:r,algorithm:o.algorithm,derivationInfo:i},u={method:Ic.signUtf8Message,params:a,timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(u)).data.result.signature}catch(o){throw console.error("Failed to sign raw payload:",o.response?.data||o.message),new Error(`Failed to sign raw payload: ${o.response?.data?.message||o.message}`)}}async ethereumSignTypedData(t){let e=t.walletId,r=t.typedData,n=t.networkId,s=t.derivationIndex??0;try{if(!this.config.organizationId)throw new Error("organizationId is required to sign typed data");let o=Lc(n,s);if(!o)throw new Error(`Unsupported network ID: ${n}`);let i={derivationPath:o.derivationPath,curve:o.curve,addressFormat:o.addressFormat},a={method:"ethereumSignTypedData",params:{typedData:r,organizationId:this.config.organizationId,walletId:e,derivationInfo:i},timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(a)).data.result.signature}catch(o){throw console.error("Failed to sign typed data:",o.response?.data||o.message),new Error(`Failed to sign typed data: ${o.response?.data?.message||o.message}`)}}async getWallets(t,e){try{let r={method:"getOrganizationWallets",params:{organizationId:this.config.organizationId,limit:t||20,offset:e||0},timestampMs:await zr()},s=(await this.kmsApi.postKmsRpc(r)).data.result;return{wallets:s.wallets.map(o=>({walletId:o.walletId,walletName:o.walletName})),totalCount:s.totalCount,limit:s.limit,offset:s.offset}}catch(r){throw console.error("Failed to get wallets:",r.response?.data||r.message),new Error(`Failed to get wallets: ${r.response?.data?.message||r.message}`)}}async getOrganization(t){try{let e={method:"getOrganization",params:{organizationId:t},timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(e)).data.result}catch(e){throw console.error("Failed to get organization:",e.response?.data||e.message),new Error(`Failed to get organization: ${e.response?.data?.message||e.message}`)}}validateNameLength(t,e){if(t.length>64)throw new Error(`${e} name cannot exceed 64 characters. Current length: ${t.length}`)}async createOrganization(t,e,r){try{if(!t)throw new Error("Organization name is required");if(this.validateNameLength(t,"Organization"),!e||e.length===0)throw new Error("At least one user is required");for(let a of e){a.username&&this.validateNameLength(a.username,"Username");for(let u of a.authenticators)u.authenticatorName&&this.validateNameLength(u.authenticatorName,"Authenticator")}let n={organizationName:t,users:e.map(a=>({username:a.username||`user-${Pc()}`,authenticators:a.authenticators,policy:a.role==="ADMIN"?{type:vc.root}:{type:"CEL",preset:"LEGACY_USER_ROLE"}})),tags:r},s={method:bc.createOrganization,params:n,timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(s)).data.result}catch(n){throw console.error("Failed to create organization:",n.response?.data||n.message),new Error(`Failed to create organization: ${n.response?.data?.message||n.message}`)}}async createAuthenticator(t){try{t.username&&this.validateNameLength(t.username,"Username"),t.authenticatorName&&this.validateNameLength(t.authenticatorName,"Authenticator"),t.authenticator?.authenticatorName&&this.validateNameLength(t.authenticator.authenticatorName,"Authenticator");let e={organizationId:t.organizationId,username:t.username,authenticatorName:t.authenticatorName,authenticator:t.authenticator,replaceExpirable:t.replaceExpirable},r={method:Ec.createAuthenticator,params:e,timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(r)).data.result}catch(e){throw console.error("Failed to create authenticator:",e.response?.data||e.message),new Error(`Failed to create authenticator: ${e.response?.data?.message||e.message}`)}}async deleteAuthenticator(t){try{let e={organizationId:t.organizationId,username:t.username,authenticatorId:t.authenticatorId},r={method:xc.deleteAuthenticator,params:e,timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(r)).data.result}catch(e){throw console.error("Failed to delete authenticator:",e.response?.data||e.message),new Error(`Failed to delete authenticator: ${e.response?.data?.message||e.message}`)}}async grantOrganizationAccess(t){try{let e={method:Rc.grantOrganizationAccess,params:t,timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(e)).data.result}catch(e){throw console.error("Failed to grant organization access:",e.response?.data||e.message),new Error(`Failed to grant organization access: ${e.response?.data?.message||e.message}`)}}async addUserToOrganization(t){try{let e={method:wc.addUserToOrganization,params:t,timestampMs:await zr()};await this.kmsApi.postKmsRpc(e)}catch(e){throw console.error("Failed to add user to organization:",e.response?.data||e.message),new Error(`Failed to add user to organization: ${e.response?.data?.message||e.message}`)}}async getWalletWithTag(t){try{let e={method:"getWalletWithTag",params:{organizationId:t.organizationId,tag:t.tag,derivationPaths:t.derivationPaths},timestampMs:await zr()};return(await this.kmsApi.postKmsRpc(e)).data.result}catch(e){throw console.error("Failed to get wallet with tag:",e.response?.data||e.message),new Error(`Failed to get wallet with tag: ${e.response?.data?.message||e.message}`)}}async stampRequest(t,e){let r=typeof t.data=="string"?t.data:t.data===void 0?"":JSON.stringify(t.data),n=op.Buffer.from(r,"utf8"),s=await e.stamp({data:n});return t.headers=t.headers||{},t.headers["X-Phantom-Stamp"]=s,t}};var kb=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Mc=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},mt=(t,e,r)=>(kb(t,e,"access private method"),r);var Pb=/^0x[a-fA-F0-9]{40}$/,Cb=/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/,Lb=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/,Db=/^localhost(:[0-9]{1,5})?$/,Mb=/^[a-zA-Z0-9]{8,}$/,Ub=/^([a-zA-Z][a-zA-Z0-9+-.]*)$/;function sf({address:t,chainId:e,domain:r,nonce:n,uri:s,version:o,scheme:i,statement:a,requestId:u,resources:h,issuedAt:m=new Date,expirationTime:y,notBefore:O}){if(!Pb.test(t))throw new Error("address must be a hex value of 20 bytes (40 hex characters).");if(e!==Math.floor(e))throw new Error("chainId must be a EIP-155 chain ID.");if(!(Cb.test(r)||Lb.test(r)||Db.test(r)))throw new Error("domain must be an RFC 3986 authority.");if(!Mb.test(n))throw new Error("nonce must be at least 8 characters.");if(!ap(s))throw new Error("uri must be a RFC 3986 URI referring to the resource that is the subject of the signing.");if(o!=="1")throw new Error("version must be '1'.");if(i&&!Ub.test(i))throw new Error("scheme must be an RFC 3986 URI scheme.");if(a?.includes(`
`))throw new Error("statement must not include '\\n'.");let S=i?`${i}://${r}`:r,R=a?`${a}
`:"",A=`${S} wants you to sign in with your Ethereum account:
${t}

${R}`,I=`URI: ${s}
Version: ${o}
Chain ID: ${e}
Nonce: ${n}
Issued At: ${m.toISOString()}`;if(y&&(I+=`
Expiration Time: ${y.toISOString()}`),O&&(I+=`
Not Before: ${O.toISOString()}`),u&&(I+=`
Request ID: ${u}`),h){let k=`
Resources:`;for(let z of h){if(!ap(z))throw new Error("resources must be RFC 3986 URIs.");k+=`
- ${z}`}I+=k}return`${A}
${I}`}function ap(t){if(/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(t)||/%[^0-9a-f]/i.test(t)||/%[0-9a-f](:?[^0-9a-f]|$)/i.test(t))return!1;let e=zb(t),r=e[1],n=e[2],s=e[3],o=e[4],i=e[5];if(!(r?.length&&s.length>=0))return!1;if(n?.length){if(!(s.length===0||/^\//.test(s)))return!1}else if(/^\/\//.test(s))return!1;if(!/^[a-z][a-z0-9+\-.]*$/.test(r.toLowerCase()))return!1;let a="";return a+=`${r}:`,n?.length&&(a+=`//${n}`),a+=s,o?.length&&(a+=`?${o}`),i?.length&&(a+=`#${i}`),a}function zb(t){return t.match(/(?:([^:/?#]+):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)}var Fb=4,Kb=100,Ar,Fr,Vb=class{constructor(){Mc(this,Ar),this.type="injected"}load(){let t=0,e=(r,n)=>{let s=Kb*Math.pow(2,Math.min(t,5));setTimeout(()=>{if(mt(this,Ar,Fr).call(this)){r();return}t++,t>=Fb?n():e(r,n)},s)};return new Promise((r,n)=>{e(()=>r(this),n)})}getProvider(){return mt(this,Ar,Fr).call(this)||null}get isConnected(){let t=mt(this,Ar,Fr).call(this);return!!(t?.isConnected&&t.selectedAddress)}async connect({onlyIfTrusted:t}){let e=mt(this,Ar,Fr).call(this);if(!e)throw new Error("Provider not found.");if(e.isConnected&&e.selectedAddress)return this.getAccounts();try{return await e.request({method:t?"eth_accounts":"eth_requestAccounts"})}catch{return}}async disconnect(){return Promise.resolve()}async getAccounts(){let t=mt(this,Ar,Fr).call(this);if(!t)return[];try{return await t.request({method:"eth_accounts"})||[]}catch{return[]}}async signMessage(t,e){let r=mt(this,Ar,Fr).call(this);if(!r)throw new Error("Provider not found.");if(!r.isConnected)throw new Error("Provider is not connected.");return await r.request({method:"eth_sign",params:[e,t]})}async signPersonalMessage(t,e){let r=mt(this,Ar,Fr).call(this);if(!r)throw new Error("Provider not found.");if(!r.isConnected)throw new Error("Provider is not connected.");return await r.request({method:"personal_sign",params:[t,e]})}async signTypedData(t,e){let r=mt(this,Ar,Fr).call(this);if(!r)throw new Error("Provider not found.");if(!r.isConnected)throw new Error("Provider is not connected.");return await r.request({method:"eth_signTypedData_v4",params:[e,JSON.stringify(t)]})}async signIn(t){let e=mt(this,Ar,Fr).call(this);if(!e)throw new Error("Provider not found.");let r=sf(t),n=e.selectedAddress;if(!n)throw new Error("No address available.");let s=await this.signPersonalMessage(r,n);return{address:n,signature:s,signedMessage:r}}async sendTransaction(t){let e=mt(this,Ar,Fr).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");return await e.request({method:"eth_sendTransaction",params:[t]})}async signTransaction(t){let e=mt(this,Ar,Fr).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");return await e.request({method:"eth_signTransaction",params:[t]})}async getChainId(){let t=mt(this,Ar,Fr).call(this);if(!t)throw new Error("Provider not found.");return await t.request({method:"eth_chainId"})}async switchChain(t){let e=mt(this,Ar,Fr).call(this);if(!e)throw new Error("Provider not found.");await e.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]})}async request(t){let e=mt(this,Ar,Fr).call(this);if(!e)throw new Error("Provider not found.");return await e.request(t)}};Ar=new WeakSet;Fr=function(){if(!(typeof window>"u"))return window?.phantom?.ethereum};async function On(t="injected"){if(t==="injected"){let e=new Vb;try{return await e.load(),e}catch{throw new Error("Provider not found.")}}else throw new Error("Invalid provider type.")}var ma=new Map;function Wb(t,e){return ma.has(t)||ma.set(t,new Set),ma.get(t)?.add(e),()=>cp(t,e)}function cp(t,e){let r=ma.get(t);r&&r.delete(e)}function Ss(t,e){let r=ma.get(t);r&&r.forEach(n=>{try{n(e)}catch(s){console.error(`Error in ${t} event listener:`,s)}})}async function Hb({onlyIfTrusted:t=!1}={}){let e=await On();if(!e)throw new Error("Provider not found.");if(e.isConnected)return await e.getAccounts();try{let r=await e.connect({onlyIfTrusted:!0});if(r&&r.length>0)return Ss("connect",r),r}catch{}if(t)throw new Error("No trusted connection available.");try{let r=await e.connect({onlyIfTrusted:!1});if(r&&r.length>0)return Ss("connect",r),r}catch{}throw new Error("Failed to connect to Phantom.")}async function qb(){let t=await On();if(!t)throw new Error("Provider not found.");await t.disconnect(),Ss("disconnect",[])}async function $b(){let t=await On();if(!t)throw new Error("Provider not found.");return t.getAccounts()}async function jb(t,e){let r=await On();if(!r)throw new Error("Provider not found.");return r.isConnected||await r.connect({onlyIfTrusted:!1}),r.signPersonalMessage(t,e)}async function Gb(t,e){let r=await On();if(!r)throw new Error("Provider not found.");return r.isConnected||await r.connect({onlyIfTrusted:!1}),r.signTypedData(t,e)}async function Yb(t){let e=await On();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.sendTransaction(t)}async function Jb(t){let e=await On();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.signTransaction(t)}async function Zb(){let t=await On();if(!t)throw new Error("Provider not found.");return t.getChainId()}async function Xb(t){let e=await On();if(!e)throw new Error("Provider not found.");return e.switchChain(t)}var Qb=class{constructor(){this._chainId="0x1",this._accounts=[],this.bindProviderEvents()}get chainId(){return this._chainId}get accounts(){return this._accounts}async request(t){let e=await On();if(!e)throw new Error("Provider not found.");let r=e.getProvider();if(!r)throw new Error("Provider instance not found.");return r.request(t)}async connect(){let t=await Hb();return this._accounts=t,t}async disconnect(){await qb(),this._accounts=[]}signPersonalMessage(t,e){return jb(t,e)}signTypedData(t,e){return Gb(t,e)}signTransaction(t){return Jb(t)}sendTransaction(t){return Yb(t)}async switchChain(t){let e=typeof t=="string"?t.toLowerCase().startsWith("0x")?t.toLowerCase():`0x${parseInt(t,10).toString(16)}`:`0x${t.toString(16)}`;await Xb(e),this._chainId=e}async getChainId(){let t=await Zb(),e=parseInt(t,16);return this._chainId=t,e}async getAccounts(){let t=await $b();return this._accounts=t,t}isConnected(){return this._accounts.length>0}on(t,e){Wb(t,e)}off(t,e){cp(t,e)}async bindProviderEvents(){try{let e=(await On()).getProvider();e&&(e.on("connect",async()=>{try{let r=await e.request({method:"eth_accounts"});r?.length>0&&(this._accounts=r,Ss("connect",r))}catch{}}),e.on("disconnect",()=>{this._accounts=[],Ss("disconnect",{code:4900,message:"Provider disconnected"})}),e.on("accountsChanged",r=>{this._accounts=r,Ss("accountsChanged",r),r&&r.length>0&&Ss("connect",r)}),e.on("chainChanged",r=>{this._chainId=r,Ss("chainChanged",r)}))}catch{}}};function Uc(){return{name:"ethereum",create:()=>new Qb}}function po(){try{return!!window?.phantom}catch{return!1}}var e1={isInstalled:po};function up(){return{name:"extension",create:()=>e1}}function lp({plugins:t=[]}){let e={};for(let r of t)e[r.name]=r.create();return e}var t1=4,r1=100,Zr,tn,n1=class{constructor(){Mc(this,Zr),this.type="injected"}load(){let t=0,e=(r,n)=>{let s=r1*Math.pow(2,Math.min(t,5));setTimeout(()=>{if(mt(this,Zr,tn).call(this)){r();return}t++,t>=t1?n():e(r,n)},s)};return new Promise((r,n)=>{e(()=>r(this),n)})}getProvider(){return mt(this,Zr,tn).call(this)||null}get isConnected(){let t=mt(this,Zr,tn).call(this);return!!(t?.isConnected&&t.publicKey)}async connect({onlyIfTrusted:t}){let e=mt(this,Zr,tn).call(this);if(!e)throw new Error("Provider not found.");if(e.isConnected&&e.publicKey)return this.getAccount()??void 0;try{return(await e.connect({onlyIfTrusted:t})).publicKey.toString()}catch{return}}async disconnect(){let t=mt(this,Zr,tn).call(this);if(!t)throw new Error("Provider not found.");await t.disconnect()}async getAccount(){let t=mt(this,Zr,tn).call(this);return t&&t.isConnected&&t.publicKey?Promise.resolve(t.publicKey.toString()):Promise.resolve(void 0)}async signMessage(t,e){let r=mt(this,Zr,tn).call(this);if(!r)throw new Error("Provider not found.");if(!r.isConnected)throw new Error("Provider is not connected.");let n=await r.signMessage(t,e);return{signature:n.signature,address:n.publicKey.toString()}}async signIn(t){let e=mt(this,Zr,tn).call(this);if(!e)throw new Error("Provider not found.");let r=await e.signIn(t);return{address:r.address.toString(),signature:r.signature,signedMessage:r.signedMessage}}async signAndSendTransaction(t){let e=mt(this,Zr,tn).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");let r=await e.signAndSendTransaction(t);return{signature:r.signature,address:r.publicKey}}async signAndSendAllTransactions(t){let e=mt(this,Zr,tn).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");if(!e.signAndSendAllTransactions)throw new Error("Provider does not support signAndSendAllTransactions.");let r=await e.signAndSendAllTransactions(t);return{signatures:r.signatures,address:r.publicKey}}async signTransaction(t){let e=mt(this,Zr,tn).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");return await e.signTransaction(t)}async signAllTransactions(t){let e=mt(this,Zr,tn).call(this);if(!e)throw new Error("Provider not found.");if(!e.isConnected)throw new Error("Provider is not connected.");return await e.signAllTransactions(t)}};Zr=new WeakSet;tn=function(){if(!(typeof window>"u"))return window?.phantom?.solana};async function vs(t="injected"){if(t==="injected"){let e=new n1;try{return await e.load(),e}catch{throw new Error("Provider not found.")}}else throw new Error("Invalid provider type.")}var Jn=new Map;function s1(t,e){return Jn.has(t)||Jn.set(t,new Set),Jn.get(t)?.add(e),()=>{fp(t,e)}}function fp(t,e){Jn.has(t)&&(Jn.get(t)?.delete(e),Jn.get(t)?.size===0&&Jn.delete(t))}function Is(t,...e){Jn.has(t)&&Jn.get(t)?.forEach(r=>{try{r(...e)}catch(n){console.error(`Error in ${t} event listener:`,n)}})}async function o1({onlyIfTrusted:t=!1}={}){let e=await vs();if(!e)throw new Error("Provider not found.");if(e.isConnected)return e.getAccount();try{let r=await e.connect({onlyIfTrusted:!0});if(r)return Is("connect",r),r}catch{}if(t)throw new Error("No trusted connection available.");try{let r=await e.connect({onlyIfTrusted:!1});if(r)return Is("connect",r),r}catch{}throw new Error("Failed to connect to Phantom.")}async function i1(){let t=await vs();if(!t)throw new Error("Provider not found.");await t.disconnect(),Is("disconnect")}async function a1(t){let e=await vs();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.signAndSendTransaction(t)}async function c1(t){let e=await vs();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.signAndSendAllTransactions(t)}async function u1(t){let e=await vs();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.signTransaction(t)}async function l1(t){let e=await vs();if(!e)throw new Error("Provider not found.");return e.isConnected||await e.connect({onlyIfTrusted:!1}),e.signAllTransactions(t)}async function f1(t,e){let r=await vs();if(!r)throw new Error("Provider not found.");return r.isConnected||await r.connect({onlyIfTrusted:!1}),r.signMessage(t,e)}var d1=class{constructor(){this._publicKey=null,this.bindProviderEvents()}get publicKey(){return this._publicKey}get isConnected(){return this._publicKey!==null}async connect(t){let e=await o1(t);if(!e)throw new Error("Failed to connect to Solana wallet");return this._publicKey=e,{publicKey:e}}async disconnect(){await i1(),this._publicKey=null}async signMessage(t){let e=typeof t=="string"?new TextEncoder().encode(t):t,r=await f1(e);return{signature:r.signature instanceof Uint8Array?r.signature:new Uint8Array(r.signature),publicKey:r.address||this._publicKey||""}}signTransaction(t){return u1(t)}async signAndSendTransaction(t){return{signature:(await a1(t)).signature}}signAllTransactions(t){return l1(t)}async signAndSendAllTransactions(t){return{signatures:(await c1(t)).signatures}}async switchNetwork(t){return Promise.resolve()}on(t,e){s1(t,e)}off(t,e){fp(t,e)}async bindProviderEvents(){try{let e=(await vs()).getProvider();e&&(e.on("connect",r=>{if(r){let n=r.toString();this._publicKey=n,Is("connect",n)}}),e.on("disconnect",()=>{this._publicKey=null,Is("disconnect")}),e.on("accountChanged",r=>{if(r){let n=r.toString();this._publicKey=n,Is("accountChanged",n),Is("connect",n)}else this._publicKey=null,Is("accountChanged",null)}))}catch{}}};function dp(){return{name:"solana",create:()=>new d1}}function zc(){if(typeof window>"u")return null;let t=window?.phantom?.app;return t||null}async function h1(t){let e=await zc();if(!e)throw new Error("Provider not found.");let r=t?.chains?{chains:t.chains.map(G0)}:{},n=await e.request({method:"phantom_auto_confirm_enable",params:r});return{...n,chains:n.chains.map(Rs)}}async function p1(){let t=await zc();if(!t)throw new Error("Provider not found.");let e=await t.request({method:"phantom_auto_confirm_disable",params:{}});return{...e,chains:e.chains.map(Rs)}}async function g1(){let t=await zc();if(!t)throw new Error("Provider not found.");let e=await t.request({method:"phantom_auto_confirm_status",params:{}});return{...e,chains:e.chains.map(Rs)}}async function m1(){let t=await zc();if(!t)throw new Error("Provider not found.");return{chains:(await t.request({method:"phantom_auto_confirm_supported_chains",params:{}})).chains.map(Rs)}}var y1={autoConfirmEnable:h1,autoConfirmDisable:p1,autoConfirmStatus:g1,autoConfirmSupportedChains:m1};function hp(){return{name:"autoConfirm",create:()=>y1}}var yn=pr(gp(),1);var pw=pr(mn(),1);var Kc=typeof window<"u"&&typeof window.btoa<"u";function tr(t){let e;return Kc?typeof t=="string"?e=btoa(t):e=btoa(String.fromCharCode(...Array.from(t))):typeof t=="string"?e=Buffer.from(t,"utf8").toString("base64"):e=Buffer.from(t).toString("base64"),e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function go(t){let e=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"=");if(Kc){let r=atob(e),n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}else return new Uint8Array(Buffer.from(e,"base64"))}function mp(t){if(Kc&&typeof TextEncoder<"u"){let e=new TextEncoder().encode(t);return tr(e)}else return tr(t)}var b1=1,_1=2,x1=3,R1=4,S1=5,I1=6,v1=7,A1=8,T1=9,O1=10,N1=-32700,B1=-32603,k1=-32602,P1=-32601,C1=-32600,L1=-32016,D1=-32015,M1=-32014,U1=-32013,z1=-32012,F1=-32011,K1=-32010,V1=-32009,W1=-32008,H1=-32007,q1=-32006,$1=-32005,j1=-32004,G1=-32003,Y1=-32002,J1=-32001,Z1=28e5,X1=2800001,Q1=2800002,e_=2800003,t_=2800004,r_=2800005,n_=2800006,s_=2800007,o_=2800008,i_=2800009,a_=2800010,c_=2800011,u_=323e4,l_=32300001,f_=3230002,d_=3230003,h_=3230004,p_=361e4,g_=3610001,m_=3610002,y_=3610003,w_=3610004,E_=3610005,b_=3610006,__=3610007,x_=3611e3,R_=3704e3,S_=3704001,I_=3704002,v_=3704003,A_=3704004,T_=4128e3,O_=4128001,N_=4128002,B_=4615e3,k_=4615001,P_=4615002,C_=4615003,L_=4615004,D_=4615005,M_=4615006,U_=4615007,z_=4615008,F_=4615009,K_=4615010,V_=4615011,W_=4615012,H_=4615013,q_=4615014,$_=4615015,j_=4615016,G_=4615017,Y_=4615018,J_=4615019,Z_=4615020,X_=4615021,Q_=4615022,ex=4615023,tx=4615024,rx=4615025,nx=4615026,sx=4615027,ox=4615028,ix=4615029,ax=4615030,cx=4615031,ux=4615032,lx=4615033,fx=4615034,dx=4615035,hx=4615036,px=4615037,gx=4615038,mx=4615039,yx=4615040,wx=4615041,Ex=4615042,bx=4615043,_x=4615044,xx=4615045,Rx=4615046,Sx=4615047,Ix=4615048,vx=4615049,Ax=4615050,Tx=4615051,Ox=4615052,Nx=4615053,Bx=4615054,kx=5508e3,Px=5508001,Cx=5508002,Lx=5508003,Dx=5508004,Mx=5508005,Ux=5508006,zx=5508007,Fx=5508008,Kx=5508009,Vx=5508010,Wx=5508011,Hx=5663e3,qx=5663001,$x=5663002,jx=5663003,Gx=5663004,Yx=5663005,Jx=5663006,Zx=5663007,Xx=5663008,Qx=5663009,eR=5663010,tR=5663011,rR=5663012,nR=5663013,sR=5663014,oR=5663015,iR=5663016,aR=5663017,cR=5663018,uR=5663019,lR=5663020,fR=705e4,dR=7050001,hR=7050002,pR=7050003,gR=7050004,mR=7050005,yR=7050006,wR=7050007,ER=7050008,bR=7050009,_R=7050010,xR=7050011,RR=7050012,SR=7050013,IR=7050014,vR=7050015,AR=7050016,TR=7050017,OR=7050018,NR=7050019,BR=7050020,kR=7050021,PR=7050022,CR=7050023,LR=7050024,DR=7050025,MR=7050026,UR=7050027,zR=7050028,FR=7050029,KR=7050030,VR=7050031,WR=7050032,HR=7050033,qR=7050034,$R=7050035,jR=7050036,af=8078e3,cf=8078001,yp=8078002,wp=8078003,uf=8078004,lf=8078005,ff=8078006,GR=8078007,YR=8078008,JR=8078009,ZR=8078010,df=8078011,XR=8078012,Ep=8078013,bp=8078014,QR=8078015,eS=8078016,tS=8078017,rS=8078018,nS=8078019,_p=8078020,xp=8078021,sS=8078022,oS=81e5,iS=8100001,aS=8100002,cS=8100003,uS=819e4,lS=8190001,fS=8190002,dS=8190003,hS=8190004,pS=99e5,gS=9900001,mS=9900002,yS=9900003,wS=9900004;function Rp(t){return Array.isArray(t)?"%5B"+t.map(Rp).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function ES([t,e]){return`${t}=${Rp(e)}`}function bS(t){let e=Object.entries(t).map(ES).join("&");return btoa(e)}var AB={[u_]:"Account not found at address: $address",[h_]:"Not all accounts were decoded. Encoded accounts found at addresses: $addresses.",[d_]:"Expected decoded account at address: $address",[f_]:"Failed to decode account data at address: $address",[l_]:"Accounts not found at addresses: $addresses",[i_]:"Unable to find a viable program address bump seed.",[Q1]:"$putativeAddress is not a base58-encoded address.",[Z1]:"Expected base58 encoded address to decode to a byte array of length 32. Actual length: $actualLength.",[e_]:"The `CryptoKey` must be an `Ed25519` public key.",[c_]:"$putativeOffCurveAddress is not a base58-encoded off-curve address.",[o_]:"Invalid seeds; point must fall off the Ed25519 curve.",[t_]:"Expected given program derived address to have the following format: [Address, ProgramDerivedAddressBump].",[n_]:"A maximum of $maxSeeds seeds, including the bump seed, may be supplied when creating an address. Received: $actual.",[s_]:"The seed at index $index with length $actual exceeds the maximum length of $maxSeedLength bytes.",[r_]:"Expected program derived address bump to be in the range [0, 255], got: $bump.",[a_]:"Program address cannot end with PDA marker.",[X1]:"Expected base58-encoded address string of length in the range [32, 44]. Actual length: $actualLength.",[R1]:"Expected base58-encoded blockash string of length in the range [32, 44]. Actual length: $actualLength.",[b1]:"The network has progressed past the last block for which this transaction could have been committed.",[af]:"Codec [$codecDescription] cannot decode empty byte arrays.",[sS]:"Enum codec cannot use lexical values [$stringValues] as discriminators. Either remove all lexical values or set `useValuesAsDiscriminators` to `false`.",[_p]:"Sentinel [$hexSentinel] must not be present in encoded bytes [$hexEncodedBytes].",[lf]:"Encoder and decoder must have the same fixed size, got [$encoderFixedSize] and [$decoderFixedSize].",[ff]:"Encoder and decoder must have the same max size, got [$encoderMaxSize] and [$decoderMaxSize].",[uf]:"Encoder and decoder must either both be fixed-size or variable-size.",[YR]:"Enum discriminator out of range. Expected a number in [$formattedValidDiscriminators], got $discriminator.",[yp]:"Expected a fixed-size codec, got a variable-size one.",[Ep]:"Codec [$codecDescription] expected a positive byte length, got $bytesLength.",[wp]:"Expected a variable-size codec, got a fixed-size one.",[nS]:"Codec [$codecDescription] expected zero-value [$hexZeroValue] to have the same size as the provided fixed-size item [$expectedSize bytes].",[cf]:"Codec [$codecDescription] expected $expected bytes, got $bytesLength.",[rS]:"Expected byte array constant [$hexConstant] to be present in data [$hexData] at offset [$offset].",[JR]:"Invalid discriminated union variant. Expected one of [$variants], got $value.",[ZR]:"Invalid enum variant. Expected one of [$stringValues] or a number in [$formattedNumericalValues], got $variant.",[QR]:"Invalid literal union variant. Expected one of [$variants], got $value.",[GR]:"Expected [$codecDescription] to have $expected items, got $actual.",[XR]:"Invalid value $value for base $base with alphabet $alphabet.",[eS]:"Literal union discriminator out of range. Expected a number between $minRange and $maxRange, got $discriminator.",[df]:"Codec [$codecDescription] expected number to be in the range [$min, $max], got $value.",[bp]:"Codec [$codecDescription] expected offset to be in the range [0, $bytesLength], got $offset.",[xp]:"Expected sentinel [$hexSentinel] to be present in decoded bytes [$hexDecodedBytes].",[tS]:"Union variant out of range. Expected an index between $minRange and $maxRange, got $variant.",[x_]:"No random values implementation could be found.",[F_]:"instruction requires an uninitialized account",[ex]:"instruction tries to borrow reference for an account which is already borrowed",[tx]:"instruction left account with an outstanding borrowed reference",[X_]:"program other than the account's owner changed the size of the account data",[D_]:"account data too small for instruction",[Q_]:"instruction expected an executable account",[Rx]:"An account does not have enough lamports to be rent-exempt",[Ix]:"Program arithmetic overflowed",[xx]:"Failed to serialize or deserialize account data: $encodedData",[Bx]:"Builtin programs must consume compute units",[ux]:"Cross-program invocation call depth too deep",[gx]:"Computational budget exceeded",[nx]:"custom program error: #$code",[G_]:"instruction contains duplicate accounts",[rx]:"instruction modifications of multiply-passed account differ",[ax]:"executable accounts must be rent exempt",[ox]:"instruction changed executable accounts data",[ix]:"instruction changed the balance of an executable account",[Y_]:"instruction changed executable bit of an account",[q_]:"instruction modified data of an account it does not own",[H_]:"instruction spent from the balance of an account it does not own",[k_]:"generic instruction error",[Ax]:"Provided owner is not allowed",[bx]:"Account is immutable",[_x]:"Incorrect authority provided",[U_]:"incorrect program id for instruction",[M_]:"insufficient funds for instruction",[L_]:"invalid account data for instruction",[Sx]:"Invalid account owner",[P_]:"invalid program argument",[sx]:"program returned invalid error code",[C_]:"invalid instruction data",[px]:"Failed to reallocate account data",[hx]:"Provided seeds do not result in a valid address",[Tx]:"Accounts data allocations exceeded the maximum allowed per transaction",[Ox]:"Max accounts exceeded",[Nx]:"Max instruction trace length exceeded",[dx]:"Length of the seed is too long for address generation",[lx]:"An account required by the instruction is missing",[z_]:"missing required signature for instruction",[W_]:"instruction illegally modified the program id of an account",[Z_]:"insufficient account keys for instruction",[mx]:"Cross-program invocation with unauthorized signer or writable account",[yx]:"Failed to create program execution environment",[Ex]:"Program failed to compile",[wx]:"Program failed to complete",[j_]:"instruction modified data of a read-only account",[$_]:"instruction changed the balance of a read-only account",[fx]:"Cross-program invocation reentrancy not allowed for this instruction",[J_]:"instruction modified rent epoch of an account",[V_]:"sum of account balances before and after instruction do not match",[K_]:"instruction requires an initialized account",[B_]:"",[cx]:"Unsupported program id",[vx]:"Unsupported sysvar",[T_]:"The instruction does not have any accounts.",[O_]:"The instruction does not have any data.",[N_]:"Expected instruction to have progress address $expectedProgramAddress, got $actualProgramAddress.",[S1]:"Expected base58 encoded blockhash to decode to a byte array of length 32. Actual length: $actualLength.",[_1]:"The nonce `$expectedNonceValue` is no longer valid. It has advanced to `$actualNonceValue`",[mS]:"Invariant violation: Found no abortable iterable cache entry for key `$cacheKey`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[wS]:"Invariant violation: This data publisher does not publish to the channel named `$channelName`. Supported channels include $supportedChannelNames.",[gS]:"Invariant violation: WebSocket message iterator state is corrupt; iterated without first resolving existing message promise. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[pS]:"Invariant violation: WebSocket message iterator is missing state storage. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[yS]:"Invariant violation: Switch statement non-exhaustive. Received unexpected value `$unexpectedValue`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[B1]:"JSON-RPC error: Internal JSON-RPC error ($__serverMessage)",[k1]:"JSON-RPC error: Invalid method parameter(s) ($__serverMessage)",[C1]:"JSON-RPC error: The JSON sent is not a valid `Request` object ($__serverMessage)",[P1]:"JSON-RPC error: The method does not exist / is not available ($__serverMessage)",[N1]:"JSON-RPC error: An error occurred on the server while parsing the JSON text ($__serverMessage)",[z1]:"$__serverMessage",[J1]:"$__serverMessage",[j1]:"$__serverMessage",[M1]:"$__serverMessage",[K1]:"$__serverMessage",[V1]:"$__serverMessage",[L1]:"Minimum context slot has not been reached",[$1]:"Node is unhealthy; behind by $numSlotsBehind slots",[W1]:"No snapshot",[Y1]:"Transaction simulation failed",[H1]:"$__serverMessage",[F1]:"Transaction history is not available from this node",[q1]:"$__serverMessage",[U1]:"Transaction signature length mismatch",[G1]:"Transaction signature verification failure",[D1]:"$__serverMessage",[R_]:"Key pair bytes must be of length 64, got $byteLength.",[S_]:"Expected private key bytes with length 32. Actual length: $actualLength.",[I_]:"Expected base58-encoded signature to decode to a byte array of length 64. Actual length: $actualLength.",[A_]:"The provided private key does not match the provided public key.",[v_]:"Expected base58-encoded signature string of length in the range [64, 88]. Actual length: $actualLength.",[I1]:"Lamports value must be in the range [0, 2e64-1]",[v1]:"`$value` cannot be parsed as a `BigInt`",[O1]:"$message",[A1]:"`$value` cannot be parsed as a `Number`",[x1]:"No nonce account could be found at address `$nonceAccountAddress`",[uS]:"The notification name must end in 'Notifications' and the API must supply a subscription plan creator function for the notification '$notificationName'.",[fS]:"WebSocket was closed before payload could be added to the send buffer",[dS]:"WebSocket connection closed",[hS]:"WebSocket failed to connect",[lS]:"Failed to obtain a subscription id from the server",[cS]:"Could not find an API plan for RPC method: `$method`",[oS]:"The $argumentLabel argument to the `$methodName` RPC method$optionalPathLabel was `$value`. This number is unsafe for use with the Solana JSON-RPC because it exceeds `Number.MAX_SAFE_INTEGER`.",[aS]:"HTTP error ($statusCode): $message",[iS]:"HTTP header(s) forbidden: $headers. Learn more at https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name.",[kx]:"Multiple distinct signers were identified for address `$address`. Please ensure that you are using the same signer instance for each address.",[Px]:"The provided value does not implement the `KeyPairSigner` interface",[Lx]:"The provided value does not implement the `MessageModifyingSigner` interface",[Dx]:"The provided value does not implement the `MessagePartialSigner` interface",[Cx]:"The provided value does not implement any of the `MessageSigner` interfaces",[Ux]:"The provided value does not implement the `TransactionModifyingSigner` interface",[zx]:"The provided value does not implement the `TransactionPartialSigner` interface",[Fx]:"The provided value does not implement the `TransactionSendingSigner` interface",[Mx]:"The provided value does not implement any of the `TransactionSigner` interfaces",[Kx]:"More than one `TransactionSendingSigner` was identified.",[Vx]:"No `TransactionSendingSigner` was identified. Please provide a valid `TransactionWithSingleSendingSigner` transaction.",[Wx]:"Wallet account signers do not support signing multiple messages/transactions in a single operation",[__]:"Cannot export a non-extractable key.",[g_]:"No digest implementation could be found.",[p_]:"Cryptographic operations are only allowed in secure browser contexts. Read more here: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts.",[m_]:`This runtime does not support the generation of Ed25519 key pairs.

Install @solana/webcrypto-ed25519-polyfill and call its \`install\` function before generating keys in environments that do not support Ed25519.

For a list of runtimes that currently support Ed25519 operations, visit https://github.com/WICG/webcrypto-secure-curves/issues/20.`,[y_]:"No signature verification implementation could be found.",[w_]:"No key generation implementation could be found.",[E_]:"No signing implementation could be found.",[b_]:"No key export implementation could be found.",[T1]:"Timestamp value must be in the range [-(2n ** 63n), (2n ** 63n) - 1]. `$value` given",[AR]:"Transaction processing left an account with an outstanding borrowed reference",[dR]:"Account in use",[hR]:"Account loaded twice",[pR]:"Attempt to debit an account but found no record of a prior credit.",[CR]:"Transaction loads an address table account that doesn't exist",[wR]:"This transaction has already been processed",[ER]:"Blockhash not found",[bR]:"Loader call chain is too deep",[vR]:"Transactions are currently disabled due to cluster maintenance",[KR]:"Transaction contains a duplicate instruction ($index) that is not allowed",[mR]:"Insufficient funds for fee",[VR]:"Transaction results in an account ($accountIndex) with insufficient funds for rent",[yR]:"This account may not be used to pay transaction fees",[xR]:"Transaction contains an invalid account reference",[DR]:"Transaction loads an address table account with invalid data",[MR]:"Transaction address table lookup uses an invalid index",[LR]:"Transaction loads an address table account with an invalid owner",[HR]:"LoadedAccountsDataSizeLimit set for transaction must be greater than 0.",[SR]:"This program may not be used for executing instructions",[UR]:"Transaction leaves an account with a lower balance than rent-exempt minimum",[NR]:"Transaction loads a writable account that cannot be written",[WR]:"Transaction exceeded max loaded accounts data size cap",[_R]:"Transaction requires a fee but has no signature present",[gR]:"Attempt to load a program that does not exist",[$R]:"Execution of the program referenced by account at index $accountIndex is temporarily restricted.",[qR]:"ResanitizationNeeded",[IR]:"Transaction failed to sanitize accounts offsets correctly",[RR]:"Transaction did not pass signature verification",[PR]:"Transaction locked too many accounts",[jR]:"Sum of account balances before and after transaction do not match",[fR]:"The transaction failed with the error `$errorName`",[OR]:"Transaction version is unsupported",[kR]:"Transaction would exceed account data limit within the block",[FR]:"Transaction would exceed total account data limit",[BR]:"Transaction would exceed max account limit within the block",[TR]:"Transaction would exceed max Block Cost Limit",[zR]:"Transaction would exceed max Vote Cost Limit",[oR]:"Attempted to sign a transaction with an address that is not a signer for it",[eR]:"Transaction is missing an address at index: $index.",[iR]:"Transaction has no expected signers therefore it cannot be encoded",[lR]:"Transaction size $transactionSize exceeds limit of $transactionSizeLimit bytes",[$x]:"Transaction does not have a blockhash lifetime",[jx]:"Transaction is not a durable nonce transaction",[Yx]:"Contents of these address lookup tables unknown: $lookupTableAddresses",[Jx]:"Lookup of address at index $highestRequestedIndex failed for lookup table `$lookupTableAddress`. Highest known index is $highestKnownIndex. The lookup table may have been extended since its contents were retrieved",[Xx]:"No fee payer set in CompiledTransaction",[Zx]:"Could not find program address at index $index",[cR]:"Failed to estimate the compute unit consumption for this transaction message. This is likely because simulating the transaction failed. Inspect the `cause` property of this error to learn more",[uR]:"Transaction failed when it was simulated in order to estimate the compute unit consumption. The compute unit estimate provided is for a transaction that failed when simulated and may not be representative of the compute units this transaction would consume if successful. Inspect the `cause` property of this error to learn more",[tR]:"Transaction is missing a fee payer.",[rR]:"Could not determine this transaction's signature. Make sure that the transaction has been signed by its fee payer.",[sR]:"Transaction first instruction is not advance nonce account instruction.",[nR]:"Transaction with no instructions cannot be durable nonce transaction.",[Hx]:"This transaction includes an address (`$programAddress`) which is both invoked and set as the fee payer. Program addresses may not pay fees",[qx]:"This transaction includes an address (`$programAddress`) which is both invoked and marked writable. Program addresses may not be writable",[aR]:"The transaction message expected the transaction to have $signerAddressesLength signatures, got $signaturesLength.",[Qx]:"Transaction is missing signatures for addresses: $addresses.",[Gx]:"Transaction version must be in the range [0, 127]. `$actualVersion` given"};function _S(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${bS(e)}'`),`${r}\``}}var As=class extends Error{constructor(...[e,r]){let n,s;if(r){let{cause:i,...a}=r;i&&(s={cause:i}),Object.keys(a).length>0&&(n=a)}let o=_S(e,n);super(o,s);Xa(this,"cause",this.cause);Xa(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function xS(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Sp(t){return Object.freeze({...t,encode:e=>{let r=new Uint8Array(xS(e,t));return t.write(e,r,0),r}})}function Ip(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function ti(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function vp(t,e){if(ti(t)!==ti(e))throw new As(uf);if(ti(t)&&ti(e)&&t.fixedSize!==e.fixedSize)throw new As(lf,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!ti(t)&&!ti(e)&&t.maxSize!==e.maxSize)throw new As(ff,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Ap(t,e,r=0){if(e.length-r<=0)throw new As(af,{codecDescription:t})}function Tp(t,e,r,n=0){let s=r.length-n;if(s<e)throw new As(cf,{bytesLength:s,codecDescription:t,expected:e})}function RS(t,e,r,n){if(n<e||n>r)throw new As(df,{codecDescription:t,max:r,min:e,value:n})}function Op(t){return t?.endian!==1}function SS(t){return Sp({fixedSize:t.size,write(e,r,n){t.range&&RS(t.name,t.range[0],t.range[1],e);let s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,Op(t.config)),r.set(new Uint8Array(s),n),n+t.size}})}function IS(t){return Ip({fixedSize:t.size,read(e,r=0){Ap(t.name,e,r),Tp(t.name,t.size,e,r);let n=new DataView(vS(e,r,t.size));return[t.get(n,Op(t.config)),r+t.size]}})}function vS(t,e,r){let n=t.byteOffset+(e??0),s=r??t.byteLength;return t.buffer.slice(n,n+s)}var hf=(t={})=>SS({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),AS=(t={})=>IS({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),Np=(t={})=>vp(hf(t),AS(t));var ml=pr(mn(),1);var Bp="6.16.0";function TS(t,e,r){let n=e.split("|").map(o=>o.trim());for(let o=0;o<n.length;o++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}let s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=t,s}function pf(t,e,r){for(let n in e){let s=e[n],o=r?r[n]:null;o&&TS(s,o,n),Object.defineProperty(t,n,{enumerable:!0,value:s,writable:!1})}}function ri(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(r=>ri(r,e)).join(", ")+" ]";if(t instanceof Uint8Array){let r="0123456789abcdef",n="0x";for(let s=0;s<t.length;s++)n+=r[t[s]>>4],n+=r[t[s]&15];return n}if(typeof t=="object"&&typeof t.toJSON=="function")return ri(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{let r=Object.keys(t);return r.sort(),"{ "+r.map(n=>`${ri(n,e)}: ${ri(t[n],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function kp(t,e,r){let n=t;{let o=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${ri(r)}`);for(let i in r){if(i==="shortMessage")continue;let a=r[i];o.push(i+"="+ri(a))}}o.push(`code=${e}`),o.push(`version=${Bp}`),o.length&&(t+=" ("+o.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return pf(s,{code:e}),r&&Object.assign(s,r),s.shortMessage==null&&pf(s,{shortMessage:n}),s}function rr(t,e,r,n){if(!t)throw kp(e,r,n)}function ge(t,e,r,n){rr(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}var FB=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"\xE9".normalize("NFD")!=="e\u0301")throw new Error("broken");t.push(e)}catch{}return t},[]);function gf(t,e,r){if(r==null&&(r=""),t!==e){let n=r,s="new";r&&(n+=".",s+=" "+r),rr(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Cp(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){let n=new Uint8Array((t.length-2)/2),s=2;for(let o=0;o<n.length;o++)n[o]=parseInt(t.substring(s,s+2),16),s+=2;return n}ge(!1,"invalid BytesLike value",e||"value",t)}function et(t,e){return Cp(t,e,!1)}function mo(t,e){return Cp(t,e,!0)}function wn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function mf(t){return wn(t,!0)||t instanceof Uint8Array}var Pp="0123456789abcdef";function ze(t){let e=et(t),r="0x";for(let n=0;n<e.length;n++){let s=e[n];r+=Pp[(s&240)>>4]+Pp[s&15]}return r}function Xr(t){return"0x"+t.map(e=>ze(e).substring(2)).join("")}function Ts(t){return wn(t,!0)?(t.length-2)/2:et(t).length}function OS(t,e,r){let n=et(t);rr(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});let s=new Uint8Array(e);return s.fill(0),r?s.set(n,e-n.length):s.set(n,0),ze(s)}function zn(t,e){return OS(t,e,!0)}var yf=BigInt(0),qB=BigInt(1),ni=9007199254740991;function ar(t,e){switch(typeof t){case"bigint":return t;case"number":return ge(Number.isInteger(t),"underflow",e||"value",t),ge(t>=-ni&&t<=ni,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(r){ge(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}ge(!1,"invalid BigNumberish value",e||"value",t)}function wf(t,e){let r=ar(t,e);return rr(r>=yf,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}function rn(t,e){switch(typeof t){case"bigint":return ge(t>=-ni&&t<=ni,"overflow",e||"value",t),Number(t);case"number":return ge(Number.isInteger(t),"underflow",e||"value",t),ge(t>=-ni&&t<=ni,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return rn(BigInt(t),e)}catch(r){ge(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}ge(!1,"invalid numeric value",e||"value",t)}function Vc(t,e){let r=wf(t,"value"),n=r.toString(16);if(e==null)n.length%2&&(n="0"+n);else{let s=rn(e,"width");if(s===0&&r===yf)return"0x";for(rr(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});n.length<s*2;)n="0"+n}return"0x"+n}function lr(t,e){let r=wf(t,"value");if(r===yf){let o=e!=null?rn(e,"width"):0;return new Uint8Array(o)}let n=r.toString(16);if(n.length%2&&(n="0"+n),e!=null){let o=rn(e,"width");for(;n.length<o*2;)n="00"+n;rr(o*2===n.length,`value exceeds width (${o} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:t})}let s=new Uint8Array(n.length/2);for(let o=0;o<s.length;o++){let i=o*2;s[o]=parseInt(n.substring(i,i+2),16)}return s}function NS(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Lp(t,e,r){let n=0;for(let s=0;s<r;s++)n=n*256+t[e+s];return n}function Dp(t,e,r,n){let s=[];for(;r<e+1+n;){let o=Mp(t,r);s.push(o.result),r+=o.consumed,rr(r<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:s}}function Mp(t,e){rr(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});let r=n=>{rr(n<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:n})};if(t[e]>=248){let n=t[e]-247;r(e+1+n);let s=Lp(t,e+1,n);return r(e+1+n+s),Dp(t,e,e+1+n,n+s)}else if(t[e]>=192){let n=t[e]-192;return r(e+1+n),Dp(t,e,e+1,n)}else if(t[e]>=184){let n=t[e]-183;r(e+1+n);let s=Lp(t,e+1,n);r(e+1+n+s);let o=ze(t.slice(e+1+n,e+1+n+s));return{consumed:1+n+s,result:o}}else if(t[e]>=128){let n=t[e]-128;r(e+1+n);let s=ze(t.slice(e+1,e+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:NS(t[e])}}function yo(t){let e=et(t,"data"),r=Mp(e,0);return ge(r.consumed===e.length,"unexpected junk after rlp payload","data",t),r.result}function Up(t){let e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Fp(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(o){n=n.concat(Fp(o))}),n.length<=55)return n.unshift(192+n.length),n;let s=Up(n.length);return s.unshift(247+s.length),s.concat(n)}let e=Array.prototype.slice.call(et(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;let r=Up(e.length);return r.unshift(183+r.length),r.concat(e)}var zp="0123456789abcdef";function Fn(t){let e="0x";for(let r of Fp(t))e+=zp[r>>4],e+=zp[r&15];return e}function wa(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ea(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Kp(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");wa(t.outputLen),wa(t.blockLen)}function Zn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Wc(t,e){Ea(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Hc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Vp=t=>t instanceof Uint8Array;var Wp=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),qc=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Nn=(t,e)=>t<<32-e|t>>>e,BS=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!BS)throw new Error("Non little-endian hardware is not supported");function kS(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ns(t){if(typeof t=="string"&&(t=kS(t)),!Vp(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Hp(...t){let e=new Uint8Array(t.reduce((n,s)=>n+s.length,0)),r=0;return t.forEach(n=>{if(!Vp(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}var Os=class{clone(){return this._cloneInto()}},_k={}.toString;function si(t){let e=n=>t().update(Ns(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function qp(t){let e=(n,s)=>t(s).update(Ns(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function $p(t=32){if(Hc&&typeof Hc.getRandomValues=="function")return Hc.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}var $c=class extends Os{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Kp(e);let n=Ns(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(n.length>s?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return Zn(this),this.iHash.update(e),this}digestInto(e){Zn(this),Ea(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Ef=(t,e,r)=>new $c(t,e).update(r).digest();Ef.create=(t,e)=>new $c(t,e);function PS(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),o=BigInt(4294967295),i=Number(r>>s&o),a=Number(r&o),u=n?4:0,h=n?0:4;t.setUint32(e+u,i,n),t.setUint32(e+h,a,n)}var oi=class extends Os{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=qc(this.buffer)}update(e){Zn(this);let{view:r,buffer:n,blockLen:s}=this;e=Ns(e);let o=e.length;for(let i=0;i<o;){let a=Math.min(s-this.pos,o-i);if(a===s){let u=qc(e);for(;s<=o-i;i+=s)this.process(u,i);continue}n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Zn(this),Wc(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:o}=this,{pos:i}=this;r[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(n,0),i=0);for(let y=i;y<s;y++)r[y]=0;PS(n,s-8,BigInt(this.length*8),o),this.process(n,0);let a=qc(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=u/4,m=this.get();if(h>m.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<h;y++)a.setUint32(4*y,m[y],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:o,destroyed:i,pos:a}=this;return e.length=s,e.pos=a,e.finished=o,e.destroyed=i,s%r&&e.buffer.set(n),e}};var CS=(t,e,r)=>t&e^~t&r,LS=(t,e,r)=>t&e^t&r^e&r,DS=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ks=new Uint32Array(64),bf=class extends oi{constructor(){super(64,32,8,!1),this.A=Bs[0]|0,this.B=Bs[1]|0,this.C=Bs[2]|0,this.D=Bs[3]|0,this.E=Bs[4]|0,this.F=Bs[5]|0,this.G=Bs[6]|0,this.H=Bs[7]|0}get(){let{A:e,B:r,C:n,D:s,E:o,F:i,G:a,H:u}=this;return[e,r,n,s,o,i,a,u]}set(e,r,n,s,o,i,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=u|0}process(e,r){for(let y=0;y<16;y++,r+=4)ks[y]=e.getUint32(r,!1);for(let y=16;y<64;y++){let O=ks[y-15],S=ks[y-2],R=Nn(O,7)^Nn(O,18)^O>>>3,A=Nn(S,17)^Nn(S,19)^S>>>10;ks[y]=A+ks[y-7]+R+ks[y-16]|0}let{A:n,B:s,C:o,D:i,E:a,F:u,G:h,H:m}=this;for(let y=0;y<64;y++){let O=Nn(a,6)^Nn(a,11)^Nn(a,25),S=m+O+CS(a,u,h)+DS[y]+ks[y]|0,A=(Nn(n,2)^Nn(n,13)^Nn(n,22))+LS(n,s,o)|0;m=h,h=u,u=a,a=i+S|0,i=o,o=s,s=n,n=S+A|0}n=n+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,u=u+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(n,s,o,i,a,u,h,m)}roundClean(){ks.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var jc=si(()=>new bf);var Gc=BigInt(4294967295),_f=BigInt(32);function jp(t,e=!1){return e?{h:Number(t&Gc),l:Number(t>>_f&Gc)}:{h:Number(t>>_f&Gc)|0,l:Number(t&Gc)|0}}function xf(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){let{h:o,l:i}=jp(t[s],e);[r[s],n[s]]=[o,i]}return[r,n]}var MS=(t,e)=>BigInt(t>>>0)<<_f|BigInt(e>>>0),US=(t,e,r)=>t>>>r,zS=(t,e,r)=>t<<32-r|e>>>r,FS=(t,e,r)=>t>>>r|e<<32-r,KS=(t,e,r)=>t<<32-r|e>>>r,VS=(t,e,r)=>t<<64-r|e>>>r-32,WS=(t,e,r)=>t>>>r-32|e<<64-r,HS=(t,e)=>e,qS=(t,e)=>t,Rf=(t,e,r)=>t<<r|e>>>32-r,Sf=(t,e,r)=>e<<r|t>>>32-r,If=(t,e,r)=>e<<r-32|t>>>64-r,vf=(t,e,r)=>t<<r-32|e>>>64-r;function $S(t,e,r,n){let s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}var jS=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),GS=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,YS=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),JS=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,ZS=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),XS=(t,e,r,n,s,o)=>e+r+n+s+o+(t/2**32|0)|0;var QS={fromBig:jp,split:xf,toBig:MS,shrSH:US,shrSL:zS,rotrSH:FS,rotrSL:KS,rotrBH:VS,rotrBL:WS,rotr32H:HS,rotr32L:qS,rotlSH:Rf,rotlSL:Sf,rotlBH:If,rotlBL:vf,add:$S,add3L:jS,add3H:GS,add4L:YS,add4H:JS,add5H:XS,add5L:ZS},Ge=QS;var[eI,tI]=Ge.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ps=new Uint32Array(80),Cs=new Uint32Array(80),Af=class extends oi{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:s,Ch:o,Cl:i,Dh:a,Dl:u,Eh:h,El:m,Fh:y,Fl:O,Gh:S,Gl:R,Hh:A,Hl:I}=this;return[e,r,n,s,o,i,a,u,h,m,y,O,S,R,A,I]}set(e,r,n,s,o,i,a,u,h,m,y,O,S,R,A,I){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=o|0,this.Cl=i|0,this.Dh=a|0,this.Dl=u|0,this.Eh=h|0,this.El=m|0,this.Fh=y|0,this.Fl=O|0,this.Gh=S|0,this.Gl=R|0,this.Hh=A|0,this.Hl=I|0}process(e,r){for(let M=0;M<16;M++,r+=4)Ps[M]=e.getUint32(r),Cs[M]=e.getUint32(r+=4);for(let M=16;M<80;M++){let K=Ps[M-15]|0,Z=Cs[M-15]|0,V=Ge.rotrSH(K,Z,1)^Ge.rotrSH(K,Z,8)^Ge.shrSH(K,Z,7),Y=Ge.rotrSL(K,Z,1)^Ge.rotrSL(K,Z,8)^Ge.shrSL(K,Z,7),te=Ps[M-2]|0,j=Cs[M-2]|0,ce=Ge.rotrSH(te,j,19)^Ge.rotrBH(te,j,61)^Ge.shrSH(te,j,6),se=Ge.rotrSL(te,j,19)^Ge.rotrBL(te,j,61)^Ge.shrSL(te,j,6),de=Ge.add4L(Y,se,Cs[M-7],Cs[M-16]),b=Ge.add4H(de,V,ce,Ps[M-7],Ps[M-16]);Ps[M]=b|0,Cs[M]=de|0}let{Ah:n,Al:s,Bh:o,Bl:i,Ch:a,Cl:u,Dh:h,Dl:m,Eh:y,El:O,Fh:S,Fl:R,Gh:A,Gl:I,Hh:k,Hl:z}=this;for(let M=0;M<80;M++){let K=Ge.rotrSH(y,O,14)^Ge.rotrSH(y,O,18)^Ge.rotrBH(y,O,41),Z=Ge.rotrSL(y,O,14)^Ge.rotrSL(y,O,18)^Ge.rotrBL(y,O,41),V=y&S^~y&A,Y=O&R^~O&I,te=Ge.add5L(z,Z,Y,tI[M],Cs[M]),j=Ge.add5H(te,k,K,V,eI[M],Ps[M]),ce=te|0,se=Ge.rotrSH(n,s,28)^Ge.rotrBH(n,s,34)^Ge.rotrBH(n,s,39),de=Ge.rotrSL(n,s,28)^Ge.rotrBL(n,s,34)^Ge.rotrBL(n,s,39),b=n&o^n&a^o&a,c=s&i^s&u^i&u;k=A|0,z=I|0,A=S|0,I=R|0,S=y|0,R=O|0,{h:y,l:O}=Ge.add(h|0,m|0,j|0,ce|0),h=a|0,m=u|0,a=o|0,u=i|0,o=n|0,i=s|0;let l=Ge.add3L(ce,de,c);n=Ge.add3H(l,j,se,b),s=l|0}({h:n,l:s}=Ge.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:o,l:i}=Ge.add(this.Bh|0,this.Bl|0,o|0,i|0),{h:a,l:u}=Ge.add(this.Ch|0,this.Cl|0,a|0,u|0),{h,l:m}=Ge.add(this.Dh|0,this.Dl|0,h|0,m|0),{h:y,l:O}=Ge.add(this.Eh|0,this.El|0,y|0,O|0),{h:S,l:R}=Ge.add(this.Fh|0,this.Fl|0,S|0,R|0),{h:A,l:I}=Ge.add(this.Gh|0,this.Gl|0,A|0,I|0),{h:k,l:z}=Ge.add(this.Hh|0,this.Hl|0,k|0,z|0),this.set(n,s,o,i,a,u,h,m,y,O,S,R,A,I,k,z)}roundClean(){Ps.fill(0),Cs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Gp=si(()=>new Af);function rI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}var Yp=rI(),Fk=Yp.crypto||Yp.msCrypto;function Tf(t){switch(t){case"sha256":return jc.create();case"sha512":return Gp.create()}ge(!1,"invalid hashing algorithm name","algorithm",t)}var[Xp,Qp,eg]=[[],[],[]],nI=BigInt(0),ba=BigInt(1),sI=BigInt(2),oI=BigInt(7),iI=BigInt(256),aI=BigInt(113);for(let t=0,e=ba,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Xp.push(2*(5*n+r)),Qp.push((t+1)*(t+2)/2%64);let s=nI;for(let o=0;o<7;o++)e=(e<<ba^(e>>oI)*aI)%iI,e&sI&&(s^=ba<<(ba<<BigInt(o))-ba);eg.push(s)}var[cI,uI]=xf(eg,!0),Jp=(t,e,r)=>r>32?If(t,e,r):Rf(t,e,r),Zp=(t,e,r)=>r>32?vf(t,e,r):Sf(t,e,r);function lI(t,e=24){let r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let i=0;i<10;i++)r[i]=t[i]^t[i+10]^t[i+20]^t[i+30]^t[i+40];for(let i=0;i<10;i+=2){let a=(i+8)%10,u=(i+2)%10,h=r[u],m=r[u+1],y=Jp(h,m,1)^r[a],O=Zp(h,m,1)^r[a+1];for(let S=0;S<50;S+=10)t[i+S]^=y,t[i+S+1]^=O}let s=t[2],o=t[3];for(let i=0;i<24;i++){let a=Qp[i],u=Jp(s,o,a),h=Zp(s,o,a),m=Xp[i];s=t[m],o=t[m+1],t[m]=u,t[m+1]=h}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)r[a]=t[i+a];for(let a=0;a<10;a++)t[i+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=cI[n],t[1]^=uI[n]}r.fill(0)}var Yc=class t extends Os{constructor(e,r,n,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,wa(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Wp(this.state)}keccak(){lI(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Zn(this);let{blockLen:r,state:n}=this;e=Ns(e);let s=e.length;for(let o=0;o<s;){let i=Math.min(r-this.pos,s-o);for(let a=0;a<i;a++)n[this.pos++]^=e[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Zn(this,!1),Ea(e),this.finish();let r=this.state,{blockLen:n}=this;for(let s=0,o=e.length;s<o;){this.posOut>=n&&this.keccak();let i=Math.min(n-this.posOut,o-s);e.set(r.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return wa(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Wc(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:r,suffix:n,outputLen:s,rounds:o,enableXOF:i}=this;return e||(e=new t(r,n,s,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}},Ls=(t,e,r)=>si(()=>new Yc(e,t,r)),qk=Ls(6,144,224/8),$k=Ls(6,136,256/8),jk=Ls(6,104,384/8),Gk=Ls(6,72,512/8),Yk=Ls(1,144,224/8),tg=Ls(1,136,256/8),Jk=Ls(1,104,384/8),Zk=Ls(1,72,512/8),rg=(t,e,r)=>qp((n={})=>new Yc(e,t,n.dkLen===void 0?r:n.dkLen,!0)),Xk=rg(31,168,128/8),Qk=rg(31,136,256/8);var ng=!1,sg=function(t){return tg(t)},og=sg;function En(t){let e=et(t,"data");return ze(og(e))}En._=sg;En.lock=function(){ng=!0};En.register=function(t){if(ng)throw new TypeError("keccak256 is locked");og=t};Object.freeze(En);var ig=function(t){return Tf("sha256").update(t).digest()},ag=function(t){return Tf("sha512").update(t).digest()},cg=ig,ug=ag,lg=!1,fg=!1;function Ds(t){let e=et(t,"data");return ze(cg(e))}Ds._=ig;Ds.lock=function(){lg=!0};Ds.register=function(t){if(lg)throw new Error("sha256 is locked");cg=t};Object.freeze(Ds);function Jc(t){let e=et(t,"data");return ze(ug(e))}Jc._=ag;Jc.lock=function(){fg=!0};Jc.register=function(t){if(fg)throw new Error("sha512 is locked");ug=t};Object.freeze(Ds);var kf={};wl(kf,{bitGet:()=>yI,bitLen:()=>mI,bitMask:()=>_a,bitSet:()=>wI,bytesToHex:()=>wo,bytesToNumberBE:()=>Xn,bytesToNumberLE:()=>Qc,concatBytes:()=>ii,createHmacDrbg:()=>Bf,ensureBytes:()=>nn,equalBytes:()=>pI,hexToBytes:()=>Eo,hexToNumber:()=>Nf,numberToBytesBE:()=>Ms,numberToBytesLE:()=>eu,numberToHexUnpadded:()=>pg,numberToVarBytesBE:()=>hI,utf8ToBytes:()=>gI,validateObject:()=>Us});var hg=BigInt(0),Zc=BigInt(1),fI=BigInt(2),Xc=t=>t instanceof Uint8Array,dI=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wo(t){if(!Xc(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=dI[t[r]];return e}function pg(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Nf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Eo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){let s=n*2,o=t.slice(s,s+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");r[n]=i}return r}function Xn(t){return Nf(wo(t))}function Qc(t){if(!Xc(t))throw new Error("Uint8Array expected");return Nf(wo(Uint8Array.from(t).reverse()))}function Ms(t,e){return Eo(t.toString(16).padStart(e*2,"0"))}function eu(t,e){return Ms(t,e).reverse()}function hI(t){return Eo(pg(t))}function nn(t,e,r){let n;if(typeof e=="string")try{n=Eo(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(Xc(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function ii(...t){let e=new Uint8Array(t.reduce((n,s)=>n+s.length,0)),r=0;return t.forEach(n=>{if(!Xc(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}function pI(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function gI(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function mI(t){let e;for(e=0;t>hg;t>>=Zc,e+=1);return e}function yI(t,e){return t>>BigInt(e)&Zc}var wI=(t,e,r)=>t|(r?Zc:hg)<<BigInt(e),_a=t=>(fI<<BigInt(t-1))-Zc,Of=t=>new Uint8Array(t),dg=t=>Uint8Array.from(t);function Bf(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Of(t),s=Of(t),o=0,i=()=>{n.fill(1),s.fill(0),o=0},a=(...y)=>r(s,n,...y),u=(y=Of())=>{s=a(dg([0]),y),n=a(),y.length!==0&&(s=a(dg([1]),y),n=a())},h=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let y=0,O=[];for(;y<e;){n=a();let S=n.slice();O.push(S),y+=n.length}return ii(...O)};return(y,O)=>{i(),u(y);let S;for(;!(S=O(h()));)u();return i(),S}}var EI={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Us(t,e,r={}){let n=(s,o,i)=>{let a=EI[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let u=t[s];if(!(i&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${o}`)};for(let[s,o]of Object.entries(e))n(s,o,!1);for(let[s,o]of Object.entries(r))n(s,o,!0);return t}var hr=BigInt(0),nr=BigInt(1),bo=BigInt(2),bI=BigInt(3),Pf=BigInt(4),gg=BigInt(5),mg=BigInt(8),_I=BigInt(9),xI=BigInt(16);function Or(t,e){let r=t%e;return r>=hr?r:e+r}function RI(t,e,r){if(r<=hr||e<hr)throw new Error("Expected power/modulo > 0");if(r===nr)return hr;let n=nr;for(;e>hr;)e&nr&&(n=n*t%r),t=t*t%r,e>>=nr;return n}function sn(t,e,r){let n=t;for(;e-- >hr;)n*=n,n%=r;return n}function tu(t,e){if(t===hr||e<=hr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Or(t,e),n=e,s=hr,o=nr,i=nr,a=hr;for(;r!==hr;){let h=n/r,m=n%r,y=s-i*h,O=o-a*h;n=r,r=m,s=i,o=a,i=y,a=O}if(n!==nr)throw new Error("invert: does not exist");return Or(s,e)}function SI(t){let e=(t-nr)/bo,r,n,s;for(r=t-nr,n=0;r%bo===hr;r/=bo,n++);for(s=bo;s<t&&RI(s,e,t)!==t-nr;s++);if(n===1){let i=(t+nr)/Pf;return function(u,h){let m=u.pow(h,i);if(!u.eql(u.sqr(m),h))throw new Error("Cannot find square root");return m}}let o=(r+nr)/bo;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let h=n,m=a.pow(a.mul(a.ONE,s),r),y=a.pow(u,o),O=a.pow(u,r);for(;!a.eql(O,a.ONE);){if(a.eql(O,a.ZERO))return a.ZERO;let S=1;for(let A=a.sqr(O);S<h&&!a.eql(A,a.ONE);S++)A=a.sqr(A);let R=a.pow(m,nr<<BigInt(h-S-1));m=a.sqr(R),y=a.mul(y,R),O=a.mul(O,m),h=S}return y}}function II(t){if(t%Pf===bI){let e=(t+nr)/Pf;return function(n,s){let o=n.pow(s,e);if(!n.eql(n.sqr(o),s))throw new Error("Cannot find square root");return o}}if(t%mg===gg){let e=(t-gg)/mg;return function(n,s){let o=n.mul(s,bo),i=n.pow(o,e),a=n.mul(s,i),u=n.mul(n.mul(a,bo),i),h=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(h),s))throw new Error("Cannot find square root");return h}}return t%xI,SI(t)}var vI=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Cf(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=vI.reduce((n,s)=>(n[s]="function",n),e);return Us(t,r)}function AI(t,e,r){if(r<hr)throw new Error("Expected power > 0");if(r===hr)return t.ONE;if(r===nr)return e;let n=t.ONE,s=e;for(;r>hr;)r&nr&&(n=t.mul(n,s)),s=t.sqr(s),r>>=nr;return n}function TI(t,e){let r=new Array(e.length),n=e.reduce((o,i,a)=>t.is0(i)?o:(r[a]=o,t.mul(o,i)),t.ONE),s=t.inv(n);return e.reduceRight((o,i,a)=>t.is0(i)?o:(r[a]=t.mul(o,r[a]),t.mul(o,i)),s),r}function Lf(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function yg(t,e,r=!1,n={}){if(t<=hr)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:s,nByteLength:o}=Lf(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let i=II(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:o,MASK:_a(s),ZERO:hr,ONE:nr,create:u=>Or(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return hr<=u&&u<t},is0:u=>u===hr,isOdd:u=>(u&nr)===nr,neg:u=>Or(-u,t),eql:(u,h)=>u===h,sqr:u=>Or(u*u,t),add:(u,h)=>Or(u+h,t),sub:(u,h)=>Or(u-h,t),mul:(u,h)=>Or(u*h,t),pow:(u,h)=>AI(a,u,h),div:(u,h)=>Or(u*tu(h,t),t),sqrN:u=>u*u,addN:(u,h)=>u+h,subN:(u,h)=>u-h,mulN:(u,h)=>u*h,inv:u=>tu(u,t),sqrt:n.sqrt||(u=>i(a,u)),invertBatch:u=>TI(a,u),cmov:(u,h,m)=>m?h:u,toBytes:u=>r?eu(u,o):Ms(u,o),fromBytes:u=>{if(u.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${u.length}`);return r?Qc(u):Xn(u)}});return Object.freeze(a)}function wg(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function Df(t){let e=wg(t);return e+Math.ceil(e/2)}function Eg(t,e,r=!1){let n=t.length,s=wg(e),o=Df(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let i=r?Xn(t):Qc(t),a=Or(i,e-nr)+nr;return r?eu(a,s):Ms(a,s)}var NI=BigInt(0),Mf=BigInt(1);function bg(t,e){let r=(s,o)=>{let i=o.negate();return s?i:o},n=s=>{let o=Math.ceil(e/s)+1,i=2**(s-1);return{windows:o,windowSize:i}};return{constTimeNegate:r,unsafeLadder(s,o){let i=t.ZERO,a=s;for(;o>NI;)o&Mf&&(i=i.add(a)),a=a.double(),o>>=Mf;return i},precomputeWindow(s,o){let{windows:i,windowSize:a}=n(o),u=[],h=s,m=h;for(let y=0;y<i;y++){m=h,u.push(m);for(let O=1;O<a;O++)m=m.add(h),u.push(m);h=m.double()}return u},wNAF(s,o,i){let{windows:a,windowSize:u}=n(s),h=t.ZERO,m=t.BASE,y=BigInt(2**s-1),O=2**s,S=BigInt(s);for(let R=0;R<a;R++){let A=R*u,I=Number(i&y);i>>=S,I>u&&(I-=O,i+=Mf);let k=A,z=A+Math.abs(I)-1,M=R%2!==0,K=I<0;I===0?m=m.add(r(M,o[k])):h=h.add(r(K,o[z]))}return{p:h,f:m}},wNAFCached(s,o,i,a){let u=s._WINDOW_SIZE||1,h=o.get(s);return h||(h=this.precomputeWindow(s,u),u!==1&&o.set(s,a(h))),this.wNAF(u,h,i)}}}function Uf(t){return Cf(t.Fp),Us(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Lf(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function BI(t){let e=Uf(t);Us(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:kI,hexToBytes:PI}=kf,_o={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=_o;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:kI(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=_o,r=typeof t=="string"?PI(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:s,l:o}=_o._parseInt(r.subarray(2)),{d:i,l:a}=_o._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:i}},hexFromSig(t){let e=h=>Number.parseInt(h[0],16)&8?"00"+h:h,r=h=>{let m=h.toString(16);return m.length&1?`0${m}`:m},n=e(r(t.s)),s=e(r(t.r)),o=n.length/2,i=s.length/2,a=r(o),u=r(i);return`30${r(i+o+4)}02${u}${s}02${a}${n}`}},Qn=BigInt(0),bn=BigInt(1),pP=BigInt(2),_g=BigInt(3),gP=BigInt(4);function CI(t){let e=BI(t),{Fp:r}=e,n=e.toBytes||((R,A,I)=>{let k=A.toAffine();return ii(Uint8Array.from([4]),r.toBytes(k.x),r.toBytes(k.y))}),s=e.fromBytes||(R=>{let A=R.subarray(1),I=r.fromBytes(A.subarray(0,r.BYTES)),k=r.fromBytes(A.subarray(r.BYTES,2*r.BYTES));return{x:I,y:k}});function o(R){let{a:A,b:I}=e,k=r.sqr(R),z=r.mul(k,R);return r.add(r.add(z,r.mul(R,A)),I)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function i(R){return typeof R=="bigint"&&Qn<R&&R<e.n}function a(R){if(!i(R))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(R){let{allowedPrivateKeyLengths:A,nByteLength:I,wrapPrivateKey:k,n:z}=e;if(A&&typeof R!="bigint"){if(R instanceof Uint8Array&&(R=wo(R)),typeof R!="string"||!A.includes(R.length))throw new Error("Invalid key");R=R.padStart(I*2,"0")}let M;try{M=typeof R=="bigint"?R:Xn(nn("private key",R,I))}catch{throw new Error(`private key must be ${I} bytes, hex or bigint, not ${typeof R}`)}return k&&(M=Or(M,z)),a(M),M}let h=new Map;function m(R){if(!(R instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(A,I,k){if(this.px=A,this.py=I,this.pz=k,A==null||!r.isValid(A))throw new Error("x required");if(I==null||!r.isValid(I))throw new Error("y required");if(k==null||!r.isValid(k))throw new Error("z required")}static fromAffine(A){let{x:I,y:k}=A||{};if(!A||!r.isValid(I)||!r.isValid(k))throw new Error("invalid affine point");if(A instanceof y)throw new Error("projective point not allowed");let z=M=>r.eql(M,r.ZERO);return z(I)&&z(k)?y.ZERO:new y(I,k,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){let I=r.invertBatch(A.map(k=>k.pz));return A.map((k,z)=>k.toAffine(I[z])).map(y.fromAffine)}static fromHex(A){let I=y.fromAffine(s(nn("pointHex",A)));return I.assertValidity(),I}static fromPrivateKey(A){return y.BASE.multiply(u(A))}_setWindowSize(A){this._WINDOW_SIZE=A,h.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:A,y:I}=this.toAffine();if(!r.isValid(A)||!r.isValid(I))throw new Error("bad point: x or y not FE");let k=r.sqr(I),z=o(A);if(!r.eql(k,z))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:A}=this.toAffine();if(r.isOdd)return!r.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){m(A);let{px:I,py:k,pz:z}=this,{px:M,py:K,pz:Z}=A,V=r.eql(r.mul(I,Z),r.mul(M,z)),Y=r.eql(r.mul(k,Z),r.mul(K,z));return V&&Y}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){let{a:A,b:I}=e,k=r.mul(I,_g),{px:z,py:M,pz:K}=this,Z=r.ZERO,V=r.ZERO,Y=r.ZERO,te=r.mul(z,z),j=r.mul(M,M),ce=r.mul(K,K),se=r.mul(z,M);return se=r.add(se,se),Y=r.mul(z,K),Y=r.add(Y,Y),Z=r.mul(A,Y),V=r.mul(k,ce),V=r.add(Z,V),Z=r.sub(j,V),V=r.add(j,V),V=r.mul(Z,V),Z=r.mul(se,Z),Y=r.mul(k,Y),ce=r.mul(A,ce),se=r.sub(te,ce),se=r.mul(A,se),se=r.add(se,Y),Y=r.add(te,te),te=r.add(Y,te),te=r.add(te,ce),te=r.mul(te,se),V=r.add(V,te),ce=r.mul(M,K),ce=r.add(ce,ce),te=r.mul(ce,se),Z=r.sub(Z,te),Y=r.mul(ce,j),Y=r.add(Y,Y),Y=r.add(Y,Y),new y(Z,V,Y)}add(A){m(A);let{px:I,py:k,pz:z}=this,{px:M,py:K,pz:Z}=A,V=r.ZERO,Y=r.ZERO,te=r.ZERO,j=e.a,ce=r.mul(e.b,_g),se=r.mul(I,M),de=r.mul(k,K),b=r.mul(z,Z),c=r.add(I,k),l=r.add(M,K);c=r.mul(c,l),l=r.add(se,de),c=r.sub(c,l),l=r.add(I,z);let p=r.add(M,Z);return l=r.mul(l,p),p=r.add(se,b),l=r.sub(l,p),p=r.add(k,z),V=r.add(K,Z),p=r.mul(p,V),V=r.add(de,b),p=r.sub(p,V),te=r.mul(j,l),V=r.mul(ce,b),te=r.add(V,te),V=r.sub(de,te),te=r.add(de,te),Y=r.mul(V,te),de=r.add(se,se),de=r.add(de,se),b=r.mul(j,b),l=r.mul(ce,l),de=r.add(de,b),b=r.sub(se,b),b=r.mul(j,b),l=r.add(l,b),se=r.mul(de,l),Y=r.add(Y,se),se=r.mul(p,l),V=r.mul(c,V),V=r.sub(V,se),se=r.mul(c,de),te=r.mul(p,te),te=r.add(te,se),new y(V,Y,te)}subtract(A){return this.add(A.negate())}is0(){return this.equals(y.ZERO)}wNAF(A){return S.wNAFCached(this,h,A,I=>{let k=r.invertBatch(I.map(z=>z.pz));return I.map((z,M)=>z.toAffine(k[M])).map(y.fromAffine)})}multiplyUnsafe(A){let I=y.ZERO;if(A===Qn)return I;if(a(A),A===bn)return this;let{endo:k}=e;if(!k)return S.unsafeLadder(this,A);let{k1neg:z,k1:M,k2neg:K,k2:Z}=k.splitScalar(A),V=I,Y=I,te=this;for(;M>Qn||Z>Qn;)M&bn&&(V=V.add(te)),Z&bn&&(Y=Y.add(te)),te=te.double(),M>>=bn,Z>>=bn;return z&&(V=V.negate()),K&&(Y=Y.negate()),Y=new y(r.mul(Y.px,k.beta),Y.py,Y.pz),V.add(Y)}multiply(A){a(A);let I=A,k,z,{endo:M}=e;if(M){let{k1neg:K,k1:Z,k2neg:V,k2:Y}=M.splitScalar(I),{p:te,f:j}=this.wNAF(Z),{p:ce,f:se}=this.wNAF(Y);te=S.constTimeNegate(K,te),ce=S.constTimeNegate(V,ce),ce=new y(r.mul(ce.px,M.beta),ce.py,ce.pz),k=te.add(ce),z=j.add(se)}else{let{p:K,f:Z}=this.wNAF(I);k=K,z=Z}return y.normalizeZ([k,z])[0]}multiplyAndAddUnsafe(A,I,k){let z=y.BASE,M=(Z,V)=>V===Qn||V===bn||!Z.equals(z)?Z.multiplyUnsafe(V):Z.multiply(V),K=M(this,I).add(M(A,k));return K.is0()?void 0:K}toAffine(A){let{px:I,py:k,pz:z}=this,M=this.is0();A==null&&(A=M?r.ONE:r.inv(z));let K=r.mul(I,A),Z=r.mul(k,A),V=r.mul(z,A);if(M)return{x:r.ZERO,y:r.ZERO};if(!r.eql(V,r.ONE))throw new Error("invZ was invalid");return{x:K,y:Z}}isTorsionFree(){let{h:A,isTorsionFree:I}=e;if(A===bn)return!0;if(I)return I(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:A,clearCofactor:I}=e;return A===bn?this:I?I(y,this):this.multiplyUnsafe(e.h)}toRawBytes(A=!0){return this.assertValidity(),n(y,this,A)}toHex(A=!0){return wo(this.toRawBytes(A))}}y.BASE=new y(e.Gx,e.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);let O=e.nBitLength,S=bg(y,e.endo?Math.ceil(O/2):O);return{CURVE:e,ProjectivePoint:y,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:i}}function LI(t){let e=Uf(t);return Us(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function xg(t){let e=LI(t),{Fp:r,n}=e,s=r.BYTES+1,o=2*r.BYTES+1;function i(l){return Qn<l&&l<r.ORDER}function a(l){return Or(l,n)}function u(l){return tu(l,n)}let{ProjectivePoint:h,normPrivateKeyToScalar:m,weierstrassEquation:y,isWithinCurveOrder:O}=CI({...e,toBytes(l,p,w){let x=p.toAffine(),N=r.toBytes(x.x),L=ii;return w?L(Uint8Array.from([p.hasEvenY()?2:3]),N):L(Uint8Array.from([4]),N,r.toBytes(x.y))},fromBytes(l){let p=l.length,w=l[0],x=l.subarray(1);if(p===s&&(w===2||w===3)){let N=Xn(x);if(!i(N))throw new Error("Point is not on curve");let L=y(N),v=r.sqrt(L),d=(v&bn)===bn;return(w&1)===1!==d&&(v=r.neg(v)),{x:N,y:v}}else if(p===o&&w===4){let N=r.fromBytes(x.subarray(0,r.BYTES)),L=r.fromBytes(x.subarray(r.BYTES,2*r.BYTES));return{x:N,y:L}}else throw new Error(`Point of length ${p} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),S=l=>wo(Ms(l,e.nByteLength));function R(l){let p=n>>bn;return l>p}function A(l){return R(l)?a(-l):l}let I=(l,p,w)=>Xn(l.slice(p,w));class k{constructor(p,w,x){this.r=p,this.s=w,this.recovery=x,this.assertValidity()}static fromCompact(p){let w=e.nByteLength;return p=nn("compactSignature",p,w*2),new k(I(p,0,w),I(p,w,2*w))}static fromDER(p){let{r:w,s:x}=_o.toSig(nn("DER",p));return new k(w,x)}assertValidity(){if(!O(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!O(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(p){return new k(this.r,this.s,p)}recoverPublicKey(p){let{r:w,s:x,recovery:N}=this,L=Y(nn("msgHash",p));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let v=N===2||N===3?w+e.n:w;if(v>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let d=(N&1)===0?"02":"03",B=h.fromHex(d+S(v)),X=u(v),oe=a(-L*X),he=a(x*X),we=h.BASE.multiplyAndAddUnsafe(B,oe,he);if(!we)throw new Error("point at infinify");return we.assertValidity(),we}hasHighS(){return R(this.s)}normalizeS(){return this.hasHighS()?new k(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Eo(this.toDERHex())}toDERHex(){return _o.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Eo(this.toCompactHex())}toCompactHex(){return S(this.r)+S(this.s)}}let z={isValidPrivateKey(l){try{return m(l),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{let l=Df(e.n);return Eg(e.randomBytes(l),e.n)},precompute(l=8,p=h.BASE){return p._setWindowSize(l),p.multiply(BigInt(3)),p}};function M(l,p=!0){return h.fromPrivateKey(l).toRawBytes(p)}function K(l){let p=l instanceof Uint8Array,w=typeof l=="string",x=(p||w)&&l.length;return p?x===s||x===o:w?x===2*s||x===2*o:l instanceof h}function Z(l,p,w=!0){if(K(l))throw new Error("first arg must be private key");if(!K(p))throw new Error("second arg must be public key");return h.fromHex(p).multiply(m(l)).toRawBytes(w)}let V=e.bits2int||function(l){let p=Xn(l),w=l.length*8-e.nBitLength;return w>0?p>>BigInt(w):p},Y=e.bits2int_modN||function(l){return a(V(l))},te=_a(e.nBitLength);function j(l){if(typeof l!="bigint")throw new Error("bigint expected");if(!(Qn<=l&&l<te))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ms(l,e.nByteLength)}function ce(l,p,w=se){if(["recovered","canonical"].some(ve=>ve in w))throw new Error("sign() legacy options not supported");let{hash:x,randomBytes:N}=e,{lowS:L,prehash:v,extraEntropy:d}=w;L==null&&(L=!0),l=nn("msgHash",l),v&&(l=nn("prehashed msgHash",x(l)));let B=Y(l),X=m(p),oe=[j(X),j(B)];if(d!=null){let ve=d===!0?N(r.BYTES):d;oe.push(nn("extraEntropy",ve))}let he=ii(...oe),we=B;function Ne(ve){let rt=V(ve);if(!O(rt))return;let Xe=u(rt),$e=h.BASE.multiply(rt).toAffine(),jr=a($e.x);if(jr===Qn)return;let bt=a(Xe*a(we+jr*X));if(bt===Qn)return;let Nt=($e.x===jr?0:2)|Number($e.y&bn),ws=bt;return L&&R(bt)&&(ws=A(bt),Nt^=1),new k(jr,ws,Nt)}return{seed:he,k2sig:Ne}}let se={lowS:e.lowS,prehash:!1},de={lowS:e.lowS,prehash:!1};function b(l,p,w=se){let{seed:x,k2sig:N}=ce(l,p,w),L=e;return Bf(L.hash.outputLen,L.nByteLength,L.hmac)(x,N)}h.BASE._setWindowSize(8);function c(l,p,w,x=de){let N=l;if(p=nn("msgHash",p),w=nn("publicKey",w),"strict"in x)throw new Error("options.strict was renamed to lowS");let{lowS:L,prehash:v}=x,d,B;try{if(typeof N=="string"||N instanceof Uint8Array)try{d=k.fromDER(N)}catch($e){if(!($e instanceof _o.Err))throw $e;d=k.fromCompact(N)}else if(typeof N=="object"&&typeof N.r=="bigint"&&typeof N.s=="bigint"){let{r:$e,s:jr}=N;d=new k($e,jr)}else throw new Error("PARSE");B=h.fromHex(w)}catch($e){if($e.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(L&&d.hasHighS())return!1;v&&(p=e.hash(p));let{r:X,s:oe}=d,he=Y(p),we=u(oe),Ne=a(he*we),ve=a(X*we),rt=h.BASE.multiplyAndAddUnsafe(B,Ne,ve)?.toAffine();return rt?a(rt.x)===X:!1}return{CURVE:e,getPublicKey:M,getSharedSecret:Z,sign:b,verify:c,ProjectivePoint:h,Signature:k,utils:z}}function DI(t){return{hash:t,hmac:(e,...r)=>Ef(t,e,Hp(...r)),randomBytes:$p}}function Rg(t,e){let r=n=>xg({...t,...DI(n)});return Object.freeze({...r(e),create:r})}var vg=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Sg=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MI=BigInt(1),zf=BigInt(2),Ig=(t,e)=>(t+e/zf)/e;function UI(t){let e=vg,r=BigInt(3),n=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),a=BigInt(44),u=BigInt(88),h=t*t*t%e,m=h*h*t%e,y=sn(m,r,e)*m%e,O=sn(y,r,e)*m%e,S=sn(O,zf,e)*h%e,R=sn(S,s,e)*S%e,A=sn(R,o,e)*R%e,I=sn(A,a,e)*A%e,k=sn(I,u,e)*I%e,z=sn(k,a,e)*A%e,M=sn(z,r,e)*m%e,K=sn(M,i,e)*R%e,Z=sn(K,n,e)*h%e,V=sn(Z,zf,e);if(!Ff.eql(Ff.sqr(V),t))throw new Error("Cannot find square root");return V}var Ff=yg(vg,void 0,void 0,{sqrt:UI}),es=Rg({a:BigInt(0),b:BigInt(7),Fp:Ff,n:Sg,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=Sg,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-MI*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,i=BigInt("0x100000000000000000000000000000000"),a=Ig(o*t,e),u=Ig(-n*t,e),h=Or(t-a*r-u*s,e),m=Or(-a*n-u*o,e),y=h>i,O=m>i;if(y&&(h=e-h),O&&(m=e-m),h>i||m>i)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:y,k1:h,k2neg:O,k2:m}}}},jc),SP=BigInt(0);var IP=es.ProjectivePoint;var Kf="0x0000000000000000000000000000000000000000";var ru="0x0000000000000000000000000000000000000000000000000000000000000000";var Ag=BigInt(0),Tg=BigInt(1),Wf=BigInt(2),Og=BigInt(27),Ng=BigInt(28),nu=BigInt(35),Bg=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),zI=Bg/Wf,FI=Symbol.for("nodejs.util.inspect.custom"),xo={};function Vf(t){return zn(lr(t),32)}var ai,Kn,ci,zs,_n=class _n{constructor(e,r,n,s){xt(this,ai);xt(this,Kn);xt(this,ci);xt(this,zs);gf(e,xo,"Signature"),Te(this,ai,r),Te(this,Kn,n),Te(this,ci,s),Te(this,zs,null)}get r(){return Ze(this,ai)}set r(e){ge(Ts(e)===32,"invalid r","value",e),Te(this,ai,ze(e))}get s(){return ge(parseInt(Ze(this,Kn).substring(0,3))<8,"non-canonical s; use ._s","s",Ze(this,Kn)),Ze(this,Kn)}set s(e){ge(Ts(e)===32,"invalid s","value",e),Te(this,Kn,ze(e))}get _s(){return Ze(this,Kn)}isValid(){return BigInt(Ze(this,Kn))<=zI}get v(){return Ze(this,ci)}set v(e){let r=rn(e,"value");ge(r===27||r===28,"invalid v","v",e),Te(this,ci,r)}get networkV(){return Ze(this,zs)}get legacyChainId(){let e=this.networkV;return e==null?null:_n.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){let e=et(this.s);return this.yParity&&(e[0]|=128),ze(e)}get compactSerialized(){return Xr([this.r,this.yParityAndS])}get serialized(){return Xr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;let e=Bg-BigInt(this._s),r=55-this.v,n=new _n(xo,this.r,Vf(e),r);return this.networkV&&Te(n,zs,this.networkV),n}clone(){let e=new _n(xo,this.r,this._s,this.v);return this.networkV&&Te(e,zs,this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[FI](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){let r=ar(e,"v");return r==Og||r==Ng?Ag:(ge(r>=nu,"invalid EIP-155 v","v",e),(r-nu)/Wf)}static getChainIdV(e,r){return ar(e)*Wf+BigInt(35+r-27)}static getNormalizedV(e){let r=ar(e);return r===Ag||r===Og?27:r===Tg||r===Ng?28:(ge(r>=nu,"invalid v","v",e),r&Tg?27:28)}static from(e){function r(h,m){ge(h,m,"signature",e)}if(e==null)return new _n(xo,ru,ru,27);if(typeof e=="string"){let h=et(e,"signature");if(h.length===64){let m=ze(h.slice(0,32)),y=h.slice(32,64),O=y[0]&128?28:27;return y[0]&=127,new _n(xo,m,ze(y),O)}if(h.length===65){let m=ze(h.slice(0,32)),y=ze(h.slice(32,64)),O=_n.getNormalizedV(h[64]);return new _n(xo,m,y,O)}r(!1,"invalid raw signature length")}if(e instanceof _n)return e.clone();let n=e.r;r(n!=null,"missing r");let s=Vf(n),o=(function(h,m){if(h!=null)return Vf(h);if(m!=null){r(wn(m,32),"invalid yParityAndS");let y=et(m);return y[0]&=127,ze(y)}r(!1,"missing s")})(e.s,e.yParityAndS),{networkV:i,v:a}=(function(h,m,y){if(h!=null){let O=ar(h);return{networkV:O>=nu?O:void 0,v:_n.getNormalizedV(O)}}if(m!=null)return r(wn(m,32),"invalid yParityAndS"),{v:et(m)[0]&128?28:27};if(y!=null){switch(rn(y,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}r(!1,"invalid yParity")}r(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),u=new _n(xo,s,o,a);return i&&Te(u,zs,i),r(e.yParity==null||rn(e.yParity,"sig.yParity")===u.yParity,"yParity mismatch"),r(e.yParityAndS==null||e.yParityAndS===u.yParityAndS,"yParityAndS mismatch"),u}};ai=new WeakMap,Kn=new WeakMap,ci=new WeakMap,zs=new WeakMap;var Vr=_n;var ts,Ro=class Ro{constructor(e){xt(this,ts);ge(Ts(e)===32,"invalid private key","privateKey","[REDACTED]"),Te(this,ts,ze(e))}get privateKey(){return Ze(this,ts)}get publicKey(){return Ro.computePublicKey(Ze(this,ts))}get compressedPublicKey(){return Ro.computePublicKey(Ze(this,ts),!0)}sign(e){ge(Ts(e)===32,"invalid digest length","digest",e);let r=es.sign(mo(e),mo(Ze(this,ts)),{lowS:!0});return Vr.from({r:Vc(r.r,32),s:Vc(r.s,32),v:r.recovery?28:27})}computeSharedSecret(e){let r=Ro.computePublicKey(e);return ze(es.getSharedSecret(mo(Ze(this,ts)),et(r),!1))}static computePublicKey(e,r){let n=et(e,"key");if(n.length===32){let o=es.getPublicKey(n,!!r);return ze(o)}if(n.length===64){let o=new Uint8Array(65);o[0]=4,o.set(n,1),n=o}let s=es.ProjectivePoint.fromHex(n);return ze(s.toRawBytes(r))}static recoverPublicKey(e,r){ge(Ts(e)===32,"invalid digest length","digest",e);let n=Vr.from(r),s=es.Signature.fromCompact(mo(Xr([n.r,n.s])));s=s.addRecoveryBit(n.yParity);let o=s.recoverPublicKey(mo(e));return ge(o!=null,"invalid signature for digest","signature",r),"0x"+o.toHex(!1)}static addPoints(e,r,n){let s=es.ProjectivePoint.fromHex(Ro.computePublicKey(e).substring(2)),o=es.ProjectivePoint.fromHex(Ro.computePublicKey(r).substring(2));return"0x"+s.add(o).toHex(!!n)}};ts=new WeakMap;var Fs=Ro;var KI=BigInt(0),VI=BigInt(36);function kg(t){t=t.toLowerCase();let e=t.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);let n=et(En(r));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}var Hf={};for(let t=0;t<10;t++)Hf[String(t)]=String(t);for(let t=0;t<26;t++)Hf[String.fromCharCode(65+t)]=String(10+t);var Pg=15;function WI(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Hf[n]).join("");for(;e.length>=Pg;){let n=e.substring(0,Pg);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}var HI=(function(){let t={};for(let e=0;e<36;e++){let r="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[r]=BigInt(e)}return t})();function qI(t){t=t.toLowerCase();let e=KI;for(let r=0;r<t.length;r++)e=e*VI+HI[t[r]];return e}function on(t){if(ge(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);let e=kg(t);return ge(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ge(t.substring(2,4)===WI(t),"bad icap checksum","address",t);let e=qI(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return kg("0x"+e)}ge(!1,"invalid address","address",t)}function qf(t,e){return{address:on(t),storageKeys:e.map((r,n)=>(ge(wn(r,32),"invalid slot",`storageKeys[${n}]`,r),r.toLowerCase()))}}function xa(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(ge(r.length===2,"invalid slot set",`value[${n}]`,r),qf(r[0],r[1])):(ge(r!=null&&typeof r=="object","invalid address-slot set","value",t),qf(r.address,r.storageKeys)));ge(t!=null&&typeof t=="object","invalid access list","value",t);let e=Object.keys(t).map(r=>{let n=t[r].reduce((s,o)=>(s[o]=!0,s),{});return qf(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function $f(t){return{address:on(t.address),nonce:ar(t.nonce!=null?t.nonce:0),chainId:ar(t.chainId!=null?t.chainId:0),signature:Vr.from(t.signature)}}function Cg(t){let e;return typeof t=="string"?e=Fs.computePublicKey(t,!1):e=t.publicKey,on(En("0x"+e.substring(4)).substring(26))}function jf(t,e){return Cg(Fs.recoverPublicKey(t,e))}var mr=BigInt(0),jI=BigInt(2),GI=BigInt(27),YI=BigInt(28),JI=BigInt(35),ZI=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),XI=Symbol.for("nodejs.util.inspect.custom"),Gf=4096*32,su=128;function QI(t){return{blobToKzgCommitment:n=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return et(t.blobToKzgCommitment(ze(n)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return et(t.blobToKzgCommitment(n));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return et(t.blobToKZGCommitment(ze(n)));ge(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(n,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return et(t.computeBlobProof(ze(n),ze(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(n,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return et(t.computeBlobKZGProof(ze(n),ze(s)));ge(!1,"unsupported KZG library","kzg",t)}}}function Lg(t,e){let r=t.toString(16);for(;r.length<2;)r="0"+r;return r+=Ds(e).substring(4),"0x"+r}function Si(t){return t==="0x"?null:on(t)}function iu(t,e){try{return xa(t)}catch(r){ge(!1,r.message,e,t)}}function ev(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");let r=[];for(let n=0;n<t.length;n++){let s=t[n];if(!Array.isArray(s))throw new Error(`authorization[${n}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!s[1])throw new Error(`authorization[${n}]: null address`);r.push({address:Si(s[1]),nonce:yt(s[2],"nonce"),chainId:yt(s[0],"chainId"),signature:Vr.from({yParity:Io(s[3],"yParity"),r:zn(s[4],32),s:zn(s[5],32)})})}return r}catch(r){ge(!1,r.message,e,t)}}function Io(t,e){return t==="0x"?0:rn(t,e)}function yt(t,e){if(t==="0x")return mr;let r=ar(t,e);return ge(r<=ZI,"value exceeds uint size",e,r),r}function nt(t,e){let r=ar(t,"value"),n=lr(r);return ge(n.length<=32,"value too large",`tx.${e}`,r),n}function au(t){return xa(t).map(e=>[e.address,e.storageKeys])}function tv(t){return t.map(e=>[nt(e.chainId,"chainId"),e.address,nt(e.nonce,"nonce"),nt(e.signature.yParity,"yParity"),lr(e.signature.r),lr(e.signature._s)])}function rv(t,e){ge(Array.isArray(t),`invalid ${e}`,"value",t);for(let r=0;r<t.length;r++)ge(wn(t[r],32),"invalid ${ param } hash",`value[${r}]`,t[r]);return t}function nv(t){let e=yo(t);ge(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);let r={type:0,nonce:Io(e[0],"nonce"),gasPrice:yt(e[1],"gasPrice"),gasLimit:yt(e[2],"gasLimit"),to:Si(e[3]),value:yt(e[4],"value"),data:ze(e[5]),chainId:mr};if(e.length===6)return r;let n=yt(e[6],"v"),s=yt(e[7],"r"),o=yt(e[8],"s");if(s===mr&&o===mr)r.chainId=n;else{let i=(n-JI)/jI;i<mr&&(i=mr),r.chainId=i,ge(i!==mr||n===GI||n===YI,"non-canonical legacy v","v",e[6]),r.signature=Vr.from({r:zn(e[7],32),s:zn(e[8],32),v:n})}return r}function sv(t,e){let r=[nt(t.nonce,"nonce"),nt(t.gasPrice||0,"gasPrice"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data],n=mr;if(t.chainId!=mr)n=ar(t.chainId,"tx.chainId"),ge(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){let o=t.signature.legacyChainId;o!=null&&(n=o)}if(!e)return n!==mr&&(r.push(lr(n)),r.push("0x"),r.push("0x")),Fn(r);let s=BigInt(27+e.yParity);return n!==mr?s=Vr.getChainIdV(n,e.v):BigInt(e.v)!==s&&ge(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(lr(s)),r.push(lr(e.r)),r.push(lr(e._s)),Fn(r)}function cu(t,e){let r;try{if(r=Io(e[0],"yParity"),r!==0&&r!==1)throw new Error("bad yParity")}catch{ge(!1,"invalid yParity","yParity",e[0])}let n=zn(e[1],32),s=zn(e[2],32),o=Vr.from({r:n,s,yParity:r});t.signature=o}function ov(t){let e=yo(et(t).slice(1));ge(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",ze(t));let r={type:2,chainId:yt(e[0],"chainId"),nonce:Io(e[1],"nonce"),maxPriorityFeePerGas:yt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:yt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:yt(e[4],"gasLimit"),to:Si(e[5]),value:yt(e[6],"value"),data:ze(e[7]),accessList:iu(e[8],"accessList")};return e.length===9||cu(r,e.slice(9)),r}function iv(t,e){let r=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nt(t.maxFeePerGas||0,"maxFeePerGas"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data,au(t.accessList||[])];return e&&(r.push(nt(e.yParity,"yParity")),r.push(lr(e.r)),r.push(lr(e.s))),Xr(["0x02",Fn(r)])}function av(t){let e=yo(et(t).slice(1));ge(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",ze(t));let r={type:1,chainId:yt(e[0],"chainId"),nonce:Io(e[1],"nonce"),gasPrice:yt(e[2],"gasPrice"),gasLimit:yt(e[3],"gasLimit"),to:Si(e[4]),value:yt(e[5],"value"),data:ze(e[6]),accessList:iu(e[7],"accessList")};return e.length===8||cu(r,e.slice(8)),r}function cv(t,e){let r=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.gasPrice||0,"gasPrice"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data,au(t.accessList||[])];return e&&(r.push(nt(e.yParity,"recoveryParam")),r.push(lr(e.r)),r.push(lr(e.s))),Xr(["0x01",Fn(r)])}function uv(t){let e=yo(et(t).slice(1)),r="3",n=null,s=null;if(e.length===4&&Array.isArray(e[0])){r="3 (network format)";let i=e[1],a=e[2],u=e[3];ge(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),ge(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),ge(Array.isArray(u),"invalid network format: proofs not an array","fields[3]",u),ge(i.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ge(i.length===u.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let h=0;h<e[1].length;h++)s.push({data:i[h],commitment:a[h],proof:u[h]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){r="3 (EIP-7594 network format)",n=rn(e[1]);let i=e[2],a=e[3],u=e[4];ge(n===1,`unsupported EIP-7594 network format version: ${n}`,"fields[1]",n),ge(Array.isArray(i),"invalid EIP-7594 network format: blobs not an array","fields[2]",i),ge(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),ge(Array.isArray(u),"invalid EIP-7594 network format: proofs not an array","fields[4]",u),ge(i.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ge(i.length*su===u.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let h=0;h<i.length;h++){let m=[];for(let y=0;y<su;y++)m.push(u[h*su+y]);s.push({data:i[h],commitment:a[h],proof:Xr(m)})}e=e[0]}ge(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${r}`,"data",ze(t));let o={type:3,chainId:yt(e[0],"chainId"),nonce:Io(e[1],"nonce"),maxPriorityFeePerGas:yt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:yt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:yt(e[4],"gasLimit"),to:Si(e[5]),value:yt(e[6],"value"),data:ze(e[7]),accessList:iu(e[8],"accessList"),maxFeePerBlobGas:yt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:n};s&&(o.blobs=s),ge(o.to!=null,`invalid address for transaction type: ${r}`,"data",t),ge(Array.isArray(o.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<o.blobVersionedHashes.length;i++)ge(wn(o.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||cu(o,e.slice(11)),o}function lv(t,e,r){let n=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nt(t.maxFeePerGas||0,"maxFeePerGas"),nt(t.gasLimit,"gasLimit"),t.to||Kf,nt(t.value,"value"),t.data,au(t.accessList||[]),nt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),rv(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(n.push(nt(e.yParity,"yParity")),n.push(lr(e.r)),n.push(lr(e.s)),r)){if(t.blobWrapperVersion!=null){let s=lr(t.blobWrapperVersion),o=[];for(let{proof:i}of r){let a=et(i),u=a.length/su;for(let h=0;h<a.length;h+=u)o.push(a.subarray(h,h+u))}return Xr(["0x03",Fn([n,s,r.map(i=>i.data),r.map(i=>i.commitment),o])])}return Xr(["0x03",Fn([n,r.map(s=>s.data),r.map(s=>s.commitment),r.map(s=>s.proof)])])}return Xr(["0x03",Fn(n)])}function fv(t){let e=yo(et(t).slice(1));ge(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",ze(t));let r={type:4,chainId:yt(e[0],"chainId"),nonce:Io(e[1],"nonce"),maxPriorityFeePerGas:yt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:yt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:yt(e[4],"gasLimit"),to:Si(e[5]),value:yt(e[6],"value"),data:ze(e[7]),accessList:iu(e[8],"accessList"),authorizationList:ev(e[9],"authorizationList")};return e.length===10||cu(r,e.slice(10)),r}function dv(t,e){let r=[nt(t.chainId,"chainId"),nt(t.nonce,"nonce"),nt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nt(t.maxFeePerGas||0,"maxFeePerGas"),nt(t.gasLimit,"gasLimit"),t.to||"0x",nt(t.value,"value"),t.data,au(t.accessList||[]),tv(t.authorizationList||[])];return e&&(r.push(nt(e.yParity,"yParity")),r.push(lr(e.r)),r.push(lr(e.s))),Xr(["0x04",Fn(r)])}var Bn,ui,li,fi,di,hi,pi,gi,mi,yi,wi,Ei,So,Ks,Wn,Vs,bi,_i,xi,ou,Vn=class Vn{constructor(){xt(this,xi);xt(this,Bn);xt(this,ui);xt(this,li);xt(this,fi);xt(this,di);xt(this,hi);xt(this,pi);xt(this,gi);xt(this,mi);xt(this,yi);xt(this,wi);xt(this,Ei);xt(this,So);xt(this,Ks);xt(this,Wn);xt(this,Vs);xt(this,bi);xt(this,_i);Te(this,Bn,null),Te(this,ui,null),Te(this,fi,0),Te(this,di,mr),Te(this,hi,null),Te(this,pi,null),Te(this,gi,null),Te(this,li,"0x"),Te(this,mi,mr),Te(this,yi,mr),Te(this,wi,null),Te(this,Ei,null),Te(this,So,null),Te(this,Ks,null),Te(this,Wn,null),Te(this,Vs,null),Te(this,bi,null),Te(this,_i,null)}get type(){return Ze(this,Bn)}set type(e){switch(e){case null:Te(this,Bn,null);break;case 0:case"legacy":Te(this,Bn,0);break;case 1:case"berlin":case"eip-2930":Te(this,Bn,1);break;case 2:case"london":case"eip-1559":Te(this,Bn,2);break;case 3:case"cancun":case"eip-4844":Te(this,Bn,3);break;case 4:case"pectra":case"eip-7702":Te(this,Bn,4);break;default:ge(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let e=Ze(this,ui);return e==null&&this.type===3?Kf:e}set to(e){Te(this,ui,e==null?null:on(e))}get nonce(){return Ze(this,fi)}set nonce(e){Te(this,fi,rn(e,"value"))}get gasLimit(){return Ze(this,di)}set gasLimit(e){Te(this,di,ar(e))}get gasPrice(){let e=Ze(this,hi);return e==null&&(this.type===0||this.type===1)?mr:e}set gasPrice(e){Te(this,hi,e==null?null:ar(e,"gasPrice"))}get maxPriorityFeePerGas(){let e=Ze(this,pi);return e??(this.type===2||this.type===3?mr:null)}set maxPriorityFeePerGas(e){Te(this,pi,e==null?null:ar(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){let e=Ze(this,gi);return e??(this.type===2||this.type===3?mr:null)}set maxFeePerGas(e){Te(this,gi,e==null?null:ar(e,"maxFeePerGas"))}get data(){return Ze(this,li)}set data(e){Te(this,li,ze(e))}get value(){return Ze(this,mi)}set value(e){Te(this,mi,ar(e,"value"))}get chainId(){return Ze(this,yi)}set chainId(e){Te(this,yi,ar(e))}get signature(){return Ze(this,wi)||null}set signature(e){Te(this,wi,e==null?null:Vr.from(e))}isValid(){let e=this.signature;if(e&&!e.isValid())return!1;let r=this.authorizationList;if(r){for(let n of r)if(!n.signature.isValid())return!1}return!0}get accessList(){let e=Ze(this,Ei)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){Te(this,Ei,e==null?null:xa(e))}get authorizationList(){let e=Ze(this,bi)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){Te(this,bi,e==null?null:e.map(r=>$f(r)))}get maxFeePerBlobGas(){let e=Ze(this,So);return e==null&&this.type===3?mr:e}set maxFeePerBlobGas(e){Te(this,So,e==null?null:ar(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=Ze(this,Ks);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ge(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let r=0;r<e.length;r++)ge(wn(e[r],32),"invalid blobVersionedHash",`value[${r}]`,e[r])}Te(this,Ks,e)}get blobs(){return Ze(this,Vs)==null?null:Ze(this,Vs).map(e=>Object.assign({},e))}set blobs(e){if(e==null){Te(this,Vs,null);return}let r=[],n=[];for(let s=0;s<e.length;s++){let o=e[s];if(mf(o)){rr(Ze(this,Wn),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let i=et(o);if(ge(i.length<=Gf,"blob is too large",`blobs[${s}]`,o),i.length!==Gf){let h=new Uint8Array(Gf);h.set(i),i=h}let a=Ze(this,Wn).blobToKzgCommitment(i),u=ze(Ze(this,Wn).computeBlobKzgProof(i,a));r.push({data:ze(i),commitment:ze(a),proof:u}),n.push(Lg(1,a))}else{let i=ze(o.data),a=ze(o.commitment),u=ze(o.proof);r.push({data:i,commitment:a,proof:u}),n.push(Lg(1,a))}}Te(this,Vs,r),Te(this,Ks,n)}get kzg(){return Ze(this,Wn)}set kzg(e){e==null?Te(this,Wn,null):Te(this,Wn,QI(e))}get blobWrapperVersion(){return Ze(this,_i)}set blobWrapperVersion(e){Te(this,_i,e)}get hash(){return this.signature==null?null:En(Qa(this,xi,ou).call(this,!0,!1))}get unsignedHash(){return En(this.unsignedSerialized)}get from(){return this.signature==null?null:jf(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Fs.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return Qa(this,xi,ou).call(this,!0,!0)}get unsignedSerialized(){return Qa(this,xi,ou).call(this,!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=this.gasPrice!=null,r=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=Ze(this,So)!=null||Ze(this,Ks);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&rr(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),rr(!r||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),rr(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let o=[];return this.type!=null?o.push(this.type):this.authorizationList&&this.authorizationList.length?o.push(4):r?o.push(2):e?(o.push(1),n||o.push(0)):n?(o.push(1),o.push(2)):(s&&this.to||(o.push(0),o.push(1),o.push(2)),o.push(3)),o.sort(),o}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Vn.from(this)}toJSON(){let e=r=>r==null?null:r.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[XI](){return this.toString()}toString(){let e=[],r=s=>{let o=this[s];typeof o=="string"&&(o=JSON.stringify(o)),e.push(`${s}: ${o}`)};this.type&&r("type"),r("to"),r("data"),r("nonce"),r("gasLimit"),r("value"),this.chainId!=null&&r("chainId"),this.signature&&(r("from"),e.push(`signature: ${this.signature.toString()}`));let n=this.authorizationList;if(n){let s=[];for(let o of n){let i=[];i.push(`address: ${JSON.stringify(o.address)}`),o.nonce!=null&&i.push(`nonce: ${o.nonce}`),o.chainId!=null&&i.push(`chainId: ${o.chainId}`),o.signature&&i.push(`signature: ${o.signature.toString()}`),s.push(`Authorization { ${i.join(", ")} }`)}e.push(`authorizations: [ ${s.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Vn;if(typeof e=="string"){let n=et(e);if(n[0]>=127)return Vn.from(nv(n));switch(n[0]){case 1:return Vn.from(av(n));case 2:return Vn.from(ov(n));case 3:return Vn.from(uv(n));case 4:return Vn.from(fv(n))}rr(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let r=new Vn;return e.type!=null&&(r.type=e.type),e.to!=null&&(r.to=e.to),e.nonce!=null&&(r.nonce=e.nonce),e.gasLimit!=null&&(r.gasLimit=e.gasLimit),e.gasPrice!=null&&(r.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(r.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(r.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(r.data=e.data),e.value!=null&&(r.value=e.value),e.chainId!=null&&(r.chainId=e.chainId),e.signature!=null&&(r.signature=Vr.from(e.signature)),e.accessList!=null&&(r.accessList=e.accessList),e.authorizationList!=null&&(r.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(r.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(r.kzg=e.kzg),e.blobWrapperVersion!=null&&(r.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(r.blobs=e.blobs),e.hash!=null&&(ge(r.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ge(r.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ge(r.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ge(r.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),r}};Bn=new WeakMap,ui=new WeakMap,li=new WeakMap,fi=new WeakMap,di=new WeakMap,hi=new WeakMap,pi=new WeakMap,gi=new WeakMap,mi=new WeakMap,yi=new WeakMap,wi=new WeakMap,Ei=new WeakMap,So=new WeakMap,Ks=new WeakMap,Wn=new WeakMap,Vs=new WeakMap,bi=new WeakMap,_i=new WeakMap,xi=new WeakSet,ou=function(e,r){rr(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let n=e?this.signature:null;switch(this.inferType()){case 0:return sv(this,n);case 1:return cv(this,n);case 2:return iv(this,n);case 3:return lv(this,n,r?this.blobs:null);case 4:return dv(this,n)}rr(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};var Ri=Vn;var Ke=pr(mn());var vo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ns(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ws(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Er(t,...e){if(!ns(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function uu(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ws(t.outputLen),Ws(t.blockLen)}function ss(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function lu(t,e){Er(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Mg(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function xn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function fu(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function kn(t,e){return t<<32-e|t>>>e}var hv=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function pv(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function gv(t){for(let e=0;e<t.length;e++)t[e]=pv(t[e]);return t}var Yf=hv?t=>t:gv,Ug=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",mv=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Rn(t){if(Er(t),Ug)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=mv[t[r]];return e}var rs={_0:48,_9:57,A:65,F:70,a:97,f:102};function Dg(t){if(t>=rs._0&&t<=rs._9)return t-rs._0;if(t>=rs.A&&t<=rs.F)return t-(rs.A-10);if(t>=rs.a&&t<=rs.f)return t-(rs.a-10)}function Ao(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Ug)return Uint8Array.fromHex(t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let s=0,o=0;s<r;s++,o+=2){let i=Dg(t.charCodeAt(o)),a=Dg(t.charCodeAt(o+1));if(i===void 0||a===void 0){let u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}n[s]=i*16+a}return n}function Jf(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function To(t){return typeof t=="string"&&(t=Jf(t)),Er(t),t}function Wr(...t){let e=0;for(let n=0;n<t.length;n++){let s=t[n];Er(s),e+=s.length}let r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){let o=t[n];r.set(o,s),s+=o.length}return r}var Hs=class{};function Ra(t){let e=n=>t().update(To(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Ii(t=32){if(vo&&typeof vo.getRandomValues=="function")return vo.getRandomValues(new Uint8Array(t));if(vo&&typeof vo.randomBytes=="function")return Uint8Array.from(vo.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function yv(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),o=BigInt(4294967295),i=Number(r>>s&o),a=Number(r&o),u=n?4:0,h=n?0:4;t.setUint32(e+u,i,n),t.setUint32(e+h,a,n)}function zg(t,e,r){return t&e^~t&r}function Fg(t,e,r){return t&e^t&r^e&r}var Sa=class extends Hs{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=fu(this.buffer)}update(e){ss(this),e=To(e),Er(e);let{view:r,buffer:n,blockLen:s}=this,o=e.length;for(let i=0;i<o;){let a=Math.min(s-this.pos,o-i);if(a===s){let u=fu(e);for(;s<=o-i;i+=s)this.process(u,i);continue}n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ss(this),lu(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:o}=this,{pos:i}=this;r[i++]=128,xn(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(n,0),i=0);for(let y=i;y<s;y++)r[y]=0;yv(n,s-8,BigInt(this.length*8),o),this.process(n,0);let a=fu(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=u/4,m=this.get();if(h>m.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<h;y++)a.setUint32(4*y,m[y],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:o,destroyed:i,pos:a}=this;return e.destroyed=i,e.finished=o,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}},os=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var br=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var du=BigInt(4294967295),Kg=BigInt(32);function wv(t,e=!1){return e?{h:Number(t&du),l:Number(t>>Kg&du)}:{h:Number(t>>Kg&du)|0,l:Number(t&du)|0}}function hu(t,e=!1){let r=t.length,n=new Uint32Array(r),s=new Uint32Array(r);for(let o=0;o<r;o++){let{h:i,l:a}=wv(t[o],e);[n[o],s[o]]=[i,a]}return[n,s]}var Zf=(t,e,r)=>t>>>r,Xf=(t,e,r)=>t<<32-r|e>>>r,Oo=(t,e,r)=>t>>>r|e<<32-r,No=(t,e,r)=>t<<32-r|e>>>r,Ia=(t,e,r)=>t<<64-r|e>>>r-32,va=(t,e,r)=>t>>>r-32|e<<64-r;var Vg=(t,e,r)=>t<<r|e>>>32-r,Wg=(t,e,r)=>e<<r|t>>>32-r,Hg=(t,e,r)=>e<<r-32|t>>>64-r,qg=(t,e,r)=>t<<r-32|e>>>64-r;function Hn(t,e,r,n){let s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}var $g=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),jg=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Gg=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Yg=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Jg=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Zg=(t,e,r,n,s,o)=>e+r+n+s+o+(t/2**32|0)|0;var bv=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qs=new Uint32Array(64),pu=class extends Sa{constructor(e=32){super(64,e,8,!1),this.A=os[0]|0,this.B=os[1]|0,this.C=os[2]|0,this.D=os[3]|0,this.E=os[4]|0,this.F=os[5]|0,this.G=os[6]|0,this.H=os[7]|0}get(){let{A:e,B:r,C:n,D:s,E:o,F:i,G:a,H:u}=this;return[e,r,n,s,o,i,a,u]}set(e,r,n,s,o,i,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=u|0}process(e,r){for(let y=0;y<16;y++,r+=4)qs[y]=e.getUint32(r,!1);for(let y=16;y<64;y++){let O=qs[y-15],S=qs[y-2],R=kn(O,7)^kn(O,18)^O>>>3,A=kn(S,17)^kn(S,19)^S>>>10;qs[y]=A+qs[y-7]+R+qs[y-16]|0}let{A:n,B:s,C:o,D:i,E:a,F:u,G:h,H:m}=this;for(let y=0;y<64;y++){let O=kn(a,6)^kn(a,11)^kn(a,25),S=m+O+zg(a,u,h)+bv[y]+qs[y]|0,A=(kn(n,2)^kn(n,13)^kn(n,22))+Fg(n,s,o)|0;m=h,h=u,u=a,a=i+S|0,i=o,o=s,s=n,n=S+A|0}n=n+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,u=u+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(n,s,o,i,a,u,h,m)}roundClean(){xn(qs)}destroy(){this.set(0,0,0,0,0,0,0,0),xn(this.buffer)}};var Xg=hu(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),_v=Xg[0],xv=Xg[1],$s=new Uint32Array(80),js=new Uint32Array(80),Qf=class extends Sa{constructor(e=64){super(128,e,16,!1),this.Ah=br[0]|0,this.Al=br[1]|0,this.Bh=br[2]|0,this.Bl=br[3]|0,this.Ch=br[4]|0,this.Cl=br[5]|0,this.Dh=br[6]|0,this.Dl=br[7]|0,this.Eh=br[8]|0,this.El=br[9]|0,this.Fh=br[10]|0,this.Fl=br[11]|0,this.Gh=br[12]|0,this.Gl=br[13]|0,this.Hh=br[14]|0,this.Hl=br[15]|0}get(){let{Ah:e,Al:r,Bh:n,Bl:s,Ch:o,Cl:i,Dh:a,Dl:u,Eh:h,El:m,Fh:y,Fl:O,Gh:S,Gl:R,Hh:A,Hl:I}=this;return[e,r,n,s,o,i,a,u,h,m,y,O,S,R,A,I]}set(e,r,n,s,o,i,a,u,h,m,y,O,S,R,A,I){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=o|0,this.Cl=i|0,this.Dh=a|0,this.Dl=u|0,this.Eh=h|0,this.El=m|0,this.Fh=y|0,this.Fl=O|0,this.Gh=S|0,this.Gl=R|0,this.Hh=A|0,this.Hl=I|0}process(e,r){for(let M=0;M<16;M++,r+=4)$s[M]=e.getUint32(r),js[M]=e.getUint32(r+=4);for(let M=16;M<80;M++){let K=$s[M-15]|0,Z=js[M-15]|0,V=Oo(K,Z,1)^Oo(K,Z,8)^Zf(K,Z,7),Y=No(K,Z,1)^No(K,Z,8)^Xf(K,Z,7),te=$s[M-2]|0,j=js[M-2]|0,ce=Oo(te,j,19)^Ia(te,j,61)^Zf(te,j,6),se=No(te,j,19)^va(te,j,61)^Xf(te,j,6),de=Gg(Y,se,js[M-7],js[M-16]),b=Yg(de,V,ce,$s[M-7],$s[M-16]);$s[M]=b|0,js[M]=de|0}let{Ah:n,Al:s,Bh:o,Bl:i,Ch:a,Cl:u,Dh:h,Dl:m,Eh:y,El:O,Fh:S,Fl:R,Gh:A,Gl:I,Hh:k,Hl:z}=this;for(let M=0;M<80;M++){let K=Oo(y,O,14)^Oo(y,O,18)^Ia(y,O,41),Z=No(y,O,14)^No(y,O,18)^va(y,O,41),V=y&S^~y&A,Y=O&R^~O&I,te=Jg(z,Z,Y,xv[M],js[M]),j=Zg(te,k,K,V,_v[M],$s[M]),ce=te|0,se=Oo(n,s,28)^Ia(n,s,34)^Ia(n,s,39),de=No(n,s,28)^va(n,s,34)^va(n,s,39),b=n&o^n&a^o&a,c=s&i^s&u^i&u;k=A|0,z=I|0,A=S|0,I=R|0,S=y|0,R=O|0,{h:y,l:O}=Hn(h|0,m|0,j|0,ce|0),h=a|0,m=u|0,a=o|0,u=i|0,o=n|0,i=s|0;let l=$g(ce,de,c);n=jg(l,j,se,b),s=l|0}({h:n,l:s}=Hn(this.Ah|0,this.Al|0,n|0,s|0)),{h:o,l:i}=Hn(this.Bh|0,this.Bl|0,o|0,i|0),{h:a,l:u}=Hn(this.Ch|0,this.Cl|0,a|0,u|0),{h,l:m}=Hn(this.Dh|0,this.Dl|0,h|0,m|0),{h:y,l:O}=Hn(this.Eh|0,this.El|0,y|0,O|0),{h:S,l:R}=Hn(this.Fh|0,this.Fl|0,S|0,R|0),{h:A,l:I}=Hn(this.Gh|0,this.Gl|0,A|0,I|0),{h:k,l:z}=Hn(this.Hh|0,this.Hl|0,k|0,z|0),this.set(n,s,o,i,a,u,h,m,y,O,S,R,A,I,k,z)}roundClean(){xn($s,js)}destroy(){xn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var gu=Ra(()=>new pu);var Qg=Ra(()=>new Qf);var rd=BigInt(0),td=BigInt(1);function is(t,e=""){if(typeof t!="boolean"){let r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function an(t,e,r=""){let n=ns(t),s=t?.length,o=e!==void 0;if(!n||o&&s!==e){let i=r&&`"${r}" `,a=o?` of length ${e}`:"",u=n?`length=${s}`:`type=${typeof t}`;throw new Error(i+"expected Uint8Array"+a+", got "+u)}return t}function Aa(t){let e=t.toString(16);return e.length&1?"0"+e:e}function em(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?rd:BigInt("0x"+t)}function vi(t){return em(Rn(t))}function as(t){return Er(t),em(Rn(Uint8Array.from(t).reverse()))}function mu(t,e){return Ao(t.toString(16).padStart(e*2,"0"))}function nd(t,e){return mu(t,e).reverse()}function wt(t,e,r){let n;if(typeof e=="string")try{n=Ao(e)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(ns(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function tm(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function sd(t){return Uint8Array.from(t)}var ed=t=>typeof t=="bigint"&&rd<=t;function rm(t,e,r){return ed(t)&&ed(e)&&ed(r)&&e<=t&&t<r}function Ta(t,e,r,n){if(!rm(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function yu(t){let e;for(e=0;t>rd;t>>=td,e+=1);return e}var Gs=t=>(td<<BigInt(t))-td;function nm(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=S=>new Uint8Array(S),s=S=>Uint8Array.of(S),o=n(t),i=n(t),a=0,u=()=>{o.fill(1),i.fill(0),a=0},h=(...S)=>r(i,o,...S),m=(S=n(0))=>{i=h(s(0),S),o=h(),S.length!==0&&(i=h(s(1),S),o=h())},y=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let S=0,R=[];for(;S<e;){o=h();let A=o.slice();R.push(A),S+=o.length}return Wr(...R)};return(S,R)=>{u(),m(S);let A;for(;!(A=R(y()));)m();return u(),A}}function Ys(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,o,i){let a=t[s];if(i&&a===void 0)return;let u=typeof a;if(u!==o||a===null)throw new Error(`param "${s}" is invalid: expected ${o}, got ${u}`)}Object.entries(e).forEach(([s,o])=>n(s,o,!1)),Object.entries(r).forEach(([s,o])=>n(s,o,!0))}var od=()=>{throw new Error("not implemented")};function Ai(t){let e=new WeakMap;return(r,...n)=>{let s=e.get(r);if(s!==void 0)return s;let o=t(r,...n);return e.set(r,o),o}}var Hr=BigInt(0),yr=BigInt(1),Bo=BigInt(2),im=BigInt(3),am=BigInt(4),cm=BigInt(5),Rv=BigInt(7),um=BigInt(8),Sv=BigInt(9),lm=BigInt(16);function sr(t,e){let r=t%e;return r>=Hr?r:e+r}function Vt(t,e,r){let n=t;for(;e-- >Hr;)n*=n,n%=r;return n}function sm(t,e){if(t===Hr)throw new Error("invert: expected non-zero number");if(e<=Hr)throw new Error("invert: expected positive modulus, got "+e);let r=sr(t,e),n=e,s=Hr,o=yr,i=yr,a=Hr;for(;r!==Hr;){let h=n/r,m=n%r,y=s-i*h,O=o-a*h;n=r,r=m,s=i,o=a,i=y,a=O}if(n!==yr)throw new Error("invert: does not exist");return sr(s,e)}function id(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function fm(t,e){let r=(t.ORDER+yr)/am,n=t.pow(e,r);return id(t,n,e),n}function Iv(t,e){let r=(t.ORDER-cm)/um,n=t.mul(e,Bo),s=t.pow(n,r),o=t.mul(e,s),i=t.mul(t.mul(o,Bo),s),a=t.mul(o,t.sub(i,t.ONE));return id(t,a,e),a}function vv(t){let e=cn(t),r=dm(t),n=r(e,e.neg(e.ONE)),s=r(e,n),o=r(e,e.neg(n)),i=(t+Rv)/lm;return(a,u)=>{let h=a.pow(u,i),m=a.mul(h,n),y=a.mul(h,s),O=a.mul(h,o),S=a.eql(a.sqr(m),u),R=a.eql(a.sqr(y),u);h=a.cmov(h,m,S),m=a.cmov(O,y,R);let A=a.eql(a.sqr(m),u),I=a.cmov(h,m,A);return id(a,I,u),I}}function dm(t){if(t<im)throw new Error("sqrt is not defined for small field");let e=t-yr,r=0;for(;e%Bo===Hr;)e/=Bo,r++;let n=Bo,s=cn(t);for(;om(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return fm;let o=s.pow(n,e),i=(e+yr)/Bo;return function(u,h){if(u.is0(h))return h;if(om(u,h)!==1)throw new Error("Cannot find square root");let m=r,y=u.mul(u.ONE,o),O=u.pow(h,e),S=u.pow(h,i);for(;!u.eql(O,u.ONE);){if(u.is0(O))return u.ZERO;let R=1,A=u.sqr(O);for(;!u.eql(A,u.ONE);)if(R++,A=u.sqr(A),R===m)throw new Error("Cannot find square root");let I=yr<<BigInt(m-R-1),k=u.pow(y,I);m=R,y=u.sqr(k),O=u.mul(O,y),S=u.mul(S,k)}return S}}function Av(t){return t%am===im?fm:t%um===cm?Iv:t%lm===Sv?vv(t):dm(t)}var cs=(t,e)=>(sr(t,e)&yr)===yr,Tv=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ad(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Tv.reduce((n,s)=>(n[s]="function",n),e);return Ys(t,r),t}function Ov(t,e,r){if(r<Hr)throw new Error("invalid exponent, negatives unsupported");if(r===Hr)return t.ONE;if(r===yr)return e;let n=t.ONE,s=e;for(;r>Hr;)r&yr&&(n=t.mul(n,s)),s=t.sqr(s),r>>=yr;return n}function Oa(t,e,r=!1){let n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((i,a,u)=>t.is0(a)?i:(n[u]=i,t.mul(i,a)),t.ONE),o=t.inv(s);return e.reduceRight((i,a,u)=>t.is0(a)?i:(n[u]=t.mul(i,n[u]),t.mul(i,a)),o),n}function om(t,e){let r=(t.ORDER-yr)/Bo,n=t.pow(e,r),s=t.eql(n,t.ONE),o=t.eql(n,t.ZERO),i=t.eql(n,t.neg(t.ONE));if(!s&&!o&&!i)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function wu(t,e){e!==void 0&&Ws(e);let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function cn(t,e,r=!1,n={}){if(t<=Hr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,o,i=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");let O=e;O.BITS&&(s=O.BITS),O.sqrt&&(o=O.sqrt),typeof O.isLE=="boolean"&&(r=O.isLE),typeof O.modFromBytes=="boolean"&&(i=O.modFromBytes),a=O.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(o=n.sqrt);let{nBitLength:u,nByteLength:h}=wu(t,s);if(h>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let m,y=Object.freeze({ORDER:t,isLE:r,BITS:u,BYTES:h,MASK:Gs(u),ZERO:Hr,ONE:yr,allowedLengths:a,create:O=>sr(O,t),isValid:O=>{if(typeof O!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof O);return Hr<=O&&O<t},is0:O=>O===Hr,isValidNot0:O=>!y.is0(O)&&y.isValid(O),isOdd:O=>(O&yr)===yr,neg:O=>sr(-O,t),eql:(O,S)=>O===S,sqr:O=>sr(O*O,t),add:(O,S)=>sr(O+S,t),sub:(O,S)=>sr(O-S,t),mul:(O,S)=>sr(O*S,t),pow:(O,S)=>Ov(y,O,S),div:(O,S)=>sr(O*sm(S,t),t),sqrN:O=>O*O,addN:(O,S)=>O+S,subN:(O,S)=>O-S,mulN:(O,S)=>O*S,inv:O=>sm(O,t),sqrt:o||(O=>(m||(m=Av(t)),m(y,O))),toBytes:O=>r?nd(O,h):mu(O,h),fromBytes:(O,S=!0)=>{if(a){if(!a.includes(O.length)||O.length>h)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+O.length);let A=new Uint8Array(h);A.set(O,r?0:A.length-O.length),O=A}if(O.length!==h)throw new Error("Field.fromBytes: expected "+h+" bytes, got "+O.length);let R=r?as(O):vi(O);if(i&&(R=sr(R,t)),!S&&!y.isValid(R))throw new Error("invalid field element: outside of range 0..ORDER");return R},invertBatch:O=>Oa(y,O),cmov:(O,S,R)=>R?S:O});return Object.freeze(y)}function hm(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function cd(t){let e=hm(t);return e+Math.ceil(e/2)}function ud(t,e,r=!1){let n=t.length,s=hm(e),o=cd(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);let i=r?as(t):vi(t),a=sr(i,e-yr)+yr;return r?nd(a,s):mu(a,s)}var Ti=BigInt(0),ko=BigInt(1);function Na(t,e){let r=e.negate();return t?r:e}function us(t,e){let r=Oa(t.Fp,e.map(n=>n.Z));return e.map((n,s)=>t.fromAffine(n.toAffine(r[s])))}function ym(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ld(t,e){ym(t,e);let r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,o=Gs(t),i=BigInt(t);return{windows:r,windowSize:n,mask:o,maxNumber:s,shiftBy:i}}function pm(t,e,r){let{windowSize:n,mask:s,maxNumber:o,shiftBy:i}=r,a=Number(t&s),u=t>>i;a>n&&(a-=o,u+=ko);let h=e*n,m=h+Math.abs(a)-1,y=a===0,O=a<0,S=e%2!==0;return{nextN:u,offset:m,isZero:y,isNeg:O,isNegF:S,offsetF:h}}function Nv(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Bv(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}var fd=new WeakMap,wm=new WeakMap;function dd(t){return wm.get(t)||1}function gm(t){if(t!==Ti)throw new Error("invalid wNAF")}var Oi=class{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let s=e;for(;r>Ti;)r&ko&&(n=n.add(s)),s=s.double(),r>>=ko;return n}precomputeWindow(e,r){let{windows:n,windowSize:s}=ld(r,this.bits),o=[],i=e,a=i;for(let u=0;u<n;u++){a=i,o.push(a);for(let h=1;h<s;h++)a=a.add(i),o.push(a);i=a.double()}return o}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,o=this.BASE,i=ld(e,this.bits);for(let a=0;a<i.windows;a++){let{nextN:u,offset:h,isZero:m,isNeg:y,isNegF:O,offsetF:S}=pm(n,a,i);n=u,m?o=o.add(Na(O,r[S])):s=s.add(Na(y,r[h]))}return gm(n),{p:s,f:o}}wNAFUnsafe(e,r,n,s=this.ZERO){let o=ld(e,this.bits);for(let i=0;i<o.windows&&n!==Ti;i++){let{nextN:a,offset:u,isZero:h,isNeg:m}=pm(n,i,o);if(n=a,!h){let y=r[u];s=s.add(m?y.negate():y)}}return gm(n),s}getPrecomputes(e,r,n){let s=fd.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(s=n(s)),fd.set(r,s))),s}cached(e,r,n){let s=dd(e);return this.wNAF(s,this.getPrecomputes(s,e,n),r)}unsafe(e,r,n,s){let o=dd(e);return o===1?this._unsafeLadder(e,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,e,n),r,s)}createCache(e,r){ym(r,this.bits),wm.set(e,r),fd.delete(e)}hasCache(e){return dd(e)!==1}};function Em(t,e,r,n){let s=e,o=t.ZERO,i=t.ZERO;for(;r>Ti||n>Ti;)r&ko&&(o=o.add(s)),n&ko&&(i=i.add(s)),s=s.double(),r>>=ko,n>>=ko;return{p1:o,p2:i}}function Ni(t,e,r,n){Nv(r,t),Bv(n,e);let s=r.length,o=n.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");let i=t.ZERO,a=yu(BigInt(s)),u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);let h=Gs(u),m=new Array(Number(h)+1).fill(i),y=Math.floor((e.BITS-1)/u)*u,O=i;for(let S=y;S>=0;S-=u){m.fill(i);for(let A=0;A<o;A++){let I=n[A],k=Number(I>>BigInt(S)&h);m[k]=m[k].add(r[A])}let R=i;for(let A=m.length-1,I=i;A>0;A--)I=I.add(m[A]),R=R.add(I);if(O=O.add(R),S!==0)for(let A=0;A<u;A++)O=O.double()}return O}function mm(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return ad(e),e}else return cn(t,{isLE:r})}function Eu(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(let u of["p","n","h"]){let h=e[u];if(!(typeof h=="bigint"&&h>Ti))throw new Error(`CURVE.${u} must be positive bigint`)}let s=mm(e.p,r.Fp,n),o=mm(e.n,r.Fn,n),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(let u of a)if(!s.isValid(e[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:o}}var Js=BigInt(0),wr=BigInt(1),hd=BigInt(2),kv=BigInt(8);function Pv(t,e,r,n){let s=t.sqr(r),o=t.sqr(n),i=t.add(t.mul(e.a,s),o),a=t.add(t.ONE,t.mul(e.d,t.mul(s,o)));return t.eql(i,a)}function Cv(t,e={}){let r=Eu("edwards",t,e,e.FpFnLE),{Fp:n,Fn:s}=r,o=r.CURVE,{h:i}=o;Ys(e,{},{uvRatio:"function"});let a=hd<<BigInt(s.BYTES*8)-wr,u=I=>n.create(I),h=e.uvRatio||((I,k)=>{try{return{isValid:!0,value:n.sqrt(n.div(I,k))}}catch{return{isValid:!1,value:Js}}});if(!Pv(n,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function m(I,k,z=!1){let M=z?wr:Js;return Ta("coordinate "+I,k,M,a),k}function y(I){if(!(I instanceof R))throw new Error("ExtendedPoint expected")}let O=Ai((I,k)=>{let{X:z,Y:M,Z:K}=I,Z=I.is0();k==null&&(k=Z?kv:n.inv(K));let V=u(z*k),Y=u(M*k),te=n.mul(K,k);if(Z)return{x:Js,y:wr};if(te!==wr)throw new Error("invZ was invalid");return{x:V,y:Y}}),S=Ai(I=>{let{a:k,d:z}=o;if(I.is0())throw new Error("bad point: ZERO");let{X:M,Y:K,Z,T:V}=I,Y=u(M*M),te=u(K*K),j=u(Z*Z),ce=u(j*j),se=u(Y*k),de=u(j*u(se+te)),b=u(ce+u(z*u(Y*te)));if(de!==b)throw new Error("bad point: equation left != right (1)");let c=u(M*K),l=u(Z*V);if(c!==l)throw new Error("bad point: equation left != right (2)");return!0});class R{constructor(k,z,M,K){this.X=m("x",k),this.Y=m("y",z),this.Z=m("z",M,!0),this.T=m("t",K),Object.freeze(this)}static CURVE(){return o}static fromAffine(k){if(k instanceof R)throw new Error("extended point not allowed");let{x:z,y:M}=k||{};return m("x",z),m("y",M),new R(z,M,wr,u(z*M))}static fromBytes(k,z=!1){let M=n.BYTES,{a:K,d:Z}=o;k=sd(an(k,M,"point")),is(z,"zip215");let V=sd(k),Y=k[M-1];V[M-1]=Y&-129;let te=as(V),j=z?a:n.ORDER;Ta("point.y",te,Js,j);let ce=u(te*te),se=u(ce-wr),de=u(Z*ce-K),{isValid:b,value:c}=h(se,de);if(!b)throw new Error("bad point: invalid y coordinate");let l=(c&wr)===wr,p=(Y&128)!==0;if(!z&&c===Js&&p)throw new Error("bad point: x=0 and x_0=1");return p!==l&&(c=u(-c)),R.fromAffine({x:c,y:te})}static fromHex(k,z=!1){return R.fromBytes(wt("point",k),z)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(k=8,z=!0){return A.createCache(this,k),z||this.multiply(hd),this}assertValidity(){S(this)}equals(k){y(k);let{X:z,Y:M,Z:K}=this,{X:Z,Y:V,Z:Y}=k,te=u(z*Y),j=u(Z*K),ce=u(M*Y),se=u(V*K);return te===j&&ce===se}is0(){return this.equals(R.ZERO)}negate(){return new R(u(-this.X),this.Y,this.Z,u(-this.T))}double(){let{a:k}=o,{X:z,Y:M,Z:K}=this,Z=u(z*z),V=u(M*M),Y=u(hd*u(K*K)),te=u(k*Z),j=z+M,ce=u(u(j*j)-Z-V),se=te+V,de=se-Y,b=te-V,c=u(ce*de),l=u(se*b),p=u(ce*b),w=u(de*se);return new R(c,l,w,p)}add(k){y(k);let{a:z,d:M}=o,{X:K,Y:Z,Z:V,T:Y}=this,{X:te,Y:j,Z:ce,T:se}=k,de=u(K*te),b=u(Z*j),c=u(Y*M*se),l=u(V*ce),p=u((K+Z)*(te+j)-de-b),w=l-c,x=l+c,N=u(b-z*de),L=u(p*w),v=u(x*N),d=u(p*N),B=u(w*x);return new R(L,v,B,d)}subtract(k){return this.add(k.negate())}multiply(k){if(!s.isValidNot0(k))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:z,f:M}=A.cached(this,k,K=>us(R,K));return us(R,[z,M])[0]}multiplyUnsafe(k,z=R.ZERO){if(!s.isValid(k))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return k===Js?R.ZERO:this.is0()||k===wr?this:A.unsafe(this,k,M=>us(R,M),z)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return A.unsafe(this,o.n).is0()}toAffine(k){return O(this,k)}clearCofactor(){return i===wr?this:this.multiplyUnsafe(i)}toBytes(){let{x:k,y:z}=this.toAffine(),M=n.toBytes(z);return M[M.length-1]|=k&wr?128:0,M}toHex(){return Rn(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(k){return us(R,k)}static msm(k,z){return Ni(R,s,k,z)}_setWindowSize(k){this.precompute(k)}toRawBytes(){return this.toBytes()}}R.BASE=new R(o.Gx,o.Gy,wr,u(o.Gx*o.Gy)),R.ZERO=new R(Js,wr,wr,Js),R.Fp=n,R.Fn=s;let A=new Oi(R,s.BITS);return R.BASE.precompute(8),R}var bu=class{constructor(e){this.ep=e}static fromBytes(e){od()}static fromHex(e){od()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toHex(){return Rn(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,r){return this.init(this.ep.precompute(e,r))}toRawBytes(){return this.toBytes()}};function Lv(t,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');Ys(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:s,Fp:o,Fn:i}=t,a=r.randomBytes||Ii,u=r.adjustScalarBytes||(j=>j),h=r.domain||((j,ce,se)=>{if(is(se,"phflag"),ce.length||se)throw new Error("Contexts/pre-hash are not supported");return j});function m(j){return i.create(as(j))}function y(j){let ce=M.secretKey;j=wt("private key",j,ce);let se=wt("hashed private key",e(j),2*ce),de=u(se.slice(0,ce)),b=se.slice(ce,2*ce),c=m(de);return{head:de,prefix:b,scalar:c}}function O(j){let{head:ce,prefix:se,scalar:de}=y(j),b=s.multiply(de),c=b.toBytes();return{head:ce,prefix:se,scalar:de,point:b,pointBytes:c}}function S(j){return O(j).pointBytes}function R(j=Uint8Array.of(),...ce){let se=Wr(...ce);return m(e(h(se,wt("context",j),!!n)))}function A(j,ce,se={}){j=wt("message",j),n&&(j=n(j));let{prefix:de,scalar:b,pointBytes:c}=O(ce),l=R(se.context,de,j),p=s.multiply(l).toBytes(),w=R(se.context,p,c,j),x=i.create(l+w*b);if(!i.isValid(x))throw new Error("sign failed: invalid s");let N=Wr(p,i.toBytes(x));return an(N,M.signature,"result")}let I={zip215:!0};function k(j,ce,se,de=I){let{context:b,zip215:c}=de,l=M.signature;j=wt("signature",j,l),ce=wt("message",ce),se=wt("publicKey",se,M.publicKey),c!==void 0&&is(c,"zip215"),n&&(ce=n(ce));let p=l/2,w=j.subarray(0,p),x=as(j.subarray(p,l)),N,L,v;try{N=t.fromBytes(se,c),L=t.fromBytes(w,c),v=s.multiplyUnsafe(x)}catch{return!1}if(!c&&N.isSmallOrder())return!1;let d=R(b,L.toBytes(),N.toBytes(),ce);return L.add(N.multiplyUnsafe(d)).subtract(v).clearCofactor().is0()}let z=o.BYTES,M={secretKey:z,publicKey:z,signature:2*z,seed:z};function K(j=a(M.seed)){return an(j,M.seed,"seed")}function Z(j){let ce=te.randomSecretKey(j);return{secretKey:ce,publicKey:S(ce)}}function V(j){return ns(j)&&j.length===i.BYTES}function Y(j,ce){try{return!!t.fromBytes(j,ce)}catch{return!1}}let te={getExtendedPublicKey:O,randomSecretKey:K,isValidSecretKey:V,isValidPublicKey:Y,toMontgomery(j){let{y:ce}=t.fromBytes(j),se=M.publicKey,de=se===32;if(!de&&se!==57)throw new Error("only defined for 25519 and 448");let b=de?o.div(wr+ce,wr-ce):o.div(ce-wr,ce+wr);return o.toBytes(b)},toMontgomerySecret(j){let ce=M.secretKey;an(j,ce);let se=e(j.subarray(0,ce));return u(se).subarray(0,ce)},randomPrivateKey:K,precompute(j=8,ce=t.BASE){return ce.precompute(j,!1)}};return Object.freeze({keygen:Z,getPublicKey:S,sign:A,verify:k,utils:te,Point:t,lengths:M})}function Dv(t){let e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=cn(e.n,t.nBitLength,!0),s={Fp:r,Fn:n,uvRatio:t.uvRatio},o={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:o}}function Mv(t,e){let r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function bm(t){let{CURVE:e,curveOpts:r,hash:n,eddsaOpts:s}=Dv(t),o=Cv(e,r),i=Lv(o,n,s);return Mv(t,i)}var Uv=BigInt(0),ls=BigInt(1),_m=BigInt(2),r8=BigInt(3),zv=BigInt(5),Fv=BigInt(8),Bi=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Ba={p:Bi,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Fv,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Kv(t){let e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),o=Bi,a=t*t%o*t%o,u=Vt(a,_m,o)*a%o,h=Vt(u,ls,o)*t%o,m=Vt(h,zv,o)*h%o,y=Vt(m,e,o)*m%o,O=Vt(y,r,o)*y%o,S=Vt(O,n,o)*O%o,R=Vt(S,s,o)*S%o,A=Vt(R,s,o)*S%o,I=Vt(A,e,o)*m%o;return{pow_p_5_8:Vt(I,_m,o)*t%o,b2:a}}function Vv(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}var pd=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function yd(t,e){let r=Bi,n=sr(e*e*e,r),s=sr(n*n*e,r),o=Kv(t*s).pow_p_5_8,i=sr(t*n*o,r),a=sr(e*i*i,r),u=i,h=sr(i*pd,r),m=a===t,y=a===sr(-t,r),O=a===sr(-t*pd,r);return m&&(i=u),(y||O)&&(i=h),cs(i,r)&&(i=sr(-i,r)),{isValid:m||y,value:i}}var Zs=cn(Ba.p,{isLE:!0}),Wv=cn(Ba.n,{isLE:!0}),Hv={...Ba,Fp:Zs,hash:Qg,adjustScalarBytes:Vv,uvRatio:yd},Qr=bm(Hv);var gd=pd,qv=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),$v=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),jv=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Gv=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),xm=t=>yd(ls,t),Yv=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),md=t=>Qr.Point.Fp.create(as(t)&Yv);function Rm(t){let{d:e}=Ba,r=Bi,n=k=>Zs.create(k),s=n(gd*t*t),o=n((s+ls)*jv),i=BigInt(-1),a=n((i-e*s)*n(s+e)),{isValid:u,value:h}=yd(o,a),m=n(h*t);cs(m,r)||(m=n(-m)),u||(h=m),u||(i=s);let y=n(i*(s-ls)*Gv-a),O=h*h,S=n((h+h)*a),R=n(y*qv),A=n(ls-O),I=n(ls+O);return new Qr.Point(n(S*I),n(A*R),n(R*I),n(S*A))}function Jv(t){Er(t,64);let e=md(t.subarray(0,32)),r=Rm(e),n=md(t.subarray(32,64)),s=Rm(n);return new fs(r.add(s))}var fs=class t extends bu{constructor(e){super(e)}static fromAffine(e){return new t(Qr.Point.fromAffine(e))}assertSame(e){if(!(e instanceof t))throw new Error("RistrettoPoint expected")}init(e){return new t(e)}static hashToCurve(e){return Jv(wt("ristrettoHash",e,64))}static fromBytes(e){Er(e,32);let{a:r,d:n}=Ba,s=Bi,o=K=>Zs.create(K),i=md(e);if(!tm(Zs.toBytes(i),e)||cs(i,s))throw new Error("invalid ristretto255 encoding 1");let a=o(i*i),u=o(ls+r*a),h=o(ls-r*a),m=o(u*u),y=o(h*h),O=o(r*n*m-y),{isValid:S,value:R}=xm(o(O*y)),A=o(R*h),I=o(R*A*O),k=o((i+i)*A);cs(k,s)&&(k=o(-k));let z=o(u*I),M=o(k*z);if(!S||cs(M,s)||z===Uv)throw new Error("invalid ristretto255 encoding 2");return new t(new Qr.Point(k,z,ls,M))}static fromHex(e){return t.fromBytes(wt("ristrettoHex",e,32))}static msm(e,r){return Ni(t,Qr.Point.Fn,e,r)}toBytes(){let{X:e,Y:r,Z:n,T:s}=this.ep,o=Bi,i=I=>Zs.create(I),a=i(i(n+r)*i(n-r)),u=i(e*r),h=i(u*u),{value:m}=xm(i(a*h)),y=i(m*a),O=i(m*u),S=i(y*O*s),R;if(cs(s*S,o)){let I=i(r*gd),k=i(e*gd);e=I,r=k,R=i(y*$v)}else R=O;cs(e*S,o)&&(r=i(-r));let A=i((n-r)*R);return cs(A,o)&&(A=i(-A)),Zs.toBytes(A)}equals(e){this.assertSame(e);let{X:r,Y:n}=this.ep,{X:s,Y:o}=e.ep,i=h=>Zs.create(h),a=i(r*o)===i(n*s),u=i(n*o)===i(r*s);return a||u}is0(){return this.equals(t.ZERO)}};fs.BASE=new fs(Qr.Point.BASE);fs.ZERO=new fs(Qr.Point.ZERO);fs.Fp=Zs;fs.Fn=Wv;var rh=pr(Ed()),Dr=pr(Bm());var xd=gu;var Wi=pr(Km()),D=pr(Bd()),Ky=pr(Bd());var kd=class extends TypeError{constructor(e,r){let n,{message:s,explanation:o,...i}=e,{path:a}=e,u=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(o??u),o!=null&&(this.cause=u),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}};function EA(t){return Ma(t)&&typeof t[Symbol.iterator]=="function"}function Ma(t){return typeof t=="object"&&t!=null}function Yu(t){return Ma(t)&&!Array.isArray(t)}function Pn(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function bA(t){let{done:e,value:r}=t.next();return e?void 0:r}function _A(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});let{path:s,branch:o}=e,{type:i}=r,{refinement:a,message:u=`Expected a value of type \`${i}\`${a?` with refinement \`${a}\``:""}, but received: \`${Pn(n)}\``}=t;return{value:n,type:i,refinement:a,key:s[s.length-1],path:s,branch:o,...t,message:u}}function*Vm(t,e,r,n){EA(t)||(t=[t]);for(let s of t){let o=_A(s,e,r,n);o&&(yield o)}}function*Pd(t,e,r={}){let{path:n=[],branch:s=[t],coerce:o=!1,mask:i=!1}=r,a={path:n,branch:s,mask:i};o&&(t=e.coercer(t,a));let u="valid";for(let h of e.validator(t,a))h.explanation=r.message,u="not_valid",yield[h,void 0];for(let[h,m,y]of e.entries(t,a)){let O=Pd(m,y,{path:h===void 0?n:[...n,h],branch:h===void 0?s:[...s,m],coerce:o,mask:i,message:r.message});for(let S of O)S[0]?(u=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):o&&(m=S[1],h===void 0?t=m:t instanceof Map?t.set(h,m):t instanceof Set?t.add(m):Ma(t)&&(m!==void 0||h in t)&&(t[h]=m))}if(u!=="not_valid")for(let h of e.refiner(t,a))h.explanation=r.message,u="not_refined",yield[h,void 0];u==="valid"&&(yield[void 0,t])}var Sn=class{constructor(e){let{type:r,schema:n,validator:s,refiner:o,coercer:i=u=>u,entries:a=function*(){}}=e;this.type=r,this.schema=n,this.entries=a,this.coercer=i,s?this.validator=(u,h)=>{let m=s(u,h);return Vm(m,h,this,u)}:this.validator=()=>[],o?this.refiner=(u,h)=>{let m=o(u,h);return Vm(m,h,this,u)}:this.refiner=()=>[]}assert(e,r){return Wm(e,this,r)}create(e,r){return Di(e,this,r)}is(e){return Hm(e,this)}mask(e,r){return xA(e,this,r)}validate(e,r={}){return Ua(e,this,r)}};function Wm(t,e,r){let n=Ua(t,e,{message:r});if(n[0])throw n[0]}function Di(t,e,r){let n=Ua(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function xA(t,e,r){let n=Ua(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function Hm(t,e){return!Ua(t,e)[0]}function Ua(t,e,r={}){let n=Pd(t,e,r),s=bA(n);return s[0]?[new kd(s[0],function*(){for(let i of n)i[0]&&(yield i[0])}),void 0]:[void 0,s[1]]}function Do(t,e){return new Sn({type:t,schema:null,validator:e})}function qm(){return Do("any",()=>!0)}function _e(t){return new Sn({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(let[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Pn(e)}`}})}function Cn(){return Do("boolean",t=>typeof t=="boolean")}function Ju(t){return Do("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Pn(e)}`)}function Wt(t){let e=Pn(t),r=typeof t;return new Sn({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${Pn(n)}`}})}function RA(){return Do("never",()=>!1)}function xe(t){return new Sn({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function q(){return Do("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Pn(t)}`)}function Oe(t){return new Sn({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function Cd(t,e){return new Sn({type:"record",schema:null,*entries(r){if(Ma(r))for(let n in r){let s=r[n];yield[n,n,t],yield[n,s,e]}},validator(r){return Yu(r)||`Expected an object, but received: ${Pn(r)}`},coercer(r){return Yu(r)?{...r}:r}})}function pe(){return Do("string",t=>typeof t=="string"||`Expected a string, but received: ${Pn(t)}`)}function Zu(t){let e=RA();return new Sn({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(t.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],t[s]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${Pn(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function ue(t){let e=Object.keys(t);return new Sn({type:"type",schema:t,*entries(r){if(Ma(r))for(let n of e)yield[n,r[n],t[n]]},validator(r){return Yu(r)||`Expected an object, but received: ${Pn(r)}`},coercer(r){return Yu(r)?{...r}:r}})}function Br(t){let e=t.map(r=>r.type).join(" | ");return new Sn({type:"union",schema:null,coercer(r,n){for(let s of t){let[o,i]=s.validate(r,{coerce:!0,mask:n.mask});if(!o)return i}return r},validator(r,n){let s=[];for(let o of t){let[...i]=Pd(r,o,n),[a]=i;if(a[0])for(let[u]of i)u&&s.push(u);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Pn(r)}`,...s]}})}function Mo(){return Do("unknown",()=>!0)}function Mi(t,e,r){return new Sn({...t,coercer:(n,s)=>Hm(n,e)?t.coercer(r(n,s),s):t.coercer(n,s)})}var h2=pr(gy());var jA=pr(mn(),1);var GA=BigInt(0),Wa=BigInt(1),YA=BigInt(2),JA=BigInt(7),ZA=BigInt(256),XA=BigInt(113),wy=[],Ey=[],by=[];for(let t=0,e=Wa,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],wy.push(2*(5*n+r)),Ey.push((t+1)*(t+2)/2%64);let s=GA;for(let o=0;o<7;o++)e=(e<<Wa^(e>>JA)*XA)%ZA,e&YA&&(s^=Wa<<(Wa<<BigInt(o))-Wa);by.push(s)}var _y=hu(by,!0),QA=_y[0],e2=_y[1],my=(t,e,r)=>r>32?Hg(t,e,r):Vg(t,e,r),yy=(t,e,r)=>r>32?qg(t,e,r):Wg(t,e,r);function t2(t,e=24){let r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let i=0;i<10;i++)r[i]=t[i]^t[i+10]^t[i+20]^t[i+30]^t[i+40];for(let i=0;i<10;i+=2){let a=(i+8)%10,u=(i+2)%10,h=r[u],m=r[u+1],y=my(h,m,1)^r[a],O=yy(h,m,1)^r[a+1];for(let S=0;S<50;S+=10)t[i+S]^=y,t[i+S+1]^=O}let s=t[2],o=t[3];for(let i=0;i<24;i++){let a=Ey[i],u=my(s,o,a),h=yy(s,o,a),m=wy[i];s=t[m],o=t[m+1],t[m]=u,t[m+1]=h}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)r[a]=t[i+a];for(let a=0;a<10;a++)t[i+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=QA[n],t[1]^=e2[n]}xn(r)}var Hd=class t extends Hs{constructor(e,r,n,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=o,Ws(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Mg(this.state)}clone(){return this._cloneInto()}keccak(){Yf(this.state32),t2(this.state32,this.rounds),Yf(this.state32),this.posOut=0,this.pos=0}update(e){ss(this),e=To(e),Er(e);let{blockLen:r,state:n}=this,s=e.length;for(let o=0;o<s;){let i=Math.min(r-this.pos,s-o);for(let a=0;a<i;a++)n[this.pos++]^=e[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ss(this,!1),Er(e),this.finish();let r=this.state,{blockLen:n}=this;for(let s=0,o=e.length;s<o;){this.posOut>=n&&this.keccak();let i=Math.min(n-this.posOut,o-s);e.set(r.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ws(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(lu(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,xn(this.state)}_cloneInto(e){let{blockLen:r,suffix:n,outputLen:s,rounds:o,enableXOF:i}=this;return e||(e=new t(r,n,s,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}},r2=(t,e,r)=>Ra(()=>new Hd(e,t,r));var qd=r2(1,136,256/8);var nl=class extends Hs{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,uu(e);let n=To(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(n.length>s?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),xn(o)}update(e){return ss(this),this.iHash.update(e),this}digestInto(e){ss(this),Er(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},$d=(t,e,r)=>new nl(t,e).update(r).digest();$d.create=(t,e)=>new nl(t,e);var xy=(t,e)=>(t+(t>=0?e:-e)/Ry)/e;function n2(t,e,r){let[[n,s],[o,i]]=e,a=xy(i*t,r),u=xy(-s*t,r),h=t-a*n-u*o,m=-a*s-u*i,y=h<gs,O=m<gs;y&&(h=-h),O&&(m=-m);let S=Gs(Math.ceil(yu(r)/2))+zi;if(h<gs||h>=S||m<gs||m>=S)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:y,k1:h,k2neg:O,k2:m}}function Gd(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function jd(t,e){let r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return is(r.lowS,"lowS"),is(r.prehash,"prehash"),r.format!==void 0&&Gd(r.format),r}var Yd=class extends Error{constructor(e=""){super(e)}},ps={Err:Yd,_tlv:{encode:(t,e)=>{let{Err:r}=ps;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");let n=e.length/2,s=Aa(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");let o=n>127?Aa(s.length/2|128):"";return Aa(t)+o+s+e},decode(t,e){let{Err:r}=ps,n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");let s=e[n++],o=!!(s&128),i=0;if(!o)i=s;else{let u=s&127;if(!u)throw new r("tlv.decode(long): indefinite length not supported");if(u>4)throw new r("tlv.decode(long): byte length is too big");let h=e.subarray(n,n+u);if(h.length!==u)throw new r("tlv.decode: length bytes not complete");if(h[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let m of h)i=i<<8|m;if(n+=u,i<128)throw new r("tlv.decode(long): not minimal encoding")}let a=e.subarray(n,n+i);if(a.length!==i)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+i)}}},_int:{encode(t){let{Err:e}=ps;if(t<gs)throw new e("integer: negative integers are not allowed");let r=Aa(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){let{Err:e}=ps;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return vi(t)}},toSig(t){let{Err:e,_int:r,_tlv:n}=ps,s=wt("signature",t),{v:o,l:i}=n.decode(48,s);if(i.length)throw new e("invalid signature: left bytes after parsing");let{v:a,l:u}=n.decode(2,o),{v:h,l:m}=n.decode(2,u);if(m.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(h)}},hexFromSig(t){let{_tlv:e,_int:r}=ps,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),o=n+s;return e.encode(48,o)}},gs=BigInt(0),zi=BigInt(1),Ry=BigInt(2),sl=BigInt(3),s2=BigInt(4);function Ui(t,e){let{BYTES:r}=t,n;if(typeof e=="bigint")n=e;else{let s=wt("private key",e);try{n=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function o2(t,e={}){let r=Eu("weierstrass",t,e),{Fp:n,Fn:s}=r,o=r.CURVE,{h:i,n:a}=o;Ys(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:u}=e;if(u&&(!n.is0(o.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let h=Iy(n,s);function m(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function y(de,b,c){let{x:l,y:p}=b.toAffine(),w=n.toBytes(l);if(is(c,"isCompressed"),c){m();let x=!n.isOdd(p);return Wr(Sy(x),w)}else return Wr(Uint8Array.of(4),w,n.toBytes(p))}function O(de){an(de,void 0,"Point");let{publicKey:b,publicKeyUncompressed:c}=h,l=de.length,p=de[0],w=de.subarray(1);if(l===b&&(p===2||p===3)){let x=n.fromBytes(w);if(!n.isValid(x))throw new Error("bad point: is not on curve, wrong x");let N=A(x),L;try{L=n.sqrt(N)}catch(B){let X=B instanceof Error?": "+B.message:"";throw new Error("bad point: is not on curve, sqrt error"+X)}m();let v=n.isOdd(L);return(p&1)===1!==v&&(L=n.neg(L)),{x,y:L}}else if(l===c&&p===4){let x=n.BYTES,N=n.fromBytes(w.subarray(0,x)),L=n.fromBytes(w.subarray(x,x*2));if(!I(N,L))throw new Error("bad point: is not on curve");return{x:N,y:L}}else throw new Error(`bad point: got length ${l}, expected compressed=${b} or uncompressed=${c}`)}let S=e.toBytes||y,R=e.fromBytes||O;function A(de){let b=n.sqr(de),c=n.mul(b,de);return n.add(n.add(c,n.mul(de,o.a)),o.b)}function I(de,b){let c=n.sqr(b),l=A(de);return n.eql(c,l)}if(!I(o.Gx,o.Gy))throw new Error("bad curve params: generator point");let k=n.mul(n.pow(o.a,sl),s2),z=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(k,z)))throw new Error("bad curve params: a or b");function M(de,b,c=!1){if(!n.isValid(b)||c&&n.is0(b))throw new Error(`bad point coordinate ${de}`);return b}function K(de){if(!(de instanceof j))throw new Error("ProjectivePoint expected")}function Z(de){if(!u||!u.basises)throw new Error("no endo");return n2(de,u.basises,s.ORDER)}let V=Ai((de,b)=>{let{X:c,Y:l,Z:p}=de;if(n.eql(p,n.ONE))return{x:c,y:l};let w=de.is0();b==null&&(b=w?n.ONE:n.inv(p));let x=n.mul(c,b),N=n.mul(l,b),L=n.mul(p,b);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(L,n.ONE))throw new Error("invZ was invalid");return{x,y:N}}),Y=Ai(de=>{if(de.is0()){if(e.allowInfinityPoint&&!n.is0(de.Y))return;throw new Error("bad point: ZERO")}let{x:b,y:c}=de.toAffine();if(!n.isValid(b)||!n.isValid(c))throw new Error("bad point: x or y not field elements");if(!I(b,c))throw new Error("bad point: equation left != right");if(!de.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function te(de,b,c,l,p){return c=new j(n.mul(c.X,de),c.Y,c.Z),b=Na(l,b),c=Na(p,c),b.add(c)}class j{constructor(b,c,l){this.X=M("x",b),this.Y=M("y",c,!0),this.Z=M("z",l),Object.freeze(this)}static CURVE(){return o}static fromAffine(b){let{x:c,y:l}=b||{};if(!b||!n.isValid(c)||!n.isValid(l))throw new Error("invalid affine point");if(b instanceof j)throw new Error("projective point not allowed");return n.is0(c)&&n.is0(l)?j.ZERO:new j(c,l,n.ONE)}static fromBytes(b){let c=j.fromAffine(R(an(b,void 0,"point")));return c.assertValidity(),c}static fromHex(b){return j.fromBytes(wt("pointHex",b))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,c=!0){return se.createCache(this,b),c||this.multiply(sl),this}assertValidity(){Y(this)}hasEvenY(){let{y:b}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(b)}equals(b){K(b);let{X:c,Y:l,Z:p}=this,{X:w,Y:x,Z:N}=b,L=n.eql(n.mul(c,N),n.mul(w,p)),v=n.eql(n.mul(l,N),n.mul(x,p));return L&&v}negate(){return new j(this.X,n.neg(this.Y),this.Z)}double(){let{a:b,b:c}=o,l=n.mul(c,sl),{X:p,Y:w,Z:x}=this,N=n.ZERO,L=n.ZERO,v=n.ZERO,d=n.mul(p,p),B=n.mul(w,w),X=n.mul(x,x),oe=n.mul(p,w);return oe=n.add(oe,oe),v=n.mul(p,x),v=n.add(v,v),N=n.mul(b,v),L=n.mul(l,X),L=n.add(N,L),N=n.sub(B,L),L=n.add(B,L),L=n.mul(N,L),N=n.mul(oe,N),v=n.mul(l,v),X=n.mul(b,X),oe=n.sub(d,X),oe=n.mul(b,oe),oe=n.add(oe,v),v=n.add(d,d),d=n.add(v,d),d=n.add(d,X),d=n.mul(d,oe),L=n.add(L,d),X=n.mul(w,x),X=n.add(X,X),d=n.mul(X,oe),N=n.sub(N,d),v=n.mul(X,B),v=n.add(v,v),v=n.add(v,v),new j(N,L,v)}add(b){K(b);let{X:c,Y:l,Z:p}=this,{X:w,Y:x,Z:N}=b,L=n.ZERO,v=n.ZERO,d=n.ZERO,B=o.a,X=n.mul(o.b,sl),oe=n.mul(c,w),he=n.mul(l,x),we=n.mul(p,N),Ne=n.add(c,l),ve=n.add(w,x);Ne=n.mul(Ne,ve),ve=n.add(oe,he),Ne=n.sub(Ne,ve),ve=n.add(c,p);let rt=n.add(w,N);return ve=n.mul(ve,rt),rt=n.add(oe,we),ve=n.sub(ve,rt),rt=n.add(l,p),L=n.add(x,N),rt=n.mul(rt,L),L=n.add(he,we),rt=n.sub(rt,L),d=n.mul(B,ve),L=n.mul(X,we),d=n.add(L,d),L=n.sub(he,d),d=n.add(he,d),v=n.mul(L,d),he=n.add(oe,oe),he=n.add(he,oe),we=n.mul(B,we),ve=n.mul(X,ve),he=n.add(he,we),we=n.sub(oe,we),we=n.mul(B,we),ve=n.add(ve,we),oe=n.mul(he,ve),v=n.add(v,oe),oe=n.mul(rt,ve),L=n.mul(Ne,L),L=n.sub(L,oe),oe=n.mul(Ne,he),d=n.mul(rt,d),d=n.add(d,oe),new j(L,v,d)}subtract(b){return this.add(b.negate())}is0(){return this.equals(j.ZERO)}multiply(b){let{endo:c}=e;if(!s.isValidNot0(b))throw new Error("invalid scalar: out of range");let l,p,w=x=>se.cached(this,x,N=>us(j,N));if(c){let{k1neg:x,k1:N,k2neg:L,k2:v}=Z(b),{p:d,f:B}=w(N),{p:X,f:oe}=w(v);p=B.add(oe),l=te(c.beta,d,X,x,L)}else{let{p:x,f:N}=w(b);l=x,p=N}return us(j,[l,p])[0]}multiplyUnsafe(b){let{endo:c}=e,l=this;if(!s.isValid(b))throw new Error("invalid scalar: out of range");if(b===gs||l.is0())return j.ZERO;if(b===zi)return l;if(se.hasCache(this))return this.multiply(b);if(c){let{k1neg:p,k1:w,k2neg:x,k2:N}=Z(b),{p1:L,p2:v}=Em(j,l,w,N);return te(c.beta,L,v,p,x)}else return se.unsafe(l,b)}multiplyAndAddUnsafe(b,c,l){let p=this.multiplyUnsafe(c).add(b.multiplyUnsafe(l));return p.is0()?void 0:p}toAffine(b){return V(this,b)}isTorsionFree(){let{isTorsionFree:b}=e;return i===zi?!0:b?b(j,this):se.unsafe(this,a).is0()}clearCofactor(){let{clearCofactor:b}=e;return i===zi?this:b?b(j,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(b=!0){return is(b,"isCompressed"),this.assertValidity(),S(j,this,b)}toHex(b=!0){return Rn(this.toBytes(b))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(b=!0){return this.toBytes(b)}_setWindowSize(b){this.precompute(b)}static normalizeZ(b){return us(j,b)}static msm(b,c){return Ni(j,s,b,c)}static fromPrivateKey(b){return j.BASE.multiply(Ui(s,b))}}j.BASE=new j(o.Gx,o.Gy,n.ONE),j.ZERO=new j(n.ZERO,n.ONE,n.ZERO),j.Fp=n,j.Fn=s;let ce=s.BITS,se=new Oi(j,e.endo?Math.ceil(ce/2):ce);return j.BASE.precompute(8),j}function Sy(t){return Uint8Array.of(t?2:3)}function Iy(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function i2(t,e={}){let{Fn:r}=t,n=e.randomBytes||Ii,s=Object.assign(Iy(t.Fp,r),{seed:cd(r.ORDER)});function o(S){try{return!!Ui(r,S)}catch{return!1}}function i(S,R){let{publicKey:A,publicKeyUncompressed:I}=s;try{let k=S.length;return R===!0&&k!==A||R===!1&&k!==I?!1:!!t.fromBytes(S)}catch{return!1}}function a(S=n(s.seed)){return ud(an(S,s.seed,"seed"),r.ORDER)}function u(S,R=!0){return t.BASE.multiply(Ui(r,S)).toBytes(R)}function h(S){let R=a(S);return{secretKey:R,publicKey:u(R)}}function m(S){if(typeof S=="bigint")return!1;if(S instanceof t)return!0;let{secretKey:R,publicKey:A,publicKeyUncompressed:I}=s;if(r.allowedLengths||R===A)return;let k=wt("key",S).length;return k===A||k===I}function y(S,R,A=!0){if(m(S)===!0)throw new Error("first arg must be private key");if(m(R)===!1)throw new Error("second arg must be public key");let I=Ui(r,S);return t.fromHex(R).multiply(I).toBytes(A)}return Object.freeze({getPublicKey:u,getSharedSecret:y,keygen:h,Point:t,utils:{isValidSecretKey:o,isValidPublicKey:i,randomSecretKey:a,isValidPrivateKey:o,randomPrivateKey:a,normPrivateKeyToScalar:S=>Ui(r,S),precompute(S=8,R=t.BASE){return R.precompute(S,!1)}},lengths:s})}function a2(t,e,r={}){uu(e),Ys(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=r.randomBytes||Ii,s=r.hmac||((c,...l)=>$d(e,c,Wr(...l))),{Fp:o,Fn:i}=t,{ORDER:a,BITS:u}=i,{keygen:h,getPublicKey:m,getSharedSecret:y,utils:O,lengths:S}=i2(t,r),R={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},A="compact";function I(c){let l=a>>zi;return c>l}function k(c,l){if(!i.isValidNot0(l))throw new Error(`invalid signature ${c}: out of range 1..Point.Fn.ORDER`);return l}function z(c,l){Gd(l);let p=S.signature,w=l==="compact"?p:l==="recovered"?p+1:void 0;return an(c,w,`${l} signature`)}class M{constructor(l,p,w){this.r=k("r",l),this.s=k("s",p),w!=null&&(this.recovery=w),Object.freeze(this)}static fromBytes(l,p=A){z(l,p);let w;if(p==="der"){let{r:v,s:d}=ps.toSig(an(l));return new M(v,d)}p==="recovered"&&(w=l[0],p="compact",l=l.subarray(1));let x=i.BYTES,N=l.subarray(0,x),L=l.subarray(x,x*2);return new M(i.fromBytes(N),i.fromBytes(L),w)}static fromHex(l,p){return this.fromBytes(Ao(l),p)}addRecoveryBit(l){return new M(this.r,this.s,l)}recoverPublicKey(l){let p=o.ORDER,{r:w,s:x,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*Ry<p&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");let v=N===2||N===3?w+a:w;if(!o.isValid(v))throw new Error("recovery id 2 or 3 invalid");let d=o.toBytes(v),B=t.fromBytes(Wr(Sy((N&1)===0),d)),X=i.inv(v),oe=Z(wt("msgHash",l)),he=i.create(-oe*X),we=i.create(x*X),Ne=t.BASE.multiplyUnsafe(he).add(B.multiplyUnsafe(we));if(Ne.is0())throw new Error("point at infinify");return Ne.assertValidity(),Ne}hasHighS(){return I(this.s)}toBytes(l=A){if(Gd(l),l==="der")return Ao(ps.hexFromSig(this));let p=i.toBytes(this.r),w=i.toBytes(this.s);if(l==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Wr(Uint8Array.of(this.recovery),p,w)}return Wr(p,w)}toHex(l){return Rn(this.toBytes(l))}assertValidity(){}static fromCompact(l){return M.fromBytes(wt("sig",l),"compact")}static fromDER(l){return M.fromBytes(wt("sig",l),"der")}normalizeS(){return this.hasHighS()?new M(this.r,i.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Rn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Rn(this.toBytes("compact"))}}let K=r.bits2int||function(l){if(l.length>8192)throw new Error("input is too large");let p=vi(l),w=l.length*8-u;return w>0?p>>BigInt(w):p},Z=r.bits2int_modN||function(l){return i.create(K(l))},V=Gs(u);function Y(c){return Ta("num < 2^"+u,c,gs,V),i.toBytes(c)}function te(c,l){return an(c,void 0,"message"),l?an(e(c),void 0,"prehashed message"):c}function j(c,l,p){if(["recovered","canonical"].some(he=>he in p))throw new Error("sign() legacy options not supported");let{lowS:w,prehash:x,extraEntropy:N}=jd(p,R);c=te(c,x);let L=Z(c),v=Ui(i,l),d=[Y(v),Y(L)];if(N!=null&&N!==!1){let he=N===!0?n(S.secretKey):N;d.push(wt("extraEntropy",he))}let B=Wr(...d),X=L;function oe(he){let we=K(he);if(!i.isValidNot0(we))return;let Ne=i.inv(we),ve=t.BASE.multiply(we).toAffine(),rt=i.create(ve.x);if(rt===gs)return;let Xe=i.create(Ne*i.create(X+rt*v));if(Xe===gs)return;let $e=(ve.x===rt?0:2)|Number(ve.y&zi),jr=Xe;return w&&I(Xe)&&(jr=i.neg(Xe),$e^=1),new M(rt,jr,$e)}return{seed:B,k2sig:oe}}function ce(c,l,p={}){c=wt("message",c);let{seed:w,k2sig:x}=j(c,l,p);return nm(e.outputLen,i.BYTES,s)(w,x)}function se(c){let l,p=typeof c=="string"||ns(c),w=!p&&c!==null&&typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint";if(!p&&!w)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(w)l=new M(c.r,c.s);else if(p){try{l=M.fromBytes(wt("sig",c),"der")}catch(x){if(!(x instanceof ps.Err))throw x}if(!l)try{l=M.fromBytes(wt("sig",c),"compact")}catch{return!1}}return l||!1}function de(c,l,p,w={}){let{lowS:x,prehash:N,format:L}=jd(w,R);if(p=wt("publicKey",p),l=te(wt("message",l),N),"strict"in w)throw new Error("options.strict was renamed to lowS");let v=L===void 0?se(c):M.fromBytes(wt("sig",c),L);if(v===!1)return!1;try{let d=t.fromBytes(p);if(x&&v.hasHighS())return!1;let{r:B,s:X}=v,oe=Z(l),he=i.inv(X),we=i.create(oe*he),Ne=i.create(B*he),ve=t.BASE.multiplyUnsafe(we).add(d.multiplyUnsafe(Ne));return ve.is0()?!1:i.create(ve.x)===B}catch{return!1}}function b(c,l,p={}){let{prehash:w}=jd(p,R);return l=te(l,w),M.fromBytes(c,"recovered").recoverPublicKey(l).toBytes()}return Object.freeze({keygen:h,getPublicKey:m,getSharedSecret:y,utils:O,lengths:S,Point:t,sign:ce,verify:de,recoverPublicKey:b,Signature:M,hash:e})}function c2(t){let e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(i=>Math.ceil(i/2)))):void 0,s=cn(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),o={Fp:r,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:o}}function u2(t){let{CURVE:e,curveOpts:r}=c2(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function l2(t,e){let r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,wu(r.Fn.ORDER,r.Fn.BITS))})}function vy(t){let{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:s}=u2(t),o=o2(e,r),i=a2(o,n,s);return l2(t,i)}function Ay(t,e){let r=n=>vy({...t,hash:n});return{...r(e),create:r}}var Zd={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},f2={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]};var Ty=BigInt(2);function d2(t){let e=Zd.p,r=BigInt(3),n=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),a=BigInt(44),u=BigInt(88),h=t*t*t%e,m=h*h*t%e,y=Vt(m,r,e)*m%e,O=Vt(y,r,e)*m%e,S=Vt(O,Ty,e)*h%e,R=Vt(S,s,e)*S%e,A=Vt(R,o,e)*R%e,I=Vt(A,a,e)*A%e,k=Vt(I,u,e)*I%e,z=Vt(k,a,e)*A%e,M=Vt(z,r,e)*m%e,K=Vt(M,i,e)*R%e,Z=Vt(K,n,e)*h%e,V=Vt(Z,Ty,e);if(!Jd.eql(Jd.sqr(V),t))throw new Error("Cannot find square root");return V}var Jd=cn(Zd.p,{sqrt:d2}),ol=Ay({...Zd,Fp:Jd,lowS:!0,endo:f2},gu);var P5=Qr.utils.randomPrivateKey,Oy=()=>{let t=Qr.utils.randomPrivateKey(),e=nh(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},nh=Qr.getPublicKey;function Ny(t){try{return Qr.ExtendedPoint.fromHex(t),!0}catch{return!1}}var yh=(t,e)=>Qr.sign(t,e.slice(0,32)),p2=Qr.verify,ft=t=>Ke.Buffer.isBuffer(t)?t:t instanceof Uint8Array?Ke.Buffer.from(t.buffer,t.byteOffset,t.byteLength):Ke.Buffer.from(t),sh=class{constructor(e){Object.assign(this,e)}encode(){return Ke.Buffer.from((0,Wi.serialize)(al,this))}static decode(e){return(0,Wi.deserialize)(al,this,e)}static decodeUnchecked(e){return(0,Wi.deserializeUnchecked)(al,this,e)}};var al=new Map,Vy,g2=32,so=32;function m2(t){return t._bn!==void 0}var By=1,Ye=class t extends sh{constructor(e){if(super({}),this._bn=void 0,m2(e))this._bn=e._bn;else{if(typeof e=="string"){let r=Dr.default.decode(e);if(r.length!=so)throw new Error("Invalid public key input");this._bn=new rh.default(r)}else this._bn=new rh.default(e);if(this._bn.byteLength()>so)throw new Error("Invalid public key input")}}static unique(){let e=new t(By);return By+=1,new t(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Dr.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(Ke.Buffer);if(e.length===so)return e;let r=Ke.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){let s=Ke.Buffer.concat([e.toBuffer(),Ke.Buffer.from(r),n.toBuffer()]),o=xd(s);return new t(o)}static createProgramAddressSync(e,r){let n=Ke.Buffer.alloc(0);e.forEach(function(o){if(o.length>g2)throw new TypeError("Max seed length exceeded");n=Ke.Buffer.concat([n,ft(o)])}),n=Ke.Buffer.concat([n,r.toBuffer(),Ke.Buffer.from("ProgramDerivedAddress")]);let s=xd(n);if(Ny(s))throw new Error("Invalid seeds, address must fall off the curve");return new t(s)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,s;for(;n!=0;){try{let o=e.concat(Ke.Buffer.from([n]));s=this.createProgramAddressSync(o,r)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){let r=new t(e);return Ny(r.toBytes())}};Vy=Ye;Ye.default=new Vy("11111111111111111111111111111111");al.set(Ye,{kind:"struct",fields:[["_bn","u256"]]});var C5=new Ye("BPFLoader1111111111111111111111111111111111"),Uo=1232,wh=127,cl=64,oh=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}};Object.defineProperty(oh.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var ih=class extends Error{constructor(e,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}};Object.defineProperty(ih.prototype,"name",{value:"TransactionExpiredTimeoutError"});var ah=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}};Object.defineProperty(ah.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Ki=class{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((o,i)=>{n.set(o.toBase58(),i)});let s=o=>{let i=n.get(o.toBase58());if(i===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return i};return e.map(o=>({programIdIndex:s(o.programId),accountKeyIndexes:o.keys.map(i=>s(i.pubkey)),data:o.data}))}},tt=(t="publicKey")=>D.blob(32,t),y2=(t="signature")=>D.blob(64,t),Fi=(t="string")=>{let e=D.struct([D.u32("length"),D.u32("lengthPadding"),D.blob(D.offset(D.u32(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(o,i)=>r(o,i).chars.toString(),s.encode=(o,i,a)=>{let u={chars:Ke.Buffer.from(o,"utf8")};return n(u,i,a)},s.alloc=o=>D.u32().span+D.u32().span+Ke.Buffer.from(o,"utf8").length,s},w2=(t="authorized")=>D.struct([tt("staker"),tt("withdrawer")],t),E2=(t="lockup")=>D.struct([D.ns64("unixTimestamp"),D.ns64("epoch"),tt("custodian")],t),b2=(t="voteInit")=>D.struct([tt("nodePubkey"),tt("authorizedVoter"),tt("authorizedWithdrawer"),D.u8("commission")],t),_2=(t="voteAuthorizeWithSeedArgs")=>D.struct([D.u32("voteAuthorizationType"),tt("currentAuthorityDerivedKeyOwnerPubkey"),Fi("currentAuthorityDerivedKeySeed"),tt("newAuthorized")],t);function Wy(t,e){let r=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){let o=e[s.property];if(Array.isArray(o))return o.length*r(s.elementLayout)}else if("fields"in s)return Wy({layout:s},e[s.property]);return 0},n=0;return t.layout.fields.forEach(s=>{n+=r(s)}),n}function ln(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,(n&128)===0)break}return e}function fn(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function Ct(t,e){if(!t)throw new Error(e||"Assertion failed")}var ul=class t{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){let n=new Map,s=i=>{let a=i.toBase58(),u=n.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,u)),u},o=s(r);o.isSigner=!0,o.isWritable=!0;for(let i of e){s(i.programId).isInvoked=!0;for(let a of i.keys){let u=s(a.pubkey);u.isSigner||(u.isSigner=a.isSigner),u.isWritable||(u.isWritable=a.isWritable)}}return new t(r,n)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];Ct(e.length<=256,"Max static account keys length exceeded");let r=e.filter(([,u])=>u.isSigner&&u.isWritable),n=e.filter(([,u])=>u.isSigner&&!u.isWritable),s=e.filter(([,u])=>!u.isSigner&&u.isWritable),o=e.filter(([,u])=>!u.isSigner&&!u.isWritable),i={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:o.length};{Ct(r.length>0,"Expected at least one writable signer key");let[u]=r[0];Ct(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let a=[...r.map(([u])=>new Ye(u)),...n.map(([u])=>new Ye(u)),...s.map(([u])=>new Ye(u)),...o.map(([u])=>new Ye(u))];return[i,a]}extractTableLookup(e){let[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,i=>!i.isSigner&&!i.isInvoked&&i.isWritable),[s,o]=this.drainKeysFoundInLookupTable(e.state.addresses,i=>!i.isSigner&&!i.isInvoked&&!i.isWritable);if(!(r.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:s},{writable:n,readonly:o}]}drainKeysFoundInLookupTable(e,r){let n=new Array,s=new Array;for(let[o,i]of this.keyMetaMap.entries())if(r(i)){let a=new Ye(o),u=e.findIndex(h=>h.equals(a));u>=0&&(Ct(u<256,"Max lookup table index exceeded"),n.push(u),s.push(a),this.keyMetaMap.delete(o))}return[n,s]}},Hy="Reached end of buffer unexpectedly";function ys(t){if(t.length===0)throw new Error(Hy);return t.shift()}function dn(t,...e){let[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(Hy);return t.splice(...e)}var $a=class t{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new Ye(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Dr.default.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ki(this.staticAccountKeys)}static compile(e){let r=ul.compile(e.instructions,e.payerKey),[n,s]=r.getMessageComponents(),i=new Ki(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Dr.default.encode(a.data)}));return new t({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){let n=e-r,o=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<o}else{let n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){let e=this.accountKeys.length,r=[];fn(r,e);let n=this.instructions.map(y=>{let{accounts:O,programIdIndex:S}=y,R=Array.from(Dr.default.decode(y.data)),A=[];fn(A,O.length);let I=[];return fn(I,R.length),{programIdIndex:S,keyIndicesCount:Ke.Buffer.from(A),keyIndices:O,dataLength:Ke.Buffer.from(I),data:R}}),s=[];fn(s,n.length);let o=Ke.Buffer.alloc(Uo);Ke.Buffer.from(s).copy(o);let i=s.length;n.forEach(y=>{let S=D.struct([D.u8("programIdIndex"),D.blob(y.keyIndicesCount.length,"keyIndicesCount"),D.seq(D.u8("keyIndex"),y.keyIndices.length,"keyIndices"),D.blob(y.dataLength.length,"dataLength"),D.seq(D.u8("userdatum"),y.data.length,"data")]).encode(y,o,i);i+=S}),o=o.slice(0,i);let a=D.struct([D.blob(1,"numRequiredSignatures"),D.blob(1,"numReadonlySignedAccounts"),D.blob(1,"numReadonlyUnsignedAccounts"),D.blob(r.length,"keyCount"),D.seq(tt("key"),e,"keys"),tt("recentBlockhash")]),u={numRequiredSignatures:Ke.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Ke.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Ke.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Ke.Buffer.from(r),keys:this.accountKeys.map(y=>ft(y.toBytes())),recentBlockhash:Dr.default.decode(this.recentBlockhash)},h=Ke.Buffer.alloc(2048),m=a.encode(u,h);return o.copy(h,m),h.slice(0,m+o.length)}static from(e){let r=[...e],n=ys(r);if(n!==(n&wh))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let s=ys(r),o=ys(r),i=ln(r),a=[];for(let O=0;O<i;O++){let S=dn(r,0,so);a.push(new Ye(Ke.Buffer.from(S)))}let u=dn(r,0,so),h=ln(r),m=[];for(let O=0;O<h;O++){let S=ys(r),R=ln(r),A=dn(r,0,R),I=ln(r),k=dn(r,0,I),z=Dr.default.encode(Ke.Buffer.from(k));m.push({programIdIndex:S,accounts:A,data:z})}let y={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:o},recentBlockhash:Dr.default.encode(Ke.Buffer.from(u)),accountKeys:a,instructions:m};return new t(y)}},ch=class t{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ki(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){let s=e-n,o=this.addressTableLookups.reduce((i,a)=>i+a.writableIndexes.length,0);return s<o}else if(e>=this.header.numRequiredSignatures){let s=e-r,i=n-r-this.header.numReadonlyUnsignedAccounts;return s<i}else{let s=r-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){let r={writable:[],readonly:[]};for(let n of this.addressTableLookups){let s=e.find(o=>o.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let o of n.writableIndexes)if(o<s.state.addresses.length)r.writable.push(s.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`);for(let o of n.readonlyIndexes)if(o<s.state.addresses.length)r.readonly.push(s.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){let r=ul.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(let m of o){let y=r.extractTableLookup(m);if(y!==void 0){let[O,{writable:S,readonly:R}]=y;n.push(O),s.writable.push(...S),s.readonly.push(...R)}}let[i,a]=r.getMessageComponents(),h=new Ki(a,s).compileInstructions(e.instructions);return new t({header:i,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){let e=Array();fn(e,this.staticAccountKeys.length);let r=this.serializeInstructions(),n=Array();fn(n,this.compiledInstructions.length);let s=this.serializeAddressTableLookups(),o=Array();fn(o,this.addressTableLookups.length);let i=D.struct([D.u8("prefix"),D.struct([D.u8("numRequiredSignatures"),D.u8("numReadonlySignedAccounts"),D.u8("numReadonlyUnsignedAccounts")],"header"),D.blob(e.length,"staticAccountKeysLength"),D.seq(tt(),this.staticAccountKeys.length,"staticAccountKeys"),tt("recentBlockhash"),D.blob(n.length,"instructionsLength"),D.blob(r.length,"serializedInstructions"),D.blob(o.length,"addressTableLookupsLength"),D.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Uo),h=i.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(m=>m.toBytes()),recentBlockhash:Dr.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:s},a);return a.slice(0,h)}serializeInstructions(){let e=0,r=new Uint8Array(Uo);for(let n of this.compiledInstructions){let s=Array();fn(s,n.accountKeyIndexes.length);let o=Array();fn(o,n.data.length);let i=D.struct([D.u8("programIdIndex"),D.blob(s.length,"encodedAccountKeyIndexesLength"),D.seq(D.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),D.blob(o.length,"encodedDataLength"),D.blob(n.data.length,"data")]);e+=i.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0,r=new Uint8Array(Uo);for(let n of this.addressTableLookups){let s=Array();fn(s,n.writableIndexes.length);let o=Array();fn(o,n.readonlyIndexes.length);let i=D.struct([tt("accountKey"),D.blob(s.length,"encodedWritableIndexesLength"),D.seq(D.u8(),n.writableIndexes.length,"writableIndexes"),D.blob(o.length,"encodedReadonlyIndexesLength"),D.seq(D.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=i.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e],n=ys(r),s=n&wh;Ct(n!==s,"Expected versioned message but received legacy message");let o=s;Ct(o===0,`Expected versioned message with version 0 but found version ${o}`);let i={numRequiredSignatures:ys(r),numReadonlySignedAccounts:ys(r),numReadonlyUnsignedAccounts:ys(r)},a=[],u=ln(r);for(let R=0;R<u;R++)a.push(new Ye(dn(r,0,so)));let h=Dr.default.encode(dn(r,0,so)),m=ln(r),y=[];for(let R=0;R<m;R++){let A=ys(r),I=ln(r),k=dn(r,0,I),z=ln(r),M=new Uint8Array(dn(r,0,z));y.push({programIdIndex:A,accountKeyIndexes:k,data:M})}let O=ln(r),S=[];for(let R=0;R<O;R++){let A=new Ye(dn(r,0,so)),I=ln(r),k=dn(r,0,I),z=ln(r),M=dn(r,0,z);S.push({accountKey:A,writableIndexes:k,readonlyIndexes:M})}return new t({header:i,staticAccountKeys:a,recentBlockhash:h,compiledInstructions:y,addressTableLookups:S})}},qy={deserializeMessageVersion(t){let e=t[0],r=e&wh;return r===e?"legacy":r},deserialize:t=>{let e=qy.deserializeMessageVersion(t);if(e==="legacy")return $a.from(t);if(e===0)return ch.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};var x2=Ke.Buffer.alloc(cl).fill(0),St=class{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Ke.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},Tt=class t{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{let{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new St(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<r.length;A++)if(r[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);let s=[],o=[];r.forEach(A=>{A.keys.forEach(k=>{o.push({...k})});let I=A.programId.toString();s.includes(I)||s.push(I)}),s.forEach(A=>{o.push({pubkey:new Ye(A),isSigner:!1,isWritable:!1})});let i=[];o.forEach(A=>{let I=A.pubkey.toString(),k=i.findIndex(z=>z.pubkey.toString()===I);k>-1?(i[k].isWritable=i[k].isWritable||A.isWritable,i[k].isSigner=i[k].isSigner||A.isSigner):i.push(A)}),i.sort(function(A,I){if(A.isSigner!==I.isSigner)return A.isSigner?-1:1;if(A.isWritable!==I.isWritable)return A.isWritable?-1:1;let k={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(I.pubkey.toBase58(),"en",k)});let a=i.findIndex(A=>A.pubkey.equals(n));if(a>-1){let[A]=i.splice(a,1);A.isSigner=!0,A.isWritable=!0,i.unshift(A)}else i.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let A of this.signatures){let I=i.findIndex(k=>k.pubkey.equals(A.publicKey));if(I>-1)i[I].isSigner||(i[I].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let u=0,h=0,m=0,y=[],O=[];i.forEach(({pubkey:A,isSigner:I,isWritable:k})=>{I?(y.push(A.toString()),u+=1,k||(h+=1)):(O.push(A.toString()),k||(m+=1))});let S=y.concat(O),R=r.map(A=>{let{data:I,programId:k}=A;return{programIdIndex:S.indexOf(k.toString()),accounts:A.keys.map(z=>S.indexOf(z.pubkey.toString())),data:Dr.default.encode(I)}});return R.forEach(A=>{Ct(A.programIdIndex>=0),A.accounts.forEach(I=>Ct(I>=0))}),new $a({header:{numRequiredSignatures:u,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:m},accountKeys:S,recentBlockhash:e,instructions:R})}_compile(){let e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((s,o)=>r[o].equals(s.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");let r=new Set;this.signatures=e.filter(n=>{let s=n.toString();return r.has(s)?!1:(r.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of e){let i=o.publicKey.toString();r.has(i)||(r.add(i),n.push(o))}this.signatures=n.map(o=>({signature:null,publicKey:o.publicKey}));let s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of e){let i=o.publicKey.toString();r.has(i)||(r.add(i),n.push(o))}let s=this._compile();this._partialSign(s,...n)}_partialSign(e,...r){let n=e.serialize();r.forEach(s=>{let o=yh(n,s.secretKey);this._addSignature(s.publicKey,ft(o))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){Ct(r.length===64);let n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=Ke.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){let n={};for(let{signature:s,publicKey:o}of this.signatures)s===null?r&&(n.missing||(n.missing=[])).push(o):p2(s,e,o.toBytes())||(n.invalid||(n.invalid=[])).push(o);return n.invalid||n.missing?n:void 0}serialize(e){let{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){let o=this._getMessageSignednessErrors(s,r);if(o){let i="Signature verification failed.";throw o.invalid&&(i+=`
Invalid signature for public key${o.invalid.length===1?"":"(s)"} [\`${o.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),o.missing&&(i+=`
Missing signature for public key${o.missing.length===1?"":"(s)"} [\`${o.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(i)}}return this._serialize(s)}_serialize(e){let{signatures:r}=this,n=[];fn(n,r.length);let s=n.length+r.length*64+e.length,o=Ke.Buffer.alloc(s);return Ct(r.length<256),Ke.Buffer.from(n).copy(o,0),r.forEach(({signature:i},a)=>{i!==null&&(Ct(i.length===64,"signature has invalid length"),Ke.Buffer.from(i).copy(o,n.length+a*64))}),e.copy(o,n.length+r.length*64),Ct(o.length<=Uo,`Transaction too large: ${o.length} > ${Uo}`),o}get keys(){return Ct(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ct(this.instructions.length===1),this.instructions[0].programId}get data(){return Ct(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e],n=ln(r),s=[];for(let o=0;o<n;o++){let i=dn(r,0,cl);s.push(Dr.default.encode(Ke.Buffer.from(i)))}return t.populate($a.from(r),s)}static populate(e,r=[]){let n=new t;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((s,o)=>{let i={signature:s==Dr.default.encode(x2)?null:Dr.default.decode(s),publicKey:e.accountKeys[o]};n.signatures.push(i)}),e.instructions.forEach(s=>{let o=s.accounts.map(i=>{let a=e.accountKeys[i];return{pubkey:a,isSigner:n.signatures.some(u=>u.publicKey.toString()===a.toString())||e.isAccountSigner(i),isWritable:e.isAccountWritable(i)}});n.instructions.push(new St({keys:o,programId:e.accountKeys[s.programIdIndex],data:Dr.default.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}};var ll=class t{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)Ct(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{let n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(cl));this.signatures=n}this.message=e}serialize(){let e=this.message.serialize(),r=Array();fn(r,this.signatures.length);let n=D.struct([D.blob(r.length,"encodedSignaturesLength"),D.seq(y2(),this.signatures.length,"signatures"),D.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),o=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,o)}static deserialize(e){let r=[...e],n=[],s=ln(r);for(let i=0;i<s;i++)n.push(new Uint8Array(dn(r,0,cl)));let o=qy.deserialize(new Uint8Array(r));return new t(o,n)}sign(e){let r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let s of e){let o=n.findIndex(i=>i.equals(s.publicKey));Ct(o>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[o]=yh(r,s.secretKey)}}addSignature(e,r){Ct(r.byteLength===64,"Signature must be 64 bytes long");let s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(e));Ct(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=r}},R2=160,S2=64,I2=R2/S2,v2=1e3/I2,ms=new Ye("SysvarC1ock11111111111111111111111111111111"),L5=new Ye("SysvarEpochSchedu1e111111111111111111111111"),D5=new Ye("Sysvar1nstructions1111111111111111111111111"),Xd=new Ye("SysvarRecentB1ockHashes11111111111111111111"),ja=new Ye("SysvarRent111111111111111111111111111111111"),M5=new Ye("SysvarRewards111111111111111111111111111111"),U5=new Ye("SysvarS1otHashes111111111111111111111111111"),z5=new Ye("SysvarS1otHistory11111111111111111111111111"),Qd=new Ye("SysvarStakeHistory1111111111111111111111111"),uh=class extends Error{constructor({action:e,signature:r,transactionMessage:n,logs:s}){let o=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",i="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",a;switch(e){case"send":a=`Transaction ${r} resulted in an error. 
${n}. `+o+i;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+o+i;break;default:a=`Unknown action '${(u=>u)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=r,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((r,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){let o=s.meta.logMessages;this.transactionLogs=o,r(o)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}};async function ky(t,e,r,n){let s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await t.sendTransaction(e,r,s),i;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)i=(await t.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){let{nonceInstruction:a}=e.nonceInfo,u=a.keys[0].pubkey;i=(await t.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:e.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),i=(await t.confirmTransaction(o,n&&n.commitment)).value;if(i.err)throw o!=null?new uh({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(i)})`}):new Error(`Transaction ${o} failed (${JSON.stringify(i)})`);return o}function A2(t){return new Promise(e=>setTimeout(e,t))}function at(t,e){let r=t.layout.span>=0?t.layout.span:Wy(t,e),n=Ke.Buffer.alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,n),n}var T2=D.nu64("lamportsPerSignature"),O2=D.struct([D.u32("version"),D.u32("state"),tt("authorizedPubkey"),tt("nonce"),D.struct([T2],"feeCalculator")]),Py=O2.span;function Vi(t){let e=(0,Ky.blob)(8,t),r=e.decode.bind(e),n=e.encode.bind(e),s=e,o=Np();return s.decode=(i,a)=>{let u=r(i,a);return o.decode(u)},s.encode=(i,a,u)=>{let h=o.encode(i);return n(h,a,u)},s}var In=Object.freeze({Create:{index:0,layout:D.struct([D.u32("instruction"),D.ns64("lamports"),D.ns64("space"),tt("programId")])},Assign:{index:1,layout:D.struct([D.u32("instruction"),tt("programId")])},Transfer:{index:2,layout:D.struct([D.u32("instruction"),Vi("lamports")])},CreateWithSeed:{index:3,layout:D.struct([D.u32("instruction"),tt("base"),Fi("seed"),D.ns64("lamports"),D.ns64("space"),tt("programId")])},AdvanceNonceAccount:{index:4,layout:D.struct([D.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:D.struct([D.u32("instruction"),tt("authorized")])},AuthorizeNonceAccount:{index:7,layout:D.struct([D.u32("instruction"),tt("authorized")])},Allocate:{index:8,layout:D.struct([D.u32("instruction"),D.ns64("space")])},AllocateWithSeed:{index:9,layout:D.struct([D.u32("instruction"),tt("base"),Fi("seed"),D.ns64("space"),tt("programId")])},AssignWithSeed:{index:10,layout:D.struct([D.u32("instruction"),tt("base"),Fi("seed"),tt("programId")])},TransferWithSeed:{index:11,layout:D.struct([D.u32("instruction"),Vi("lamports"),Fi("seed"),tt("programId")])},UpgradeNonceAccount:{index:12,layout:D.struct([D.u32("instruction")])}}),$r=class t{constructor(){}static createAccount(e){let r=In.Create,n=at(r,{lamports:e.lamports,space:e.space,programId:ft(e.programId.toBuffer())});return new St({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let r,n;if("basePubkey"in e){let s=In.TransferWithSeed;r=at(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:ft(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let s=In.Transfer;r=at(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new St({keys:n,programId:this.programId,data:r})}static assign(e){let r,n;if("basePubkey"in e){let s=In.AssignWithSeed;r=at(s,{base:ft(e.basePubkey.toBuffer()),seed:e.seed,programId:ft(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let s=In.Assign;r=at(s,{programId:ft(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new St({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(e){let r=In.CreateWithSeed,n=at(r,{base:ft(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ft(e.programId.toBuffer())}),s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new St({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){let r=new Tt;"basePubkey"in e&&"seed"in e?r.add(t.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Py,programId:this.programId})):r.add(t.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Py,programId:this.programId}));let n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(e){let r=In.InitializeNonceAccount,n=at(r,{authorized:ft(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Xd,isSigner:!1,isWritable:!1},{pubkey:ja,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new St(s)}static nonceAdvance(e){let r=In.AdvanceNonceAccount,n=at(r),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Xd,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new St(s)}static nonceWithdraw(e){let r=In.WithdrawNonceAccount,n=at(r,{lamports:e.lamports});return new St({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Xd,isSigner:!1,isWritable:!1},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){let r=In.AuthorizeNonceAccount,n=at(r,{authorized:ft(e.newAuthorizedPubkey.toBuffer())});return new St({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let r,n;if("basePubkey"in e){let s=In.AllocateWithSeed;r=at(s,{base:ft(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ft(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let s=In.Allocate;r=at(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new St({keys:n,programId:this.programId,data:r})}};$r.programId=new Ye("11111111111111111111111111111111");var N2=Uo-300,lh=class t{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/t.chunkSize)+1+1)}static async load(e,r,n,s,o){{let y=await e.getMinimumBalanceForRentExemption(o.length),O=await e.getAccountInfo(n.publicKey,"confirmed"),S=null;if(O!==null){if(O.executable)return console.error("Program load failed, account is already executable"),!1;O.data.length!==o.length&&(S=S||new Tt,S.add($r.allocate({accountPubkey:n.publicKey,space:o.length}))),O.owner.equals(s)||(S=S||new Tt,S.add($r.assign({accountPubkey:n.publicKey,programId:s}))),O.lamports<y&&(S=S||new Tt,S.add($r.transfer({fromPubkey:r.publicKey,toPubkey:n.publicKey,lamports:y-O.lamports})))}else S=new Tt().add($r.createAccount({fromPubkey:r.publicKey,newAccountPubkey:n.publicKey,lamports:y>0?y:1,space:o.length,programId:s}));S!==null&&await ky(e,S,[r,n],{commitment:"confirmed"})}let i=D.struct([D.u32("instruction"),D.u32("offset"),D.u32("bytesLength"),D.u32("bytesLengthPadding"),D.seq(D.u8("byte"),D.offset(D.u32(),-8),"bytes")]),a=t.chunkSize,u=0,h=o,m=[];for(;h.length>0;){let y=h.slice(0,a),O=Ke.Buffer.alloc(a+16);i.encode({instruction:0,offset:u,bytes:y,bytesLength:0,bytesLengthPadding:0},O);let S=new Tt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:O});m.push(ky(e,S,[r,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await A2(1e3/4),u+=a,h=h.slice(a)}await Promise.all(m);{let y=D.struct([D.u32("instruction")]),O=Ke.Buffer.alloc(y.span);y.encode({instruction:1},O);let S=new Tt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:ja,isSigner:!1,isWritable:!1}],programId:s,data:O}),R="processed",A=await e.sendTransaction(S,[r,n],{preflightCommitment:R}),{context:I,value:k}=await e.confirmTransaction({signature:A,lastValidBlockHeight:S.lastValidBlockHeight,blockhash:S.recentBlockhash},R);if(k.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(k)})`);for(;;){try{if(await e.getSlot({commitment:R})>I.slot)break}catch{}await new Promise(z=>setTimeout(z,Math.round(v2/2)))}}return!0}};lh.chunkSize=N2;var F5=new Ye("BPFLoader2111111111111111111111111111111111");var K5=globalThis.fetch;var V5={index:1,layout:D.struct([D.u32("typeIndex"),Vi("deactivationSlot"),D.nu64("lastExtendedSlot"),D.u8("lastExtendedStartIndex"),D.u8(),D.seq(tt(),D.offset(D.u8(),-1),"authority")])};var or=Mi(Ju(Ye),pe(),t=>new Ye(t)),$y=Zu([pe(),Wt("base64")]),Eh=Mi(Ju(Ke.Buffer),$y,t=>Ke.Buffer.from(t[0],"base64")),W5=30*1e3;function jy(t){return Br([ue({jsonrpc:Wt("2.0"),id:pe(),result:t}),ue({jsonrpc:Wt("2.0"),id:pe(),error:ue({code:Mo(),message:pe(),data:Oe(qm())})})])}var B2=jy(Mo());function Ot(t){return Mi(jy(t),B2,e=>"error"in e?e:{...e,result:Di(e.result,t)})}function Ln(t){return Ot(ue({context:ue({slot:q()}),value:t}))}function pl(t){return ue({context:ue({slot:q()}),value:t})}var k2=ue({foundation:q(),foundationTerm:q(),initial:q(),taper:q(),terminal:q()}),H5=Ot(_e(xe(ue({epoch:q(),effectiveSlot:q(),amount:q(),postBalance:q(),commission:Oe(xe(q()))})))),P2=_e(ue({slot:q(),prioritizationFee:q()})),C2=ue({total:q(),validator:q(),foundation:q(),epoch:q()}),L2=ue({epoch:q(),slotIndex:q(),slotsInEpoch:q(),absoluteSlot:q(),blockHeight:Oe(q()),transactionCount:Oe(q())}),D2=ue({slotsPerEpoch:q(),leaderScheduleSlotOffset:q(),warmup:Cn(),firstNormalEpoch:q(),firstNormalSlot:q()}),M2=Cd(pe(),_e(q())),zo=xe(Br([ue({}),pe()])),U2=ue({err:zo}),z2=Wt("receivedSignature"),q5=ue({"solana-core":pe(),"feature-set":Oe(q())}),F2=ue({program:pe(),programId:or,parsed:Mo()}),K2=ue({programId:or,accounts:_e(or),data:pe()}),$5=Ln(ue({err:xe(Br([ue({}),pe()])),logs:xe(_e(pe())),accounts:Oe(xe(_e(xe(ue({executable:Cn(),owner:pe(),lamports:q(),data:_e(pe()),rentEpoch:Oe(q())}))))),unitsConsumed:Oe(q()),returnData:Oe(xe(ue({programId:pe(),data:Zu([pe(),Wt("base64")])}))),innerInstructions:Oe(xe(_e(ue({index:q(),instructions:_e(Br([F2,K2]))}))))})),j5=Ln(ue({byIdentity:Cd(pe(),_e(q())),range:ue({firstSlot:q(),lastSlot:q()})}));var G5=Ot(k2),Y5=Ot(C2),J5=Ot(P2),Z5=Ot(L2),X5=Ot(D2),Q5=Ot(M2),eL=Ot(q()),tL=Ln(ue({total:q(),circulating:q(),nonCirculating:q(),nonCirculatingAccounts:_e(or)})),V2=ue({amount:pe(),uiAmount:xe(q()),decimals:q(),uiAmountString:Oe(pe())}),rL=Ln(_e(ue({address:or,amount:pe(),uiAmount:xe(q()),decimals:q(),uiAmountString:Oe(pe())}))),nL=Ln(_e(ue({pubkey:or,account:ue({executable:Cn(),owner:or,lamports:q(),data:Eh,rentEpoch:q()})}))),fh=ue({program:pe(),parsed:Mo(),space:q()}),sL=Ln(_e(ue({pubkey:or,account:ue({executable:Cn(),owner:or,lamports:q(),data:fh,rentEpoch:q()})}))),oL=Ln(_e(ue({lamports:q(),address:or}))),bh=ue({executable:Cn(),owner:or,lamports:q(),data:Eh,rentEpoch:q()}),iL=ue({pubkey:or,account:bh}),W2=Mi(Br([Ju(Ke.Buffer),fh]),Br([$y,fh]),t=>Array.isArray(t)?Di(t,Eh):t),H2=ue({executable:Cn(),owner:or,lamports:q(),data:W2,rentEpoch:q()}),aL=ue({pubkey:or,account:H2}),cL=ue({state:Br([Wt("active"),Wt("inactive"),Wt("activating"),Wt("deactivating")]),active:q(),inactive:q()}),uL=Ot(_e(ue({signature:pe(),slot:q(),err:zo,memo:xe(pe()),blockTime:Oe(xe(q()))}))),lL=Ot(_e(ue({signature:pe(),slot:q(),err:zo,memo:xe(pe()),blockTime:Oe(xe(q()))}))),fL=ue({subscription:q(),result:pl(bh)}),q2=ue({pubkey:or,account:bh}),dL=ue({subscription:q(),result:pl(q2)}),$2=ue({parent:q(),slot:q(),root:q()}),hL=ue({subscription:q(),result:$2}),j2=Br([ue({type:Br([Wt("firstShredReceived"),Wt("completed"),Wt("optimisticConfirmation"),Wt("root")]),slot:q(),timestamp:q()}),ue({type:Wt("createdBank"),parent:q(),slot:q(),timestamp:q()}),ue({type:Wt("frozen"),slot:q(),timestamp:q(),stats:ue({numTransactionEntries:q(),numSuccessfulTransactions:q(),numFailedTransactions:q(),maxTransactionsPerEntry:q()})}),ue({type:Wt("dead"),slot:q(),timestamp:q(),err:pe()})]),pL=ue({subscription:q(),result:j2}),gL=ue({subscription:q(),result:pl(Br([U2,z2]))}),mL=ue({subscription:q(),result:q()}),yL=ue({pubkey:pe(),gossip:xe(pe()),tpu:xe(pe()),rpc:xe(pe()),version:xe(pe())}),Cy=ue({votePubkey:pe(),nodePubkey:pe(),activatedStake:q(),epochVoteAccount:Cn(),epochCredits:_e(Zu([q(),q(),q()])),commission:q(),lastVote:q(),rootSlot:xe(q())}),wL=Ot(ue({current:_e(Cy),delinquent:_e(Cy)})),G2=Br([Wt("processed"),Wt("confirmed"),Wt("finalized")]),Y2=ue({slot:q(),confirmations:xe(q()),err:zo,confirmationStatus:Oe(G2)}),EL=Ln(_e(xe(Y2))),bL=Ot(q()),Gy=ue({accountKey:or,writableIndexes:_e(q()),readonlyIndexes:_e(q())}),_h=ue({signatures:_e(pe()),message:ue({accountKeys:_e(pe()),header:ue({numRequiredSignatures:q(),numReadonlySignedAccounts:q(),numReadonlyUnsignedAccounts:q()}),instructions:_e(ue({accounts:_e(q()),data:pe(),programIdIndex:q()})),recentBlockhash:pe(),addressTableLookups:Oe(_e(Gy))})}),Yy=ue({pubkey:or,signer:Cn(),writable:Cn(),source:Oe(Br([Wt("transaction"),Wt("lookupTable")]))}),Jy=ue({accountKeys:_e(Yy),signatures:_e(pe())}),Zy=ue({parsed:Mo(),program:pe(),programId:or}),Xy=ue({accounts:_e(or),data:pe(),programId:or}),J2=Br([Xy,Zy]),Z2=Br([ue({parsed:Mo(),program:pe(),programId:pe()}),ue({accounts:_e(pe()),data:pe(),programId:pe()})]),Qy=Mi(J2,Z2,t=>"accounts"in t?Di(t,Xy):Di(t,Zy)),ew=ue({signatures:_e(pe()),message:ue({accountKeys:_e(Yy),instructions:_e(Qy),recentBlockhash:pe(),addressTableLookups:Oe(xe(_e(Gy)))})}),fl=ue({accountIndex:q(),mint:pe(),owner:Oe(pe()),programId:Oe(pe()),uiTokenAmount:V2}),tw=ue({writable:_e(or),readonly:_e(or)}),gl=ue({err:zo,fee:q(),innerInstructions:Oe(xe(_e(ue({index:q(),instructions:_e(ue({accounts:_e(q()),data:pe(),programIdIndex:q()}))})))),preBalances:_e(q()),postBalances:_e(q()),logMessages:Oe(xe(_e(pe()))),preTokenBalances:Oe(xe(_e(fl))),postTokenBalances:Oe(xe(_e(fl))),loadedAddresses:Oe(tw),computeUnitsConsumed:Oe(q()),costUnits:Oe(q())}),xh=ue({err:zo,fee:q(),innerInstructions:Oe(xe(_e(ue({index:q(),instructions:_e(Qy)})))),preBalances:_e(q()),postBalances:_e(q()),logMessages:Oe(xe(_e(pe()))),preTokenBalances:Oe(xe(_e(fl))),postTokenBalances:Oe(xe(_e(fl))),loadedAddresses:Oe(tw),computeUnitsConsumed:Oe(q()),costUnits:Oe(q())}),Hi=Br([Wt(0),Wt("legacy")]),Fo=ue({pubkey:pe(),lamports:q(),postBalance:xe(q()),rewardType:xe(pe()),commission:Oe(xe(q()))}),_L=Ot(xe(ue({blockhash:pe(),previousBlockhash:pe(),parentSlot:q(),transactions:_e(ue({transaction:_h,meta:xe(gl),version:Oe(Hi)})),rewards:Oe(_e(Fo)),blockTime:xe(q()),blockHeight:xe(q())}))),xL=Ot(xe(ue({blockhash:pe(),previousBlockhash:pe(),parentSlot:q(),rewards:Oe(_e(Fo)),blockTime:xe(q()),blockHeight:xe(q())}))),RL=Ot(xe(ue({blockhash:pe(),previousBlockhash:pe(),parentSlot:q(),transactions:_e(ue({transaction:Jy,meta:xe(gl),version:Oe(Hi)})),rewards:Oe(_e(Fo)),blockTime:xe(q()),blockHeight:xe(q())}))),SL=Ot(xe(ue({blockhash:pe(),previousBlockhash:pe(),parentSlot:q(),transactions:_e(ue({transaction:ew,meta:xe(xh),version:Oe(Hi)})),rewards:Oe(_e(Fo)),blockTime:xe(q()),blockHeight:xe(q())}))),IL=Ot(xe(ue({blockhash:pe(),previousBlockhash:pe(),parentSlot:q(),transactions:_e(ue({transaction:Jy,meta:xe(xh),version:Oe(Hi)})),rewards:Oe(_e(Fo)),blockTime:xe(q()),blockHeight:xe(q())}))),vL=Ot(xe(ue({blockhash:pe(),previousBlockhash:pe(),parentSlot:q(),rewards:Oe(_e(Fo)),blockTime:xe(q()),blockHeight:xe(q())}))),AL=Ot(xe(ue({blockhash:pe(),previousBlockhash:pe(),parentSlot:q(),transactions:_e(ue({transaction:_h,meta:xe(gl)})),rewards:Oe(_e(Fo)),blockTime:xe(q())}))),TL=Ot(xe(ue({blockhash:pe(),previousBlockhash:pe(),parentSlot:q(),signatures:_e(pe()),blockTime:xe(q())}))),OL=Ot(xe(ue({slot:q(),meta:xe(gl),blockTime:Oe(xe(q())),transaction:_h,version:Oe(Hi)}))),NL=Ot(xe(ue({slot:q(),transaction:ew,meta:xe(xh),blockTime:Oe(xe(q())),version:Oe(Hi)}))),BL=Ln(ue({blockhash:pe(),lastValidBlockHeight:q()})),kL=Ln(Cn()),X2=ue({slot:q(),numTransactions:q(),numSlots:q(),samplePeriodSecs:q()}),PL=Ot(_e(X2)),CL=Ln(xe(ue({feeCalculator:ue({lamportsPerSignature:q()})}))),LL=Ot(pe()),DL=Ot(pe()),Q2=ue({err:zo,logs:_e(pe()),signature:pe()}),ML=ue({result:pl(Q2),subscription:q()});var dh=class t{constructor(e){this._keypair=void 0,this._keypair=e??Oy()}static generate(){return new t(Oy())}static fromSecretKey(e,r){if(e.byteLength!==64)throw new Error("bad secret key size");let n=e.slice(32,64);if(!r||!r.skipValidation){let s=e.slice(0,32),o=nh(s);for(let i=0;i<32;i++)if(n[i]!==o[i])throw new Error("provided secretKey is invalid")}return new t({publicKey:n,secretKey:e})}static fromSeed(e){let r=nh(e),n=new Uint8Array(64);return n.set(e),n.set(r,32),new t({publicKey:r,secretKey:n})}get publicKey(){return new Ye(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Ha=Object.freeze({CreateLookupTable:{index:0,layout:D.struct([D.u32("instruction"),Vi("recentSlot"),D.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:D.struct([D.u32("instruction")])},ExtendLookupTable:{index:2,layout:D.struct([D.u32("instruction"),Vi(),D.seq(tt(),D.offset(D.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:D.struct([D.u32("instruction")])},CloseLookupTable:{index:4,layout:D.struct([D.u32("instruction")])}});var hh=class{constructor(){}static createLookupTable(e){let[r,n]=Ye.findProgramAddressSync([e.authority.toBuffer(),hf().encode(e.recentSlot)],this.programId),s=Ha.CreateLookupTable,o=at(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),i=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:$r.programId,isSigner:!1,isWritable:!1}];return[new St({programId:this.programId,keys:i,data:o}),r]}static freezeLookupTable(e){let r=Ha.FreezeLookupTable,n=at(r),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new St({programId:this.programId,keys:s,data:n})}static extendLookupTable(e){let r=Ha.ExtendLookupTable,n=at(r,{addresses:e.addresses.map(o=>o.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:$r.programId,isSigner:!1,isWritable:!1}),new St({programId:this.programId,keys:s,data:n})}static deactivateLookupTable(e){let r=Ha.DeactivateLookupTable,n=at(r),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new St({programId:this.programId,keys:s,data:n})}static closeLookupTable(e){let r=Ha.CloseLookupTable,n=at(r),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new St({programId:this.programId,keys:s,data:n})}};hh.programId=new Ye("AddressLookupTab1e1111111111111111111111111");var il=Object.freeze({RequestUnits:{index:0,layout:D.struct([D.u8("instruction"),D.u32("units"),D.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:D.struct([D.u8("instruction"),D.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:D.struct([D.u8("instruction"),D.u32("units")])},SetComputeUnitPrice:{index:3,layout:D.struct([D.u8("instruction"),Vi("microLamports")])}}),ph=class{constructor(){}static requestUnits(e){let r=il.RequestUnits,n=at(r,e);return new St({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){let r=il.RequestHeapFrame,n=at(r,e);return new St({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){let r=il.SetComputeUnitLimit,n=at(r,e);return new St({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){let r=il.SetComputeUnitPrice,n=at(r,{microLamports:BigInt(e.microLamports)});return new St({keys:[],programId:this.programId,data:n})}};ph.programId=new Ye("ComputeBudget111111111111111111111111111111");var Ly=64,Dy=32,My=64,Uy=D.struct([D.u8("numSignatures"),D.u8("padding"),D.u16("signatureOffset"),D.u16("signatureInstructionIndex"),D.u16("publicKeyOffset"),D.u16("publicKeyInstructionIndex"),D.u16("messageDataOffset"),D.u16("messageDataSize"),D.u16("messageInstructionIndex")]),gh=class t{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:r,message:n,signature:s,instructionIndex:o}=e;Ct(r.length===Dy,`Public Key must be ${Dy} bytes but received ${r.length} bytes`),Ct(s.length===My,`Signature must be ${My} bytes but received ${s.length} bytes`);let i=Uy.span,a=i+r.length,u=a+s.length,h=1,m=Ke.Buffer.alloc(u+n.length),y=o??65535;return Uy.encode({numSignatures:h,padding:0,signatureOffset:a,signatureInstructionIndex:y,publicKeyOffset:i,publicKeyInstructionIndex:y,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:y},m),m.fill(r,i),m.fill(s,a),m.fill(n,u),new St({keys:[],programId:t.programId,data:m})}static createInstructionWithPrivateKey(e){let{privateKey:r,message:n,instructionIndex:s}=e;Ct(r.length===Ly,`Private key must be ${Ly} bytes but received ${r.length} bytes`);try{let o=dh.fromSecretKey(r),i=o.publicKey.toBytes(),a=yh(n,o.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:n,signature:a,instructionIndex:s})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};gh.programId=new Ye("Ed25519SigVerify111111111111111111111111111");var eT=(t,e)=>{let r=ol.sign(t,e);return[r.toCompactRawBytes(),r.recovery]};ol.utils.isValidPrivateKey;var tT=ol.getPublicKey,zy=32,eh=20,Fy=64,rT=11,th=D.struct([D.u8("numSignatures"),D.u16("signatureOffset"),D.u8("signatureInstructionIndex"),D.u16("ethAddressOffset"),D.u8("ethAddressInstructionIndex"),D.u16("messageDataOffset"),D.u16("messageDataSize"),D.u8("messageInstructionIndex"),D.blob(20,"ethAddress"),D.blob(64,"signature"),D.u8("recoveryId")]),mh=class t{constructor(){}static publicKeyToEthAddress(e){Ct(e.length===Fy,`Public key must be ${Fy} bytes but received ${e.length} bytes`);try{return Ke.Buffer.from(qd(ft(e))).slice(-eh)}catch(r){throw new Error(`Error constructing Ethereum address: ${r}`)}}static createInstructionWithPublicKey(e){let{publicKey:r,message:n,signature:s,recoveryId:o,instructionIndex:i}=e;return t.createInstructionWithEthAddress({ethAddress:t.publicKeyToEthAddress(r),message:n,signature:s,recoveryId:o,instructionIndex:i})}static createInstructionWithEthAddress(e){let{ethAddress:r,message:n,signature:s,recoveryId:o,instructionIndex:i=0}=e,a;typeof r=="string"?r.startsWith("0x")?a=Ke.Buffer.from(r.substr(2),"hex"):a=Ke.Buffer.from(r,"hex"):a=r,Ct(a.length===eh,`Address must be ${eh} bytes but received ${a.length} bytes`);let u=1+rT,h=u,m=u+a.length,y=m+s.length+1,O=1,S=Ke.Buffer.alloc(th.span+n.length);return th.encode({numSignatures:O,signatureOffset:m,signatureInstructionIndex:i,ethAddressOffset:h,ethAddressInstructionIndex:i,messageDataOffset:y,messageDataSize:n.length,messageInstructionIndex:i,signature:ft(s),ethAddress:ft(a),recoveryId:o},S),S.fill(ft(n),th.span),new St({keys:[],programId:t.programId,data:S})}static createInstructionWithPrivateKey(e){let{privateKey:r,message:n,instructionIndex:s}=e;Ct(r.length===zy,`Private key must be ${zy} bytes but received ${r.length} bytes`);try{let o=ft(r),i=tT(o,!1).slice(1),a=Ke.Buffer.from(qd(ft(n))),[u,h]=eT(a,o);return this.createInstructionWithPublicKey({publicKey:i,message:n,signature:u,recoveryId:h,instructionIndex:s})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};mh.programId=new Ye("KeccakSecp256k11111111111111111111111111111");var rw,nT=new Ye("StakeConfig11111111111111111111111111111111");var Ga=class{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}};rw=Ga;Ga.default=new rw(0,0,Ye.default);var no=Object.freeze({Initialize:{index:0,layout:D.struct([D.u32("instruction"),w2(),E2()])},Authorize:{index:1,layout:D.struct([D.u32("instruction"),tt("newAuthorized"),D.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:D.struct([D.u32("instruction")])},Split:{index:3,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},Withdraw:{index:4,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},Deactivate:{index:5,layout:D.struct([D.u32("instruction")])},Merge:{index:7,layout:D.struct([D.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:D.struct([D.u32("instruction"),tt("newAuthorized"),D.u32("stakeAuthorizationType"),Fi("authoritySeed"),tt("authorityOwner")])}}),UL=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),dl=class{constructor(){}static initialize(e){let{stakePubkey:r,authorized:n,lockup:s}=e,o=s||Ga.default,i=no.Initialize,a=at(i,{authorized:{staker:ft(n.staker.toBuffer()),withdrawer:ft(n.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:ft(o.custodian.toBuffer())}}),u={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ja,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new St(u)}static createAccountWithSeed(e){let r=new Tt;r.add($r.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:s,lockup:o}=e;return r.add(this.initialize({stakePubkey:n,authorized:s,lockup:o}))}static createAccount(e){let r=new Tt;r.add($r.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:s,lockup:o}=e;return r.add(this.initialize({stakePubkey:n,authorized:s,lockup:o}))}static delegate(e){let{stakePubkey:r,authorizedPubkey:n,votePubkey:s}=e,o=no.Delegate,i=at(o);return new Tt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:ms,isSigner:!1,isWritable:!1},{pubkey:Qd,isSigner:!1,isWritable:!1},{pubkey:nT,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){let{stakePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:i}=e,a=no.Authorize,u=at(a,{newAuthorized:ft(s.toBuffer()),stakeAuthorizationType:o.index}),h=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ms,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return i&&h.push({pubkey:i,isSigner:!0,isWritable:!1}),new Tt().add({keys:h,programId:this.programId,data:u})}static authorizeWithSeed(e){let{stakePubkey:r,authorityBase:n,authoritySeed:s,authorityOwner:o,newAuthorizedPubkey:i,stakeAuthorizationType:a,custodianPubkey:u}=e,h=no.AuthorizeWithSeed,m=at(h,{newAuthorized:ft(i.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:s,authorityOwner:ft(o.toBuffer())}),y=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ms,isSigner:!1,isWritable:!1}];return u&&y.push({pubkey:u,isSigner:!0,isWritable:!1}),new Tt().add({keys:y,programId:this.programId,data:m})}static splitInstruction(e){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:s,lamports:o}=e,i=no.Split,a=at(i,{lamports:o});return new St({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,r){let n=new Tt;return n.add($r.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:r,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,r){let{stakePubkey:n,authorizedPubkey:s,splitStakePubkey:o,basePubkey:i,seed:a,lamports:u}=e,h=new Tt;return h.add($r.allocate({accountPubkey:o,basePubkey:i,seed:a,space:this.space,programId:this.programId})),r&&r>0&&h.add($r.transfer({fromPubkey:e.authorizedPubkey,toPubkey:o,lamports:r})),h.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:s,splitStakePubkey:o,lamports:u}))}static merge(e){let{stakePubkey:r,sourceStakePubKey:n,authorizedPubkey:s}=e,o=no.Merge,i=at(o);return new Tt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ms,isSigner:!1,isWritable:!1},{pubkey:Qd,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){let{stakePubkey:r,authorizedPubkey:n,toPubkey:s,lamports:o,custodianPubkey:i}=e,a=no.Withdraw,u=at(a,{lamports:o}),h=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:ms,isSigner:!1,isWritable:!1},{pubkey:Qd,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return i&&h.push({pubkey:i,isSigner:!0,isWritable:!1}),new Tt().add({keys:h,programId:this.programId,data:u})}static deactivate(e){let{stakePubkey:r,authorizedPubkey:n}=e,s=no.Deactivate,o=at(s);return new Tt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ms,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};dl.programId=new Ye("Stake11111111111111111111111111111111111111");dl.space=200;var qa=Object.freeze({InitializeAccount:{index:0,layout:D.struct([D.u32("instruction"),b2()])},Authorize:{index:1,layout:D.struct([D.u32("instruction"),tt("newAuthorized"),D.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:D.struct([D.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:D.struct([D.u32("instruction"),_2()])}}),zL=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),hl=class t{constructor(){}static initializeAccount(e){let{votePubkey:r,nodePubkey:n,voteInit:s}=e,o=qa.InitializeAccount,i=at(o,{voteInit:{nodePubkey:ft(s.nodePubkey.toBuffer()),authorizedVoter:ft(s.authorizedVoter.toBuffer()),authorizedWithdrawer:ft(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),a={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:ms,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new St(a)}static createAccount(e){let r=new Tt;return r.add($r.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),r.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:s,voteAuthorizationType:o}=e,i=qa.Authorize,a=at(i,{newAuthorized:ft(s.toBuffer()),voteAuthorizationType:o.index}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ms,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Tt().add({keys:u,programId:this.programId,data:a})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:r,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:o,voteAuthorizationType:i,votePubkey:a}=e,u=qa.AuthorizeWithSeed,h=at(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ft(n.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:ft(o.toBuffer()),voteAuthorizationType:i.index}}),m=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:ms,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Tt().add({keys:m,programId:this.programId,data:h})}static withdraw(e){let{votePubkey:r,authorizedWithdrawerPubkey:n,lamports:s,toPubkey:o}=e,i=qa.Withdraw,a=at(i,{lamports:s}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new Tt().add({keys:u,programId:this.programId,data:a})}static safeWithdraw(e,r,n){if(e.lamports>r-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return t.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:r,authorizedWithdrawerPubkey:n,nodePubkey:s}=e,o=qa.UpdateValidatorIdentity,i=at(o),a=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Tt().add({keys:a,programId:this.programId,data:i})}};hl.programId=new Ye("Vote111111111111111111111111111111111111111");hl.space=3762;var FL=new Ye("Va1idator1nfo111111111111111111111111111111"),KL=ue({name:pe(),website:Oe(pe()),details:Oe(pe()),iconUrl:Oe(pe()),keybaseUsername:Oe(pe())});var VL=new Ye("Vote111111111111111111111111111111111111111"),WL=D.struct([tt("nodePubkey"),tt("authorizedWithdrawer"),D.u8("commission"),D.nu64(),D.seq(D.struct([D.nu64("slot"),D.u32("confirmationCount")]),D.offset(D.u32(),-8),"votes"),D.u8("rootSlotValid"),D.nu64("rootSlot"),D.nu64(),D.seq(D.struct([D.nu64("epoch"),tt("authorizedVoter")]),D.offset(D.u32(),-8),"authorizedVoters"),D.struct([D.seq(D.struct([tt("authorizedPubkey"),D.nu64("epochOfLastAuthorizedSwitch"),D.nu64("targetEpoch")]),32,"buf"),D.nu64("idx"),D.u8("isEmpty")],"priorVoters"),D.nu64(),D.seq(D.struct([D.nu64("epoch"),D.nu64("credits"),D.nu64("prevCredits")]),D.offset(D.u32(),-8),"epochCredits"),D.struct([D.nu64("slot"),D.nu64("timestamp")],"lastTimestamp")]);function sT(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let h=0;h<e.length;h++)e[h]=255;for(let h=0;h<t.length;h++){let m=t.charAt(h),y=m.charCodeAt(0);if(e[y]!==255)throw new TypeError(m+" is ambiguous");e[y]=h}let r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function i(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";let m=0,y=0,O=0,S=h.length;for(;O!==S&&h[O]===0;)O++,m++;let R=(S-O)*o+1>>>0,A=new Uint8Array(R);for(;O!==S;){let z=h[O],M=0;for(let K=R-1;(z!==0||M<y)&&K!==-1;K--,M++)z+=256*A[K]>>>0,A[K]=z%r>>>0,z=z/r>>>0;if(z!==0)throw new Error("Non-zero carry");y=M,O++}let I=R-y;for(;I!==R&&A[I]===0;)I++;let k=n.repeat(m);for(;I<R;++I)k+=t.charAt(A[I]);return k}function a(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;let m=0,y=0,O=0;for(;h[m]===n;)y++,m++;let S=(h.length-m)*s+1>>>0,R=new Uint8Array(S);for(;m<h.length;){let z=h.charCodeAt(m);if(z>255)return;let M=e[z];if(M===255)return;let K=0;for(let Z=S-1;(M!==0||K<O)&&Z!==-1;Z--,K++)M+=r*R[Z]>>>0,R[Z]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");O=K,m++}let A=S-O;for(;A!==S&&R[A]===0;)A++;let I=new Uint8Array(y+(S-A)),k=y;for(;A!==S;)I[k++]=R[A++];return I}function u(h){let m=a(h);if(m)return m;throw new Error("Non-base"+r+" character")}return{encode:i,decodeUnsafe:a,decode:u}}var nw=sT;var oT="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",vn=nw(oT);var Ya=pr(mn(),1);function yl(t,e){switch(e.split(":")[0].toLowerCase()){case"solana":return iT(t);case"eip155":case"ethereum":return aT(t);case"sui":return cT(t);case"bip122":case"bitcoin":return uT(t);default:return{signature:t,rawSignature:t}}}function Rh(t,e,r){let n=t;if(pa(e))try{let s=go(t);n="0x"+Ya.Buffer.from(s).toString("hex")}catch{n=t.startsWith("0x")?t:"0x"+t}return r?{hash:r,rawTransaction:n,blockExplorer:j0(e,"transaction",r)}:{rawTransaction:n}}function iT(t){try{let e=go(t);return{signature:vn.encode(e),rawSignature:t}}catch{return{signature:t,rawSignature:t}}}function aT(t){let e=go(t);return{signature:"0x"+Ya.Buffer.from(e).toString("hex"),rawSignature:t}}function cT(t){try{let e=go(t);return{signature:Ya.Buffer.from(e).toString("base64"),rawSignature:t}}catch{return{signature:t,rawSignature:t}}}function uT(t){try{let e=go(t);return{signature:Ya.Buffer.from(e).toString("hex"),rawSignature:t}}catch{return{signature:t,rawSignature:t}}}function sw(t){try{let e=go(t);return Sh(e)}catch{return null}}function Sh(t){try{return Tt.from(t)}catch(e){if(e instanceof Error&&e.message.includes("Versioned messages"))return ll.deserialize(t);throw e}}async function Ih(t,e){let r=e.split(":")[0].toLowerCase();switch(r){case"solana":return lT(t);case"ethereum":case"eip155":case"polygon":case"optimism":case"arbitrum":case"base":return fT(t);case"sui":return await dT(t);case"bitcoin":return hT(t);default:throw new Error(`Unsupported network: ${r}`)}}function lT(t){if(t?.messageBytes!=null)return{parsed:tr(t.messageBytes),originalFormat:"@solana/kit"};if(typeof t?.serialize=="function"){let e=t.serialize({requireAllSignatures:!1,verifySignatures:!1});return{parsed:tr(e),originalFormat:"@solana/web3.js"}}if(t instanceof Uint8Array)return{parsed:tr(t),originalFormat:"bytes"};if(typeof t=="string")try{let e=ml.Buffer.from(t,"base64");return{parsed:tr(new Uint8Array(e)),originalFormat:"base64"}}catch{throw new Error("Unsupported Solana transaction format")}throw new Error("Unsupported Solana transaction format")}function fT(t){if(typeof t=="string"&&t.startsWith("0x"))return{parsed:t,originalFormat:"hex"};if(t?.serialize&&typeof t.serialize=="function"){let e=t.serialize();return{parsed:e.startsWith("0x")?e:"0x"+e,originalFormat:"ethers"}}if(t instanceof Uint8Array)return{parsed:"0x"+ml.Buffer.from(t).toString("hex"),originalFormat:"bytes"};if(t&&typeof t=="object"&&(t.to||t.data||t.from))try{let{from:e,gas:r,...n}=t;if(r&&(n.gasLimit=r),n.gasLimit||n.to&&n.value&&!n.data&&(n.gasLimit="0x5208"),n.to&&typeof n.to=="string")try{n.to=on(n.to)}catch{n.to=n.to.toLowerCase()}let s=Ri.from(n).unsignedSerialized;return{parsed:s.startsWith("0x")?s:"0x"+s,originalFormat:"json"}}catch(e){let r=e instanceof Error?e.message:"Unknown error",n=t?Object.keys(t).join(", "):"N/A",s=t?JSON.stringify(t,null,2):"N/A";throw new Error(`Failed to RLP encode EVM transaction: ${r}.
Transaction keys: [${n}].
Transaction: ${s}
Please ensure the transaction object includes required fields (to, value, chainId, gasLimit or gasPrice, etc.)`)}throw new Error("Unsupported EVM transaction format. Expected hex string, bytes, or transaction object with 'to', 'data', or 'from' fields.")}async function dT(t){if(t?.serialize&&typeof t.serialize=="function"){let e=t.serialize();return{parsed:tr(e),originalFormat:"sui-sdk"}}if(t instanceof Uint8Array)return{parsed:tr(t),originalFormat:"bytes"};if(t?.build&&typeof t.build=="function"){let e=await t.build();if(e?.serialize&&typeof e.serialize=="function"){let r=e.serialize();return{parsed:tr(r),originalFormat:"transaction-block"}}}throw new Error("Unsupported Sui transaction format")}function hT(t){if(t?.toBuffer&&typeof t.toBuffer=="function"){let e=t.toBuffer();return{parsed:tr(new Uint8Array(e)),originalFormat:"bitcoinjs-lib"}}if(t instanceof Uint8Array)return{parsed:tr(t),originalFormat:"bytes"};if(typeof t=="string"){let e=new Uint8Array(ml.Buffer.from(t,"hex"));return{parsed:tr(e),originalFormat:"hex"}}throw new Error("Unsupported Bitcoin transaction format")}var gw=pr(mn(),1);var iw=pr(mn(),1);var ow=10080*60*1e3,aD=2880*60*1e3,qi=["google","apple","phantom"],pT=class{constructor(t){this.provider=t,this.currentNetworkId=Rt.SOLANA_MAINNET,this._publicKey=null,this.eventEmitter=new yn.default,this.setupEventListeners(),this.syncInitialState()}get publicKey(){return this._publicKey}get isConnected(){return this._publicKey!==null}ensureConnected(){if(!this.isConnected)throw new Error("Solana chain not available. Ensure SDK is connected.")}async signMessage(t){this.ensureConnected();let e=typeof t=="string"?t:new TextDecoder().decode(t),r=await this.provider.signMessage({message:e,networkId:this.currentNetworkId});return{signature:typeof r.signature=="string"?new Uint8Array(vn.decode(r.signature)):r.signature,publicKey:this._publicKey||""}}async signTransaction(t){this.ensureConnected();let e=await this.provider.signTransaction({transaction:t,networkId:this.currentNetworkId}),r=sw(e.rawTransaction);if(!r)throw new Error("Failed to parse signed transaction");return r}async signAndSendTransaction(t){this.ensureConnected();let e=await this.provider.signAndSendTransaction({transaction:t,networkId:this.currentNetworkId});if(!e.hash)throw new Error("Transaction not submitted");return{signature:e.hash}}async signAllTransactions(t){return this.ensureConnected(),await Promise.all(t.map(r=>this.signTransaction(r)))}async signAndSendAllTransactions(t){return{signatures:(await Promise.all(t.map(r=>this.signAndSendTransaction(r)))).map(r=>r.signature)}}connect(t){if(!this.provider.isConnected())throw new Error("Provider not connected. Call provider connect first.");let r=this.provider.getAddresses().find(n=>n.addressType==="Solana");if(!r)throw new Error("No Solana address found");return this._publicKey=r.address,Promise.resolve({publicKey:r.address})}async disconnect(){return this.provider.disconnect()}switchNetwork(t){return this.currentNetworkId=t==="mainnet"?Rt.SOLANA_MAINNET:Rt.SOLANA_DEVNET,Promise.resolve()}setupEventListeners(){this.provider.on("connect",t=>{let e=t.addresses?.find(r=>r.addressType==="Solana");e&&(this._publicKey=e.address,this.eventEmitter.emit("connect",e.address))}),this.provider.on("disconnect",()=>{this._publicKey=null,this.eventEmitter.emit("disconnect")})}syncInitialState(){if(!this.provider.isConnected())return;let e=this.provider.getAddresses().find(r=>r.addressType==="Solana");this._publicKey=e?.address||null}on(t,e){this.eventEmitter.on(t,e)}off(t,e){this.eventEmitter.off(t,e)}},gT=class{constructor(t){this.provider=t,this.currentNetworkId=Rt.ETHEREUM_MAINNET,this._accounts=[],this.eventEmitter=new yn.default,this.setupEventListeners(),this.syncInitialState()}get chainId(){return`0x${(Nc(this.currentNetworkId)||1).toString(16)}`}get accounts(){return this._accounts}ensureConnected(){if(!this.provider.isConnected())throw new Error("Ethereum chain not available. Ensure SDK is connected.")}async request(t){return this.ensureConnected(),this.handleEmbeddedRequest(t)}connect(){if(!this.provider.isConnected())throw new Error("Provider not connected. Call provider connect first.");let e=this.provider.getAddresses().filter(r=>r.addressType==="Ethereum").map(r=>r.address);return this.updateConnectionState(e),Promise.resolve(e)}async disconnect(){await this.provider.disconnect()}async signPersonalMessage(t,e){return await this.request({method:"personal_sign",params:[t,e]})}async signTypedData(t,e){return await this.request({method:"eth_signTypedData_v4",params:[e,JSON.stringify(t)]})}async signTransaction(t){let e=this.currentNetworkId;if(t.chainId){let n=typeof t.chainId=="number"?t.chainId:parseInt(t.chainId,16),s=da(n);s&&(e=s)}return(await this.provider.signTransaction({transaction:t,networkId:e})).rawTransaction}async sendTransaction(t){if(t.chainId){let r=typeof t.chainId=="number"?t.chainId:parseInt(t.chainId,16);await this.switchChain(r)}let e=await this.provider.signAndSendTransaction({transaction:t,networkId:this.currentNetworkId});if(!e.hash)throw new Error("Transaction not submitted");return e.hash}switchChain(t){let e=typeof t=="string"?t.toLowerCase().startsWith("0x")?parseInt(t,16):parseInt(t,10):t,r=da(e);if(!r)throw new Error(`Unsupported chainId: ${t}`);return this.currentNetworkId=r,this.eventEmitter.emit("chainChanged",`0x${e.toString(16)}`),Promise.resolve()}getChainId(){let t=Nc(this.currentNetworkId);return Promise.resolve(t||1)}async getAccounts(){return this.request({method:"eth_accounts"})}isConnected(){return this.provider.isConnected()&&this._accounts.length>0}setupEventListeners(){this.provider.on("connect",t=>{let e=t.addresses?.filter(r=>r.addressType==="Ethereum")?.map(r=>r.address)||[];e.length>0&&(this.updateConnectionState(e),this.eventEmitter.emit("connect",{chainId:this.chainId}),this.eventEmitter.emit("accountsChanged",e))}),this.provider.on("disconnect",()=>{this.updateConnectionState([]),this.eventEmitter.emit("disconnect",{code:4900,message:"Provider disconnected"}),this.eventEmitter.emit("accountsChanged",[])})}syncInitialState(){if(this.provider.isConnected()){let e=this.provider.getAddresses().filter(r=>r.addressType==="Ethereum").map(r=>r.address);e.length>0&&this.updateConnectionState(e)}}updateConnectionState(t){this._accounts=t}async handleEmbeddedRequest(t){switch(t.method){case"personal_sign":{let[e,r]=t.params;return(await this.provider.signEthereumMessage({message:e,networkId:this.currentNetworkId})).signature}case"eth_signTypedData_v4":{let[e,r]=t.params,n=JSON.parse(r);return(await this.provider.signTypedDataV4({typedData:n,networkId:this.currentNetworkId})).signature}case"eth_signTransaction":{let[e]=t.params,r=e.chainId?da(typeof e.chainId=="number"?e.chainId:parseInt(e.chainId,16)):null;return(await this.provider.signTransaction({transaction:e,networkId:r||this.currentNetworkId})).rawTransaction}case"eth_sendTransaction":{let[e]=t.params,r=e.chainId?da(typeof e.chainId=="number"?e.chainId:parseInt(e.chainId,16)):null;return(await this.provider.signAndSendTransaction({transaction:e,networkId:r||this.currentNetworkId})).hash}case"eth_accounts":{let r=this.provider.getAddresses().find(n=>n.addressType==="Ethereum");return r?[r.address]:[]}case"eth_chainId":return`0x${(Nc(this.currentNetworkId)||1).toString(16)}`;case"wallet_switchEthereumChain":{let[{chainId:e}]=t.params,r=parseInt(e,16);await this.switchChain(r);return}default:throw new Error(`Embedded provider doesn't support method: ${t.method}`)}}on(t,e){this.eventEmitter.on(t,e)}off(t,e){this.eventEmitter.off(t,e)}};async function mT(t,e,r,n=3,s=1e3){let o;for(let i=1;i<=n;i++)try{return r.log("EMBEDDED_PROVIDER",`Attempting ${e}`,{attempt:i,maxRetries:n}),await t()}catch(a){if(o=a,r.warn("EMBEDDED_PROVIDER",`${e} failed`,{attempt:i,maxRetries:n,error:a instanceof Error?a.message:String(a)}),i===n){r.error("EMBEDDED_PROVIDER",`${e} failed after ${n} attempts`,{finalError:a instanceof Error?a.message:String(a)});break}let u=s*Math.pow(2,i-1);r.log("EMBEDDED_PROVIDER",`Retrying ${e} in ${u}ms`,{attempt:i+1,delay:u}),await new Promise(h=>setTimeout(h,u))}throw o}function vh(){return"session_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+"_"+Date.now()}var aw=class{constructor(t,e,r){if(this.client=null,this.walletId=null,this.addresses=[],this.eventListeners=new Map,this.logger=r,this.logger.log("EMBEDDED_PROVIDER","Initializing EmbeddedProvider",{config:t}),t.embeddedWalletType==="app-wallet")throw new Error("app-wallet type is not currently supported. Please use 'user-wallet' instead.");this.config=t,this.platform=e,this.storage=e.storage,this.authProvider=e.authProvider,this.phantomAppProvider=e.phantomAppProvider,this.urlParamsAccessor=e.urlParamsAccessor,this.stamper=e.stamper,this.solana=new pT(this),this.ethereum=new gT(this),this.logger.info("EMBEDDED_PROVIDER","EmbeddedProvider initialized")}on(t,e){this.eventListeners.has(t)||this.eventListeners.set(t,new Set),this.eventListeners.get(t)?.add(e),this.logger.log("EMBEDDED_PROVIDER","Event listener added",{event:t})}off(t,e){let r=this.eventListeners.get(t);r&&(r.delete(e),this.logger.log("EMBEDDED_PROVIDER","Event listener removed",{event:t}))}emit(t,e){let r=this.eventListeners.get(t);r&&r.size>0&&(this.logger.log("EMBEDDED_PROVIDER","Emitting event",{event:t,listenerCount:r.size,data:e}),r.forEach(n=>{try{n(e)}catch(s){this.logger.error("EMBEDDED_PROVIDER","Event callback error",{event:t,error:s})}}))}getAddressForNetwork(t){let e=t.split(":")[0].toLowerCase(),r;switch(e){case"solana":r=Ce.solana;break;case"eip155":r=Ce.ethereum;break;case"bitcoin":case"btc":r=Ce.bitcoinSegwit;break;case"sui":r=Ce.sui;break;default:r=Ce.ethereum;break}return this.addresses.find(s=>s.addressType.toLowerCase()===r.toLowerCase())?.address}async getAndFilterWalletAddresses(t){let r=(await this.storage.getSession())?.accountDerivationIndex??0;return(await mT(()=>this.client.getWalletAddresses(t,void 0,r),"getWalletAddresses",this.logger).catch(async s=>{throw this.logger.error("EMBEDDED_PROVIDER","getWalletAddresses failed after retries, disconnecting",{walletId:t,error:s.message,derivationIndex:r}),await this.storage.clearSession(),this.client=null,this.walletId=null,this.addresses=[],s})).filter(s=>this.config.addressTypes.some(o=>o===s.addressType))}async validateAndCleanSession(t){if(!t)return null;if(this.logger.log("EMBEDDED_PROVIDER","Found existing session, validating",{sessionId:t.sessionId,status:t.status,walletId:t.walletId}),t.status!=="completed"){let e=this.urlParamsAccessor.getParam("session_id");if(t.status==="pending"&&!e)return this.logger.warn("EMBEDDED_PROVIDER","Session mismatch detected - pending session without redirect context",{sessionId:t.sessionId,status:t.status}),await this.storage.clearSession(),null;if(e&&e!==t.sessionId)return this.logger.warn("EMBEDDED_PROVIDER","Session ID mismatch detected",{storedSessionId:t.sessionId,urlSessionId:e}),await this.storage.clearSession(),null}return t.status==="completed"&&!this.isSessionValid(t)?(this.logger.warn("EMBEDDED_PROVIDER","Session invalid due to authenticator expiration, will regenerate keypair",{sessionId:t.sessionId,authenticatorExpiresAt:t.authenticatorExpiresAt,currentTime:Date.now(),expired:t.authenticatorExpiresAt<Date.now()}),await this.storage.clearSession(),null):t}async tryExistingConnection(t){this.logger.log("EMBEDDED_PROVIDER","Getting existing session");let e=await this.storage.getSession();if(e=await this.validateAndCleanSession(e),!e)return this.logger.log("EMBEDDED_PROVIDER","No existing session found"),null;if(e.status==="completed"){this.logger.info("EMBEDDED_PROVIDER","Using existing completed session",{sessionId:e.sessionId,walletId:e.walletId}),await this.initializeClientFromSession(e),e.lastUsed=Date.now(),await this.storage.saveSession(e),this.logger.info("EMBEDDED_PROVIDER","Connection from existing session successful",{walletId:this.walletId,addressCount:this.addresses.length}),await this.ensureValidAuthenticator();let r={walletId:this.walletId,addresses:this.addresses,status:"completed",authUserId:e.authUserId,authProvider:e.authProvider};return this.emit("connect",{...r,source:"existing-session"}),r}if(this.logger.log("EMBEDDED_PROVIDER","No completed session found, checking for redirect resume"),this.authProvider.resumeAuthFromRedirect){let r=this.authProvider.resumeAuthFromRedirect(e.authProvider);if(r){this.logger.info("EMBEDDED_PROVIDER","Resuming from redirect",{walletId:r.walletId,provider:r.provider});try{return await this.completeAuthConnection(r)}catch(n){if(n instanceof Error&&n.message.includes("No session found after redirect")&&!t)return this.logger.warn("EMBEDDED_PROVIDER","Session missing during redirect resume - will start fresh auth flow",{error:n.message,walletId:r.walletId}),await this.storage.clearSession(),null;throw n}}}return null}validateAuthOptions(t){if(!qi.includes(t.provider))throw new Error(`Invalid auth provider: ${t.provider}. Must be ${qi.join(", ")}`)}isSessionValid(t){return t?!t.walletId||!t.organizationId||!t.stamperInfo?(this.logger.log("EMBEDDED_PROVIDER","Session missing required fields",{hasWalletId:!!t.walletId,hasOrganizationId:!!t.organizationId,hasStamperInfo:!!t.stamperInfo}),!1):t.status!=="completed"?(this.logger.log("EMBEDDED_PROVIDER","Session not completed",{status:t.status}),!1):t.authenticatorExpiresAt?Date.now()>=t.authenticatorExpiresAt?(this.logger.log("EMBEDDED_PROVIDER","Authenticator expired, session invalid",{authenticatorExpiresAt:new Date(t.authenticatorExpiresAt).toISOString(),now:new Date().toISOString()}),!1):(this.logger.log("EMBEDDED_PROVIDER","Session is valid",{sessionId:t.sessionId,walletId:t.walletId,authenticatorExpires:new Date(t.authenticatorExpiresAt).toISOString()}),!0):(this.logger.log("EMBEDDED_PROVIDER","Session invalid - missing authenticator timing",{sessionId:t.sessionId}),!1):!1}async autoConnect(){try{this.logger.log("EMBEDDED_PROVIDER","Starting auto-connect attempt"),this.emit("connect_start",{source:"auto-connect"});let t=await this.tryExistingConnection(!0);if(t){this.logger.info("EMBEDDED_PROVIDER","Auto-connect successful",{walletId:t.walletId,addressCount:t.addresses.length}),this.emit("connect",{...t,source:"auto-connect"});return}this.logger.log("EMBEDDED_PROVIDER","Auto-connect failed: no valid session found"),this.emit("connect_error",{error:"No valid session found",source:"auto-connect"})}catch(t){this.logger.error("EMBEDDED_PROVIDER","Auto-connect failed",{error:t instanceof Error?t.message:String(t)}),this.emit("connect_error",{error:t instanceof Error?t.message:"Auto-connect failed",source:"auto-connect"}),await this.storage.setShouldClearPreviousSession(!0)}}async initializeStamper(){this.logger.log("EMBEDDED_PROVIDER","Initializing stamper"),await this.stamper.init(),this.logger.log("EMBEDDED_PROVIDER","Resetting keypair to avoid conflicts with existing keypairs");let t=await this.stamper.resetKeyPair();this.logger.log("EMBEDDED_PROVIDER","Stamper initialized with fresh keypair",{publicKey:t.publicKey,keyId:t.keyId,algorithm:this.stamper.algorithm});let e=ow;return this.logger.info("EMBEDDED_PROVIDER","Stamper ready for auth flow with fresh keypair",{publicKey:t.publicKey,keyId:t.keyId}),{stamperInfo:t,expiresInMs:e}}async createOrganizationForAppWallet(t,e){let r=new Dc({apiBaseUrl:this.config.apiBaseUrl,headers:{...this.platform.analyticsHeaders||{}}}),n=this.platform.name||"unknown",s=t.publicKey.slice(0,8),o=`${this.config.appId.substring(0,8)}-${n}-${s}`;this.logger.log("EMBEDDED_PROVIDER","Creating organization for app-wallet",{organizationName:o,publicKey:t.publicKey,platform:n});let i=tr(vn.decode(t.publicKey)),a=`user-${Pc()}`,{organizationId:u}=await r.createOrganization(o,[{username:a,role:"ADMIN",authenticators:[{authenticatorName:`auth-${s}`,authenticatorKind:"keypair",publicKey:i,algorithm:this.stamper.algorithm,expiresInMs:e}]}]);return this.logger.info("EMBEDDED_PROVIDER","Organization created for app-wallet",{organizationId:u}),u}async connect(t){try{this.logger.info("EMBEDDED_PROVIDER","Starting embedded provider connect",{authOptions:{provider:t.provider}}),this.emit("connect_start",{source:"manual-connect",authOptions:{provider:t.provider}});let e=await this.tryExistingConnection(!1);if(e)return this.logger.info("EMBEDDED_PROVIDER","Manual connect using existing connection",{walletId:e.walletId,addressCount:e.addresses.length}),this.emit("connect",{...e,source:"manual-existing"}),e;this.validateAuthOptions(t),this.logger.info("EMBEDDED_PROVIDER","No existing connection available, creating new auth flow with fresh keypair");let{stamperInfo:r,expiresInMs:n}=await this.initializeStamper(),s=await this.handleAuthFlow(r.publicKey,r,t,n);if(!s)return{addresses:[],status:"pending",authProvider:t.provider};this.config.embeddedWalletType==="app-wallet"&&(s.lastUsed=Date.now(),await this.storage.saveSession(s)),await this.initializeClientFromSession(s),await this.ensureValidAuthenticator();let o={walletId:this.walletId,addresses:this.addresses,status:"completed",authUserId:s?.authUserId,authProvider:s?.authProvider};return this.emit("connect",{...o,source:"manual"}),o}catch(e){throw this.logger.error("EMBEDDED_PROVIDER","Connect failed with error",{error:e instanceof Error?{name:e.name,message:e.message,stack:e.stack}:e}),this.emit("connect_error",{error:e instanceof Error?e.message:String(e),source:"manual-connect"}),e instanceof Error?e.message.includes("IndexedDB")||e.message.includes("storage")?new Error("Storage error: Unable to access browser storage. Please ensure storage is available and try again."):e.message.includes("network")||e.message.includes("fetch")?new Error("Network error: Unable to connect to authentication server. Please check your internet connection and try again."):e.message.includes("JWT")||e.message.includes("jwt")?new Error(`JWT Authentication error: ${e.message}`):e.message.includes("Authentication")||e.message.includes("auth")?new Error(`Authentication error: ${e.message}`):e.message.includes("organization")||e.message.includes("wallet")?new Error(`Wallet creation error: ${e.message}`):e:new Error(`Embedded wallet connection failed: ${String(e)}`)}}async disconnect(t=!0){let e=this.client!==null;await this.storage.setShouldClearPreviousSession(t),this.logger.log("EMBEDDED_PROVIDER","Set flag to clear previous session on next login"),await this.storage.clearSession(),this.client=null,this.walletId=null,this.addresses=[],this.logger.info("EMBEDDED_PROVIDER","Disconnected from embedded wallet"),e&&this.emit("disconnect",{source:"manual"})}async signMessage(t){if(!this.client||!this.walletId)throw new Error("Not connected");await this.ensureValidAuthenticator(),this.logger.info("EMBEDDED_PROVIDER","Signing message",{walletId:this.walletId,message:t.message});let r=(await this.storage.getSession())?.accountDerivationIndex??0,n=await this.client.signUtf8Message({walletId:this.walletId,message:t.message,networkId:t.networkId,derivationIndex:r});return this.logger.info("EMBEDDED_PROVIDER","Message signed successfully",{walletId:this.walletId,message:t.message}),yl(n,t.networkId)}async signEthereumMessage(t){if(!this.client||!this.walletId)throw new Error("Not connected");await this.ensureValidAuthenticator(),this.logger.info("EMBEDDED_PROVIDER","Signing message",{walletId:this.walletId,message:t.message});let e=a=>/^0x[0-9a-fA-F]+$/.test(a),r=(()=>{if(e(t.message)){let a=t.message.slice(2),u=a.length%2===0?a:`0${a}`;return iw.Buffer.from(u,"hex").toString("utf8")}return t.message})(),n=mp(r),o=(await this.storage.getSession())?.accountDerivationIndex??0,i=await this.client.ethereumSignMessage({walletId:this.walletId,message:n,networkId:t.networkId,derivationIndex:o});return this.logger.info("EMBEDDED_PROVIDER","Message signed successfully",{walletId:this.walletId,message:t.message}),yl(i,t.networkId)}async signTypedDataV4(t){if(!this.client||!this.walletId)throw new Error("Not connected");await this.ensureValidAuthenticator(),this.logger.info("EMBEDDED_PROVIDER","Signing typed data",{walletId:this.walletId,typedData:t.typedData});let r=(await this.storage.getSession())?.accountDerivationIndex??0,n=await this.client.ethereumSignTypedData({walletId:this.walletId,typedData:t.typedData,networkId:t.networkId,derivationIndex:r});return this.logger.info("EMBEDDED_PROVIDER","Typed data signed successfully",{walletId:this.walletId}),yl(n,t.networkId)}async signTransaction(t){if(!this.client||!this.walletId)throw new Error("Not connected");await this.ensureValidAuthenticator(),this.logger.info("EMBEDDED_PROVIDER","Signing transaction",{walletId:this.walletId,networkId:t.networkId});let e=await Ih(t.transaction,t.networkId),n=(await this.storage.getSession())?.accountDerivationIndex??0;this.logger.log("EMBEDDED_PROVIDER","Parsed transaction for signing",{walletId:this.walletId,transaction:e,derivationIndex:n});let s=e.parsed;if(!s)throw new Error("Failed to parse transaction: no valid encoding found");let o=this.getAddressForNetwork(t.networkId);if(!o)throw new Error(`No address found for network ${t.networkId}`);let i=await this.client.signTransaction({walletId:this.walletId,transaction:s,networkId:t.networkId,derivationIndex:n,account:o});return this.logger.info("EMBEDDED_PROVIDER","Transaction signed successfully",{walletId:this.walletId,networkId:t.networkId,rawTransaction:i.rawTransaction}),await Rh(i.rawTransaction,t.networkId)}async signAndSendTransaction(t){if(!this.client||!this.walletId)throw new Error("Not connected");await this.ensureValidAuthenticator(),this.logger.info("EMBEDDED_PROVIDER","Signing and sending transaction",{walletId:this.walletId,networkId:t.networkId});let e=await Ih(t.transaction,t.networkId),n=(await this.storage.getSession())?.accountDerivationIndex??0;this.logger.log("EMBEDDED_PROVIDER","Parsed transaction for signing",{walletId:this.walletId,transaction:e,derivationIndex:n});let s=e.parsed;if(!s)throw new Error("Failed to parse transaction: no valid encoding found");let o=this.getAddressForNetwork(t.networkId);if(!o)throw new Error(`No address found for network ${t.networkId}`);let i;try{i=await this.client.signAndSendTransaction({walletId:this.walletId,transaction:s,networkId:t.networkId,derivationIndex:n,account:o})}catch(a){throw a instanceof nf&&this.emit("spending_limit_reached",{error:a}),a}return this.logger.info("EMBEDDED_PROVIDER","Transaction signed and sent successfully",{walletId:this.walletId,networkId:t.networkId,hash:i.hash,rawTransaction:i.rawTransaction}),await Rh(i.rawTransaction,t.networkId,i.hash)}getAddresses(){return this.addresses}isConnected(){return this.client!==null&&this.walletId!==null}async handleAuthFlow(t,e,r,n){if(this.config.embeddedWalletType==="user-wallet")return this.logger.info("EMBEDDED_PROVIDER","Creating user-wallet, routing authentication",{authProvider:r.provider}),r.provider==="phantom"?await this.handlePhantomAuth(t,e,n):(this.logger.info("EMBEDDED_PROVIDER","Starting redirect-based authentication flow",{publicKey:t,provider:r?.provider}),await this.handleRedirectAuth(t,e,r));{this.logger.info("EMBEDDED_PROVIDER","Creating app-wallet",{publicKey:t});let s=await this.createOrganizationForAppWallet(e,n),a=(await new Dc({apiBaseUrl:this.config.apiBaseUrl,organizationId:s,headers:{...this.platform.analyticsHeaders||{}}},this.stamper).createWallet(`Wallet ${Date.now()}`)).walletId,u=Date.now(),h={sessionId:vh(),walletId:a,organizationId:s,appId:this.config.appId,stamperInfo:e,authProvider:"device",accountDerivationIndex:0,status:"completed",createdAt:u,lastUsed:u,authenticatorCreatedAt:u,authenticatorExpiresAt:Date.now()+n,lastRenewalAttempt:void 0};return await this.storage.saveSession(h),this.logger.info("EMBEDDED_PROVIDER","App-wallet created successfully",{walletId:a,organizationId:s}),h}}async handlePhantomAuth(t,e,r){if(this.logger.info("EMBEDDED_PROVIDER","Starting Phantom authentication flow"),!this.phantomAppProvider.isAvailable())throw this.logger.error("EMBEDDED_PROVIDER","Phantom app not available"),new Error("Phantom app is not available. Please install the Phantom browser extension or mobile app to use this authentication method.");this.logger.info("EMBEDDED_PROVIDER","Phantom app detected, proceeding with authentication");let s=vh(),o=await this.phantomAppProvider.authenticate({publicKey:t,appId:this.config.appId,sessionId:s});this.logger.info("EMBEDDED_PROVIDER","Phantom authentication completed",{walletId:o.walletId,organizationId:o.organizationId});let i=o.expiresInMs>0?o.expiresInMs:r,a=Date.now(),u={sessionId:s,walletId:o.walletId,organizationId:o.organizationId,appId:this.config.appId,stamperInfo:e,authProvider:"phantom",accountDerivationIndex:o.accountDerivationIndex,status:"completed",createdAt:a,lastUsed:a,authenticatorCreatedAt:a,authenticatorExpiresAt:a+i,lastRenewalAttempt:void 0,authUserId:o.authUserId};return this.logger.log("EMBEDDED_PROVIDER","Saving Phantom session"),await this.storage.saveSession(u),u}async handleRedirectAuth(t,e,r){this.logger.info("EMBEDDED_PROVIDER","Using Phantom Connect authentication flow (redirect-based)",{provider:r.provider,hasRedirectUrl:!!this.config.authOptions.redirectUrl,authUrl:this.config.authOptions.authUrl});let n=Date.now(),s=vh(),o={sessionId:s,walletId:`temp-wallet-${n}`,organizationId:`temp-org-${n}`,appId:this.config.appId,stamperInfo:e,authProvider:r.provider,accountDerivationIndex:void 0,status:"pending",createdAt:n,lastUsed:n,authenticatorCreatedAt:n,authenticatorExpiresAt:n+ow,lastRenewalAttempt:void 0};this.logger.log("EMBEDDED_PROVIDER","Saving temporary session before redirect",{sessionId:o.sessionId,tempWalletId:o.walletId}),o.lastUsed=Date.now(),await this.storage.saveSession(o);let i=await this.storage.getShouldClearPreviousSession();this.logger.info("EMBEDDED_PROVIDER","Starting Phantom Connect redirect",{publicKey:t,appId:this.config.appId,provider:r?.provider,authUrl:this.config.authOptions.authUrl,clearPreviousSession:i,allowRefresh:!i});let a=await this.authProvider.authenticate({publicKey:t,appId:this.config.appId,provider:r?.provider,redirectUrl:this.config.authOptions.redirectUrl,authUrl:this.config.authOptions.authUrl,sessionId:s,clearPreviousSession:i,allowRefresh:!i,algorithm:this.stamper.algorithm});if(a&&"walletId"in a){if(this.logger.info("EMBEDDED_PROVIDER","Authentication completed after redirect",{walletId:a.walletId,organizationId:a.organizationId,provider:a.provider}),o.walletId=a.walletId,o.organizationId=a.organizationId,o.authProvider=a.provider||o.authProvider,o.accountDerivationIndex=a.accountDerivationIndex,o.authUserId=a.authUserId,o.status="completed",o.lastUsed=Date.now(),a.expiresInMs>0){let u=Date.now();o.authenticatorCreatedAt=u,o.authenticatorExpiresAt=u+a.expiresInMs,this.logger.log("EMBEDDED_PROVIDER","Updated authenticator expiration from immediate auth response",{expiresInMs:a.expiresInMs,expiresAt:new Date(o.authenticatorExpiresAt).toISOString()})}return await this.storage.saveSession(o),await this.storage.setShouldClearPreviousSession(!1),this.logger.log("EMBEDDED_PROVIDER","Cleared logout flag after successful authentication"),o}return this.logger.info("EMBEDDED_PROVIDER","Redirect authentication initiated, waiting for redirect completion"),null}async completeAuthConnection(t){let e=await this.storage.getSession();if(!e)throw new Error("No session found after redirect - session may have expired");if(e.walletId=t.walletId,e.authProvider=t.provider||e.authProvider,e.organizationId=t.organizationId,e.accountDerivationIndex=t.accountDerivationIndex,e.authUserId=t.authUserId,e.status="completed",e.lastUsed=Date.now(),t.expiresInMs>0){let r=Date.now();e.authenticatorCreatedAt=r,e.authenticatorExpiresAt=r+t.expiresInMs,this.logger.log("EMBEDDED_PROVIDER","Updated authenticator expiration from auth response",{expiresInMs:t.expiresInMs,expiresAt:new Date(e.authenticatorExpiresAt).toISOString()})}return await this.storage.saveSession(e),await this.storage.setShouldClearPreviousSession(!1),this.logger.log("EMBEDDED_PROVIDER","Cleared logout flag after successful authentication"),await this.initializeClientFromSession(e),await this.ensureValidAuthenticator(),{walletId:this.walletId,addresses:this.addresses,status:"completed",authUserId:e.authUserId,authProvider:e.authProvider}}async ensureValidAuthenticator(){let t=await this.storage.getSession();if(!t)throw new Error("No active session found");let e=Date.now();if(!t.authenticatorExpiresAt)throw this.logger.warn("EMBEDDED_PROVIDER","Session missing authenticator timing - treating as invalid session"),await this.disconnect(!1),new Error("Invalid session - missing authenticator timing");let r=t.authenticatorExpiresAt-e;if(this.logger.log("EMBEDDED_PROVIDER","Checking authenticator expiration",{expiresAt:new Date(t.authenticatorExpiresAt).toISOString(),timeUntilExpiry:r}),r<=0)throw this.logger.error("EMBEDDED_PROVIDER","Authenticator has expired, disconnecting"),await this.disconnect(!1),new Error("Authenticator expired")}async initializeClientFromSession(t){this.logger.log("EMBEDDED_PROVIDER","Initializing PhantomClient from session",{organizationId:t.organizationId,walletId:t.walletId,appId:t.appId}),this.stamper.getKeyInfo()||await this.stamper.init(),this.client=new Dc({apiBaseUrl:this.config.apiBaseUrl,organizationId:t.organizationId,headers:{...this.platform.analyticsHeaders||{},...t.authUserId?{"x-auth-user-id":t.authUserId}:{}}},this.stamper),this.walletId=t.walletId,this.addresses=await this.getAndFilterWalletAddresses(t.walletId)}};var Ah={[la]:{generateParams:{name:"Ed25519"},signParams:{name:"Ed25519"}},[Yr.secp256r1]:{generateParams:{name:"ECDSA",namedCurve:"P-256"},signParams:{name:"ECDSA",hash:"SHA-256"}}},cw=class{constructor(t={}){if(this.db=null,this.activeKeyPairRecord=null,this.pendingKeyPairRecord=null,this.algorithm=la,this.type="PKI",typeof window>"u"||!window.indexedDB)throw new Error("IndexedDbStamper requires a browser environment with IndexedDB support");this.dbName=t.dbName||"phantom-indexed-db-stamper",this.storeName=t.storeName||"crypto-keys",this.keyName=t.keyName||"signing-key",this.type=t.type||"PKI",this.idToken=t.idToken,this.salt=t.salt}async init(){return await this.openDB(),this.activeKeyPairRecord=await this.loadActiveKeyPairRecord(),this.activeKeyPairRecord?this.algorithm=this.activeKeyPairRecord.keyPair.privateKey.algorithm.name==="Ed25519"?Yr.ed25519:Yr.secp256r1:(this.algorithm=await this.getSupportedAlgorithm(),this.activeKeyPairRecord=await this.generateAndStoreNewKeyPair("active")),this.pendingKeyPairRecord=await this.loadPendingKeyPairRecord(),this.activeKeyPairRecord.keyInfo}async getSupportedAlgorithm(){for(let[t,e]of Object.entries(Ah))try{return await crypto.subtle.generateKey(e.generateParams,!1,["sign","verify"]),t}catch{continue}throw new Error("Your browser does not support the encryption needed for secure authentication. Please use a different browser or upgrade to a supported browser.")}getKeyInfo(){return this.activeKeyPairRecord?.keyInfo||null}async resetKeyPair(){return await this.clearStoredKeys(),this.activeKeyPairRecord=await this.generateAndStoreNewKeyPair("active"),this.pendingKeyPairRecord=null,this.activeKeyPairRecord.keyInfo}async stamp(t){let{data:e}=t;if(!this.activeKeyPairRecord)throw new Error("Stamper not initialized. Call init() first.");let r=new Uint8Array(e),n=await crypto.subtle.sign(Ah[this.algorithm].signParams,this.activeKeyPairRecord.keyPair.privateKey,r),s=tr(new Uint8Array(n)),o=t.type||this.type,i=t.type==="OIDC"?t.idToken:this.idToken,a=t.type==="OIDC"?t.salt:this.salt,u=o==="PKI"?{publicKey:tr(vn.decode(this.activeKeyPairRecord.keyInfo.publicKey)),signature:s,kind:"PKI",algorithm:this.algorithm}:{kind:"OIDC",idToken:i,publicKey:tr(vn.decode(this.activeKeyPairRecord.keyInfo.publicKey)),salt:a,algorithm:this.algorithm,signature:s},h=JSON.stringify(u);return tr(h)}async clear(){await this.clearStoredKeys(),this.activeKeyPairRecord=null,this.pendingKeyPairRecord=null}async clearStoredKeys(){return this.db||await this.openDB(),new Promise((t,e)=>{let n=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),s=n.delete(`${this.keyName}-active`),o=n.delete(`${this.keyName}-pending`),i=0,a=2,u=()=>{i++,i===a&&t()};s.onsuccess=u,o.onsuccess=u,s.onerror=()=>e(s.error),o.onerror=()=>e(o.error)})}async openDB(){return new Promise((t,e)=>{let r=indexedDB.open(this.dbName,1);r.onerror=()=>e(r.error),r.onsuccess=()=>{this.db=r.result,t()},r.onupgradeneeded=n=>{let s=n.target.result;s.objectStoreNames.contains(this.storeName)||s.createObjectStore(this.storeName)}})}async rotateKeyPair(){return this.db||await this.openDB(),this.pendingKeyPairRecord=await this.generateAndStoreNewKeyPair("pending"),this.pendingKeyPairRecord.keyInfo}async commitRotation(t){if(!this.pendingKeyPairRecord)throw new Error("No pending keypair to commit");this.activeKeyPairRecord&&await this.removeKeyPairRecord("active"),this.pendingKeyPairRecord.status="active",this.pendingKeyPairRecord.authenticatorId=t,this.pendingKeyPairRecord.keyInfo.authenticatorId=t,this.activeKeyPairRecord=this.pendingKeyPairRecord,this.pendingKeyPairRecord=null,await this.storeKeyPairRecord(this.activeKeyPairRecord,"active"),await this.removeKeyPairRecord("pending")}async rollbackRotation(){this.pendingKeyPairRecord&&(await this.removeKeyPairRecord("pending"),this.pendingKeyPairRecord=null)}async generateAndStoreNewKeyPair(t){let e=await crypto.subtle.generateKey(Ah[this.algorithm].generateParams,!1,["sign","verify"]),r=await crypto.subtle.exportKey("raw",e.publicKey),n=vn.encode(new Uint8Array(r)),s=await crypto.subtle.digest("SHA-256",r),o=tr(new Uint8Array(s)).substring(0,16),i=Date.now(),u={keyPair:e,keyInfo:{keyId:o,publicKey:n,createdAt:i},createdAt:i,expiresAt:0,status:t};return await this.storeKeyPairRecord(u,t),u}async storeKeyPairRecord(t,e){if(!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{let i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t,`${this.keyName}-${e}`);i.onsuccess=()=>r(),i.onerror=()=>n(i.error)})}async loadActiveKeyPairRecord(){return this.db?new Promise((t,e)=>{let s=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(`${this.keyName}-active`);s.onsuccess=()=>t(s.result||null),s.onerror=()=>e(s.error)}):null}async loadPendingKeyPairRecord(){return this.db?new Promise((t,e)=>{let s=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(`${this.keyName}-pending`);s.onsuccess=()=>t(s.result||null),s.onerror=()=>e(s.error)}):null}async removeKeyPairRecord(t){if(this.db)return new Promise((e,r)=>{let o=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(`${this.keyName}-${t}`);o.onsuccess=()=>e(),o.onerror=()=>r(o.error)})}};var Ja=class{constructor(){this.level=0,this.enabled=!1}static getInstance(){return Ja.instance||(Ja.instance=new Ja),Ja.instance}setCallback(t){this.callback=t}setLevel(t){this.level=t}enable(){this.enabled=!0}disable(){this.enabled=!1}writeLog(t,e,r,n){if(!this.enabled||t>this.level)return;let s={timestamp:Date.now(),level:t,category:e,message:r,data:n};this.callback&&this.callback(s)}error(t,e,r){this.writeLog(0,t,e,r)}warn(t,e,r){this.writeLog(1,t,e,r)}info(t,e,r){this.writeLog(2,t,e,r)}debug(t,e,r){this.writeLog(3,t,e,r)}log(t,e,r){this.writeLog(3,t,e,r)}},P=Ja.getInstance(),C={BROWSER_SDK:"BrowserSDK",PROVIDER_MANAGER:"ProviderManager",EMBEDDED_PROVIDER:"EmbeddedProvider",INJECTED_PROVIDER:"InjectedProvider",PHANTOM_CONNECT_AUTH:"PhantomConnectAuth",JWT_AUTH:"JWTAuth",STORAGE:"Storage",SESSION:"Session"},uw=[{id:"coinbase-wallet",name:"Coinbase Wallet",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTYiIGhlaWdodD0iNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTI4IDU2YzE1LjQ2NCAwIDI4LTEyLjUzNiAyOC0yOFM0My40NjQgMCAyOCAwIDAgMTIuNTM2IDAgMjhzMTIuNTM2IDI4IDI4IDI4WiIgZmlsbD0iIzFCNTNFNCIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNyAyOGMwIDExLjU5OCA5LjQwMiAyMSAyMSAyMXMyMS05LjQwMiAyMS0yMVMzOS41OTggNyAyOCA3IDcgMTYuNDAyIDcgMjhabTE3LjIzNC02Ljc2NmEzIDMgMCAwIDAtMyAzdjcuNTMzYTMgMyAwIDAgMCAzIDNoNy41MzNhMyAzIDAgMCAwIDMtM3YtNy41MzNhMyAzIDAgMCAwLTMtM2gtNy41MzNaIiBmaWxsPSIjZmZmIi8+PC9zdmc+",windowProperty:"coinbaseSolana",addressTypes:[Ce.solana]}];function yT(t){return t.rdns?t.rdns.split(".").reverse().join("-"):t.name.toLowerCase().replace(/\s+/g,"-")}function wT(t){return t.toLowerCase().replace(/\s+/g,"-")}function ET(t){let e=[];P.log(C.BROWSER_SDK,"Processing EIP-6963 providers",{providerCount:t.size,providerNames:Array.from(t.values()).map(r=>r.info.name)});for(let[,r]of t){let{info:n,provider:s}=r;if(n.name.toLowerCase().includes("phantom")||n.rdns&&(n.rdns.toLowerCase().includes("phantom")||n.rdns.toLowerCase()==="app.phantom")){P.log(C.BROWSER_SDK,"Skipping Phantom from EIP-6963",{name:n.name,rdns:n.rdns});continue}let i=yT(n);P.log(C.BROWSER_SDK,"Discovered EIP-6963 wallet",{walletId:i,walletName:n.name,rdns:n.rdns}),e.push({id:i,name:n.name,icon:n.icon,addressTypes:[Ce.ethereum],providers:{ethereum:s},rdns:n.rdns,discovery:"eip6963"})}return P.log(C.BROWSER_SDK,"EIP-6963 discovery completed",{discoveredCount:e.length,walletIds:e.map(r=>r.id)}),e}function bT(){return new Promise(t=>{let e=new Map;if(typeof window>"u"){t([]);return}let r=s=>{let o=s.detail;o?.info&&o?.provider&&e.set(o.info.uuid,o)};window.addEventListener("eip6963:announceProvider",r),window.dispatchEvent(new Event("eip6963:requestProvider")),setTimeout(()=>{let s=ET(e);window.removeEventListener("eip6963:announceProvider",r),t(s)},400)})}async function _T(){let t=[];if(typeof window>"u"||typeof navigator>"u")return P.log(C.BROWSER_SDK,"Wallet Standard discovery skipped (not in browser environment)"),t;let e=new Set,r;function n(I){r=void 0,e.add(I);let k=I.features?Object.keys(I.features):[];P.log(C.BROWSER_SDK,"Wallet registered",{name:I.name,chains:I.chains,featureKeys:k,totalWallets:e.size})}function s(I){r=void 0,e.delete(I)}function o(){return r||(r=[...e]),r}function i(...I){return I=I.filter(k=>!e.has(k)),I.length?(I.forEach(k=>n(k)),function(){I.forEach(z=>s(z))}):()=>{}}let a=Object.freeze({register:i}),u=I=>{let k=I.detail;if(typeof k=="function")try{k(a)}catch(z){P.warn(C.BROWSER_SDK,"Error calling wallet registration callback",{error:z})}};try{window.addEventListener("wallet-standard:register-wallet",u)}catch(I){P.warn(C.BROWSER_SDK,"Could not add register-wallet event listener",{error:I})}class h extends Event{constructor(k){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),this.detail=k}}try{window.dispatchEvent(new h(a)),P.log(C.BROWSER_SDK,"Dispatched wallet-standard:app-ready event")}catch(I){P.warn(C.BROWSER_SDK,"Could not dispatch app-ready event",{error:I})}let m={getWallets:()=>({get:o,on:(I,k)=>()=>{},register:i})};navigator.wallets||(navigator.wallets=m),P.log(C.BROWSER_SDK,"Initialized Wallet Standard registry"),await new Promise(I=>setTimeout(I,100));let y=navigator.wallets||window.wallets;if(!y||typeof y.getWallets!="function"){let I={hasNavigator:!!navigator,hasWindow:typeof window<"u",note:"Wallet Standard API not properly initialized"};return P.log(C.BROWSER_SDK,"Wallet Standard API not available",I),t}let O=y.getWallets(),S=()=>Promise.resolve([...O.get()]);P.log(C.BROWSER_SDK,"Wallet Standard API detected, starting discovery");try{let I=[],k=0,z=5,M=100,K=400;for(await new Promise(V=>setTimeout(V,M));k<z;){I=await S();let V={attempt:k+1,walletCount:I.length,walletNames:I.map(Y=>Y.name),chains:I.flatMap(Y=>Y.chains)};if(P.log(C.BROWSER_SDK,`Wallet Standard getWallets attempt ${k+1}`,V),I.length>0||k===z-1)break;await new Promise(Y=>setTimeout(Y,M)),k++}let Z=M+k*M;if(Z<K){let V=K-Z;await new Promise(Y=>setTimeout(Y,V)),I=await S()}P.log(C.BROWSER_SDK,"Wallet Standard getWallets final result",{walletCount:I.length,walletNames:I.map(V=>V.name),attempts:k+1});for(let V of I){if(!(V.chains.some(ce=>{let se=ce.toLowerCase();return se.startsWith("solana:")||se==="solana"})||V.features&&typeof V.features=="object"&&Object.keys(V.features).some(ce=>ce.toLowerCase().startsWith("solana:")))){let ce=V.features?Object.keys(V.features):[];P.log(C.BROWSER_SDK,"Wallet does not support Solana",{walletName:V.name,chains:V.chains,featureKeys:ce});continue}if(V.name.toLowerCase().includes("phantom")){P.log(C.BROWSER_SDK,"Skipping Phantom from Wallet Standard (handled separately)");continue}let te=wT(V.name),j=V.features?Object.keys(V.features):[];P.log(C.BROWSER_SDK,"Discovered Wallet Standard Solana wallet",{walletId:te,walletName:V.name,chains:V.chains,featureKeys:j,icon:V.icon,version:V.version,accountCount:V.accounts?.length||0}),t.push({id:te,name:V.name,icon:V.icon,addressTypes:[Ce.solana],providers:{solana:V},discovery:"standard"})}}catch(I){P.warn(C.BROWSER_SDK,"Wallet Standard API error",{error:I instanceof Error?I.message:String(I),stack:I instanceof Error?I.stack:void 0})}let R={discoveredCount:t.length,walletIds:t.map(I=>I.id),walletNames:t.map(I=>I.name)};P.log(C.BROWSER_SDK,"Wallet Standard Solana discovery completed",R);let A=xT();return t.push(...A),t}function xT(){let t=[];if(typeof window>"u")return P.log(C.BROWSER_SDK,"Custom wallet discovery skipped (not in browser environment)"),t;P.log(C.BROWSER_SDK,"Starting custom Solana wallet discovery",{configCount:uw.length});for(let e of uw){if(!e.addressTypes.includes(Ce.solana))continue;let r=window[e.windowProperty];if(!r){P.log(C.BROWSER_SDK,"Custom wallet not found",{walletId:e.id,windowProperty:e.windowProperty});continue}P.log(C.BROWSER_SDK,"Discovered custom Solana wallet",{walletId:e.id,walletName:e.name,windowProperty:e.windowProperty}),t.push({id:e.id,name:e.name,icon:e.icon,addressTypes:e.addressTypes,providers:{solana:r},discovery:"custom"})}return P.log(C.BROWSER_SDK,"Custom Solana wallet discovery completed",{discoveredCount:t.length,walletIds:t.map(e=>e.id)}),t}function RT(t){if(typeof window>"u"||!po())return null;let e=[up()];t.includes(Ce.solana)&&e.push(dp()),t.includes(Ce.ethereum)&&e.push(Uc()),e.push(hp());let r=lp({plugins:e});return{id:"phantom",name:"Phantom",icon:fa,addressTypes:t,providers:{solana:t.includes(Ce.solana)?r.solana:void 0,ethereum:t.includes(Ce.ethereum)?r.ethereum:void 0},isPhantom:!0,phantomInstance:r,discovery:"phantom"}}async function ST(t){let e=t||[];P.log(C.BROWSER_SDK,"Starting all wallet discovery methods",{addressTypes:e});let[r,n]=await Promise.all([_T(),bT()]),s=RT(e);P.log(C.BROWSER_SDK,"All wallet discovery methods completed",{phantomFound:!!s,solanaWalletsCount:r.length,ethereumWalletsCount:n.length,solanaWalletIds:r.map(i=>i.id),ethereumWalletIds:n.map(i=>i.id)});let o=new Map;s&&o.set("phantom",s);for(let i of[...r,...n]){let a=o.get(i.id);if(a){let u=Array.from(new Set([...a.addressTypes,...i.addressTypes])),h={...a.providers,...i.providers},m={...a,addressTypes:u,icon:i.icon||a.icon,providers:h};o.set(i.id,m),P.log(C.BROWSER_SDK,"Merged wallet by ID",{walletName:i.name,walletId:i.id,existingAddressTypes:a.addressTypes,newAddressTypes:i.addressTypes,mergedAddressTypes:u,existingProviders:Object.keys(a.providers||{}),newProviders:Object.keys(i.providers||{}),mergedProviders:Object.keys(h)}),P.log(C.BROWSER_SDK,"Merged wallet from multiple discovery methods",{walletId:i.id,walletName:i.name,existingAddressTypes:a.addressTypes,newAddressTypes:i.addressTypes,mergedAddressTypes:u})}else o.set(i.id,i)}return Array.from(o.values())}var lw=class{constructor(t,e,r){this.eventEmitter=new yn.default,this._publicKey=null,this.provider=t,this.walletId=e,this.walletName=r,this.setupEventListeners()}get publicKey(){return this._publicKey}get isConnected(){return this.provider.isConnected||!!this._publicKey}async connect(t){try{await this.provider.connect(t);let e=this.provider.isConnected;if(!e||this.provider.publicKey===null)throw P.error(C.INJECTED_PROVIDER,"Provider not connected after connect() call",{walletId:this.walletId,walletName:this.walletName,providerConnected:e,providerPublicKey:this.provider.publicKey}),new Error("Provider not connected after connect() call");let r,n=this.provider.publicKey;if(typeof n=="string")r=n;else if(n!=null&&typeof n.toString=="function")r=n.toString();else throw P.error(C.INJECTED_PROVIDER,"Invalid publicKey format in provider state",{walletId:this.walletId,walletName:this.walletName,publicKeyType:typeof n}),new Error("Invalid publicKey format in provider state");if(!r||r.length===0)throw new Error("Empty publicKey from provider");return this._publicKey=r,P.info(C.INJECTED_PROVIDER,"External wallet Solana connected",{walletId:this.walletId,walletName:this.walletName,publicKey:r}),{publicKey:r}}catch(e){throw P.error(C.INJECTED_PROVIDER,"External wallet Solana connect failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async disconnect(){P.log(C.INJECTED_PROVIDER,"External wallet Solana disconnect",{walletId:this.walletId,walletName:this.walletName});try{await this.provider.disconnect(),this._publicKey=null,P.info(C.INJECTED_PROVIDER,"External wallet Solana disconnected",{walletId:this.walletId,walletName:this.walletName})}catch(t){throw P.error(C.INJECTED_PROVIDER,"External wallet Solana disconnect failed",{walletId:this.walletId,walletName:this.walletName,error:t instanceof Error?t.message:String(t)}),t}}async signMessage(t){let e=typeof t=="string"?new TextEncoder().encode(t):t,r=typeof t=="string"?t.substring(0,50):`${e.length} bytes`;P.log(C.INJECTED_PROVIDER,"External wallet Solana signMessage",{walletId:this.walletId,walletName:this.walletName,messagePreview:r,messageLength:e.length});try{let n=await this.provider.signMessage(t);return P.info(C.INJECTED_PROVIDER,"External wallet Solana signMessage success",{walletId:this.walletId,walletName:this.walletName,signatureLength:n.signature.length}),{signature:n.signature instanceof Uint8Array?n.signature:new Uint8Array(pw.Buffer.from(n.signature,"base64")),publicKey:n.publicKey||this._publicKey||""}}catch(n){throw P.error(C.INJECTED_PROVIDER,"External wallet Solana signMessage failed",{walletId:this.walletId,walletName:this.walletName,error:n instanceof Error?n.message:String(n)}),n}}async signTransaction(t){P.log(C.INJECTED_PROVIDER,"External wallet Solana signTransaction",{walletId:this.walletId,walletName:this.walletName});try{let e=await this.provider.signTransaction(t);return P.info(C.INJECTED_PROVIDER,"External wallet Solana signTransaction success",{walletId:this.walletId,walletName:this.walletName}),e}catch(e){throw P.error(C.INJECTED_PROVIDER,"External wallet Solana signTransaction failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async signAndSendTransaction(t){P.log(C.INJECTED_PROVIDER,"External wallet Solana signAndSendTransaction",{walletId:this.walletId,walletName:this.walletName});try{let e=await this.provider.signAndSendTransaction(t);return P.info(C.INJECTED_PROVIDER,"External wallet Solana signAndSendTransaction success",{walletId:this.walletId,walletName:this.walletName,signature:e.signature}),e}catch(e){throw P.error(C.INJECTED_PROVIDER,"External wallet Solana signAndSendTransaction failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async signAllTransactions(t){P.log(C.INJECTED_PROVIDER,"External wallet Solana signAllTransactions",{walletId:this.walletId,walletName:this.walletName,transactionCount:t.length});try{let e=await this.provider.signAllTransactions(t);return P.info(C.INJECTED_PROVIDER,"External wallet Solana signAllTransactions success",{walletId:this.walletId,walletName:this.walletName,signedCount:e.length}),e}catch(e){throw P.error(C.INJECTED_PROVIDER,"External wallet Solana signAllTransactions failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async signAndSendAllTransactions(t){P.log(C.INJECTED_PROVIDER,"External wallet Solana signAndSendAllTransactions",{walletId:this.walletId,walletName:this.walletName,transactionCount:t.length});try{let e=await this.provider.signAndSendAllTransactions(t);return P.info(C.INJECTED_PROVIDER,"External wallet Solana signAndSendAllTransactions success",{walletId:this.walletId,walletName:this.walletName,signatureCount:e.signatures.length}),e}catch(e){throw P.error(C.INJECTED_PROVIDER,"External wallet Solana signAndSendAllTransactions failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}switchNetwork(t){return Promise.resolve()}setupEventListeners(){typeof this.provider.on=="function"&&(this.provider.on("connect",t=>{this._publicKey=t,this.eventEmitter.emit("connect",t)}),this.provider.on("disconnect",()=>{this._publicKey=null,this.eventEmitter.emit("disconnect")}),this.provider.on("accountChanged",t=>{this._publicKey=t||null,this.eventEmitter.emit("accountChanged",this._publicKey)}))}on(t,e){this.eventEmitter.on(t,e)}off(t,e){this.eventEmitter.off(t,e)}},IT=class{constructor(t,e,r){this.eventEmitter=new yn.default,this._publicKey=null,this.wallet=t,this.walletId=e,this.walletName=r,this.setupEventListeners()}get publicKey(){return this._publicKey}get isConnected(){return this._publicKey!==null}async connect(t){try{let e=this.wallet.features["standard:connect"];if(!e)throw new Error("Wallet Standard connect feature not available");let r=await e.connect(),n;if(Array.isArray(r)&&r.length>0?n=r:this.wallet.accounts&&this.wallet.accounts.length>0&&(n=Array.from(this.wallet.accounts)),!n||n.length===0)throw new Error("No accounts available after connecting to wallet");let s=n[0];if(!s)throw new Error("First account is null or undefined");let o;if(typeof s=="string"?o=s:typeof s=="object"&&s!==null&&(o=s.address||s.publicKey?.toString()||(s.publicKey instanceof Uint8Array?gw.Buffer.from(s.publicKey).toString("hex"):void 0)),!o)throw new Error(`Could not extract address from account. Account structure: ${JSON.stringify(s,null,2)}`);return this._publicKey=o,{publicKey:o}}catch(e){throw P.error(C.INJECTED_PROVIDER,"Wallet Standard Solana connect failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async disconnect(){try{let t=this.wallet.features["standard:disconnect"];t&&await t.disconnect(),this._publicKey=null}catch(t){throw P.error(C.INJECTED_PROVIDER,"Wallet Standard Solana disconnect failed",{walletId:this.walletId,walletName:this.walletName,error:t instanceof Error?t.message:String(t)}),t}}async signMessage(t){try{let e=this.wallet.features["solana:signMessage"];if(!e)throw new Error("Wallet Standard signMessage feature not available");let r=typeof t=="string"?new TextEncoder().encode(t):t,n=await e.signMessage({message:r,account:this.wallet.accounts[0]});if(!Array.isArray(n)||n.length===0)throw new Error(`Expected array result from signMessage, got: ${typeof n}`);let s=n[0];if(!s||!s.signature)throw new Error(`Invalid signMessage result structure: ${JSON.stringify(n)}`);let o=this.parseUint8Array(s.signature);if(o.length===0)throw new Error("Signature is empty");let i=s.account?.address||this.wallet.accounts[0]?.address||this._publicKey||"";return{signature:o,publicKey:i}}catch(e){throw P.error(C.INJECTED_PROVIDER,"Wallet Standard Solana signMessage failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async signTransaction(t){try{let e=this.wallet.features["solana:signTransaction"];if(!e)throw new Error("Wallet Standard signTransaction feature not available");if(!this.wallet.accounts||this.wallet.accounts.length===0)throw new Error("No accounts available. Please connect first.");let r=this.wallet.accounts[0],n=this.serializeTransaction(t),s=await e.signTransaction({transaction:n,account:r}),o;if(Array.isArray(s)&&s.length>0){let u=s[0];u&&typeof u=="object"&&(o=u.signedTransaction||u.transaction)}else if(s&&typeof s=="object"&&!Array.isArray(s)){let u=s;o=u.transaction||u.signedTransaction}if(!o)throw new Error("No transaction data found in Wallet Standard result");let i=this.parseUint8Array(o);if(i.length===0)throw new Error("Empty signed transaction returned from Wallet Standard");return Sh(i)}catch(e){throw P.error(C.INJECTED_PROVIDER,"Wallet Standard Solana signTransaction failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async signAndSendTransaction(t){try{let e=this.wallet.features["solana:signAndSendTransaction"];if(!e)throw new Error("Wallet Standard signAndSendTransaction feature not available");if(!this.wallet.accounts||this.wallet.accounts.length===0)throw new Error("No accounts available. Please connect first.");let r=this.wallet.accounts[0],n=r.chains?.[0]||"solana:mainnet",s=this.serializeTransaction(t),o=await e.signAndSendTransaction({transaction:s,account:r,chain:n}),i;if(Array.isArray(o)&&o.length>0)i=o[0];else if(o&&typeof o=="object"&&!Array.isArray(o))i=o;else throw new Error("Invalid signAndSendTransaction result format");if(!i.signature)throw new Error("No signature found in signAndSendTransaction result");let a=this.parseUint8Array(i.signature);return{signature:vn.encode(a)}}catch(e){throw P.error(C.INJECTED_PROVIDER,"Wallet Standard Solana signAndSendTransaction failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async signAllTransactions(t){try{let e=[];for(let r of t){let n=await this.signTransaction(r);e.push(n)}return e}catch(e){throw P.error(C.INJECTED_PROVIDER,"Wallet Standard Solana signAllTransactions failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async signAndSendAllTransactions(t){try{let e=[];for(let r of t){let n=await this.signAndSendTransaction(r);e.push(n.signature)}return{signatures:e}}catch(e){throw P.error(C.INJECTED_PROVIDER,"Wallet Standard Solana signAndSendAllTransactions failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async switchNetwork(t){return Promise.resolve()}setupEventListeners(){let t=this.wallet.features["standard:events"];if(!t){P.log(C.INJECTED_PROVIDER,"Wallet Standard events feature not available",{walletId:this.walletId,walletName:this.walletName});return}P.log(C.INJECTED_PROVIDER,"Setting up Wallet Standard event listeners",{walletId:this.walletId,walletName:this.walletName}),t.on("change",e=>{if(P.log(C.INJECTED_PROVIDER,"Wallet Standard change event received",{walletId:this.walletId,walletName:this.walletName,hasAccounts:!!e.accounts,accountCount:e.accounts?.length||0}),e.accounts!==void 0)if(e.accounts.length>0){let r=e.accounts[0],n=this.extractAccountAddress(r);n?(this._publicKey=n,this.eventEmitter.emit("accountChanged",n),this.eventEmitter.emit("connect",n),P.log(C.INJECTED_PROVIDER,"Emitted accountChanged and connect events",{walletId:this.walletId,walletName:this.walletName,address:n})):(this._publicKey=null,this.eventEmitter.emit("accountChanged",null),P.log(C.INJECTED_PROVIDER,"Emitted accountChanged event (null - invalid account)",{walletId:this.walletId,walletName:this.walletName}))}else this._publicKey=null,this.eventEmitter.emit("accountChanged",null),this.eventEmitter.emit("disconnect"),P.log(C.INJECTED_PROVIDER,"Emitted accountChanged and disconnect events",{walletId:this.walletId,walletName:this.walletName})})}extractAccountAddress(t){return t.address}on(t,e){this.eventEmitter.on(t,e),P.log(C.INJECTED_PROVIDER,"Added event listener",{walletId:this.walletId,walletName:this.walletName,event:t})}off(t,e){this.eventEmitter.off(t,e),P.log(C.INJECTED_PROVIDER,"Removed event listener",{walletId:this.walletId,walletName:this.walletName,event:t})}serializeTransaction(t){return typeof t.serialize=="function"?t.serialize({requireAllSignatures:!1,verifySignatures:!1}):t instanceof Uint8Array?t:new Uint8Array(0)}parseUint8Array(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!==null){let e=Object.keys(t).map(Number).filter(r=>!isNaN(r)&&r>=0).sort((r,n)=>r-n);if(e.length>0){let r=Math.max(...e),n=new Uint8Array(r+1);for(let s of e)n[s]=Number(t[s])||0;return n}}return new Uint8Array(0)}},fw=class{constructor(t,e,r){this.eventEmitter=new yn.default,this._connected=!1,this._chainId="0x1",this._accounts=[],this.provider=t,this.walletId=e,this.walletName=r,this.setupEventListeners()}get chainId(){return this._chainId}get accounts(){return this._accounts}async request(t){P.log(C.INJECTED_PROVIDER,"External wallet Ethereum request",{walletId:this.walletId,walletName:this.walletName,method:t.method});try{["personal_sign","eth_sign","eth_signTypedData","eth_signTypedData_v4","eth_sendTransaction","eth_signTransaction"].includes(t.method)&&(!this._connected||this._accounts.length===0)&&(P.log(C.INJECTED_PROVIDER,"Method requires authorization, ensuring connection",{walletId:this.walletId,walletName:this.walletName,method:t.method}),await this.connect());let r=await this.provider.request(t);return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum request success",{walletId:this.walletId,walletName:this.walletName,method:t.method}),r}catch(e){if(e?.code===4100){P.log(C.INJECTED_PROVIDER,"Got 4100 Unauthorized, attempting to re-authorize",{walletId:this.walletId,walletName:this.walletName,method:t.method});try{await this.provider.request({method:"eth_requestAccounts"});let r=await this.provider.request(t);return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum request success (after re-auth)",{walletId:this.walletId,walletName:this.walletName,method:t.method}),r}catch(r){throw P.error(C.INJECTED_PROVIDER,"Failed after re-authorization",{walletId:this.walletId,walletName:this.walletName,method:t.method,error:r instanceof Error?r.message:String(r)}),r}}throw P.error(C.INJECTED_PROVIDER,"External wallet Ethereum request failed",{walletId:this.walletId,walletName:this.walletName,method:t.method,error:e instanceof Error?e.message:String(e),errorCode:e?.code}),e}}async connect(){P.log(C.INJECTED_PROVIDER,"External wallet Ethereum connect",{walletId:this.walletId,walletName:this.walletName});try{let t=await this.provider.request({method:"eth_requestAccounts"});return this._connected=t.length>0,this._accounts=t,P.info(C.INJECTED_PROVIDER,"External wallet Ethereum connected (via eth_requestAccounts)",{walletId:this.walletId,walletName:this.walletName,accountCount:t.length,accounts:t}),t}catch(t){throw P.error(C.INJECTED_PROVIDER,"External wallet Ethereum connect failed",{walletId:this.walletId,walletName:this.walletName,error:t instanceof Error?t.message:String(t)}),t}}async disconnect(){P.log(C.INJECTED_PROVIDER,"External wallet Ethereum disconnect",{walletId:this.walletId,walletName:this.walletName});try{await this.provider.disconnect(),this._connected=!1,this._accounts=[],P.info(C.INJECTED_PROVIDER,"External wallet Ethereum disconnected",{walletId:this.walletId,walletName:this.walletName})}catch(t){throw P.error(C.INJECTED_PROVIDER,"External wallet Ethereum disconnect failed",{walletId:this.walletId,walletName:this.walletName,error:t instanceof Error?t.message:String(t)}),t}}async signPersonalMessage(t,e){let r=t.length>50?t.substring(0,50)+"...":t;P.log(C.INJECTED_PROVIDER,"External wallet Ethereum signPersonalMessage",{walletId:this.walletId,walletName:this.walletName,messagePreview:r,messageLength:t.length,address:e});try{let n=this.provider,s=(typeof n.isConnected=="function"?n.isConnected():!1)||(typeof n.connected=="boolean"?n.connected:!1);(!this._connected||this._accounts.length===0||!s)&&(P.log(C.INJECTED_PROVIDER,"Not connected, attempting to connect before signing",{walletId:this.walletId,walletName:this.walletName,internalConnected:this._connected,accountsLength:this._accounts.length,providerConnected:s}),await this.connect());let o=e.toLowerCase();if(!this._accounts.map(u=>u.toLowerCase()).includes(o)){P.warn(C.INJECTED_PROVIDER,"Address not in connected accounts, refreshing connection",{walletId:this.walletId,walletName:this.walletName,requestedAddress:e,connectedAccounts:this._accounts});let u=await this.getAccounts();if(!u.map(m=>m.toLowerCase()).includes(o))throw new Error(`Address ${e} is not connected. Connected accounts: ${u.join(", ")}`);this._accounts=u}if(typeof this.provider.signPersonalMessage=="function"){let u=await this.provider.signPersonalMessage(t,e);return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum signPersonalMessage success",{walletId:this.walletId,walletName:this.walletName,signatureLength:u.length}),u}let a=await this.request({method:"personal_sign",params:[t,e]});return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum signPersonalMessage success",{walletId:this.walletId,walletName:this.walletName,signatureLength:a.length}),a}catch(n){throw P.error(C.INJECTED_PROVIDER,"External wallet Ethereum signPersonalMessage failed",{walletId:this.walletId,walletName:this.walletName,error:n instanceof Error?n.message:String(n),errorCode:n?.code}),n}}async signTypedData(t,e){P.log(C.INJECTED_PROVIDER,"External wallet Ethereum signTypedData",{walletId:this.walletId,walletName:this.walletName,primaryType:t?.primaryType,address:e});try{if(typeof this.provider.signTypedData=="function"){let n=await this.provider.signTypedData(t,e);return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum signTypedData success",{walletId:this.walletId,walletName:this.walletName,signatureLength:n.length}),n}let r=await this.request({method:"eth_signTypedData_v4",params:[e,t]});return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum signTypedData success",{walletId:this.walletId,walletName:this.walletName,signatureLength:r.length}),r}catch(r){throw P.error(C.INJECTED_PROVIDER,"External wallet Ethereum signTypedData failed",{walletId:this.walletId,walletName:this.walletName,error:r instanceof Error?r.message:String(r)}),r}}async signTransaction(t){P.log(C.INJECTED_PROVIDER,"External wallet Ethereum signTransaction",{walletId:this.walletId,walletName:this.walletName,from:t.from,to:t.to});try{if(typeof this.provider.signTransaction=="function"){let r=await this.provider.signTransaction(t);return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum signTransaction success",{walletId:this.walletId,walletName:this.walletName,signatureLength:r.length}),r}let e=await this.request({method:"eth_signTransaction",params:[t]});return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum signTransaction success",{walletId:this.walletId,walletName:this.walletName,signatureLength:e.length}),e}catch(e){throw P.error(C.INJECTED_PROVIDER,"External wallet Ethereum signTransaction failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async sendTransaction(t){P.log(C.INJECTED_PROVIDER,"External wallet Ethereum sendTransaction",{walletId:this.walletId,walletName:this.walletName,from:t.from,to:t.to,value:t.value});try{if(typeof this.provider.sendTransaction=="function"){let r=await this.provider.sendTransaction(t);return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum sendTransaction success",{walletId:this.walletId,walletName:this.walletName,txHash:r}),r}let e=await this.request({method:"eth_sendTransaction",params:[t]});return P.info(C.INJECTED_PROVIDER,"External wallet Ethereum sendTransaction success",{walletId:this.walletId,walletName:this.walletName,txHash:e}),e}catch(e){throw P.error(C.INJECTED_PROVIDER,"External wallet Ethereum sendTransaction failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async switchChain(t){P.log(C.INJECTED_PROVIDER,"External wallet Ethereum switchChain",{walletId:this.walletId,walletName:this.walletName,chainId:t});try{let e=typeof t=="string"?t.toLowerCase().startsWith("0x")?t:`0x${parseInt(t,10).toString(16)}`:`0x${t.toString(16)}`;typeof this.provider.switchChain=="function"?await this.provider.switchChain(e):await this.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]}),this._chainId=e,this.eventEmitter.emit("chainChanged",this._chainId),P.info(C.INJECTED_PROVIDER,"External wallet Ethereum switchChain success",{walletId:this.walletId,walletName:this.walletName,chainId:e})}catch(e){throw P.error(C.INJECTED_PROVIDER,"External wallet Ethereum switchChain failed",{walletId:this.walletId,walletName:this.walletName,error:e instanceof Error?e.message:String(e)}),e}}async getChainId(){if(typeof this.provider.getChainId=="function"){let r=await this.provider.getChainId();return this._chainId=`0x${r.toString(16)}`,r}let t=await this.request({method:"eth_chainId"}),e=parseInt(t,16);return this._chainId=t,e}async getAccounts(){if(typeof this.provider.getAccounts=="function"){let e=await this.provider.getAccounts();return this._accounts=e,e}let t=await this.request({method:"eth_accounts"});return this._accounts=t,t}isConnected(){return this._connected}setupEventListeners(){typeof this.provider.on=="function"&&(this.provider.on("connect",t=>{this._connected=!0,this._chainId=t.chainId,this.eventEmitter.emit("connect",t)}),this.provider.on("disconnect",t=>{this._connected=!1,this._accounts=[],this.eventEmitter.emit("disconnect",t),this.eventEmitter.emit("accountsChanged",[])}),this.provider.on("accountsChanged",t=>{this._accounts=t,this._connected=t.length>0,this.eventEmitter.emit("accountsChanged",t)}),this.provider.on("chainChanged",t=>{this._chainId=t,this.eventEmitter.emit("chainChanged",t)}))}on(t,e){this.eventEmitter.on(t,e)}off(t,e){this.eventEmitter.off(t,e)}};function $i(t){return t!==void 0&&t.id==="phantom"&&"isPhantom"in t&&t.isPhantom===!0}function vT(t){return t!==null&&typeof t=="object"&&"features"in t&&typeof t.features=="object"}var AT=class{constructor(){this.wallets=new Map,this.discoveryPromise=null}register(t){let e={};t.providers?.solana&&(vT(t.providers.solana)?(e.solana=new IT(t.providers.solana,t.id,t.name),P.log(C.BROWSER_SDK,"Wrapped Wallet Standard Solana wallet with adapter",{walletId:t.id,walletName:t.name})):(e.solana=new lw(t.providers.solana,t.id,t.name),P.log(C.BROWSER_SDK,"Wrapped Solana provider with InjectedWalletSolanaChain",{walletId:t.id,walletName:t.name}))),t.providers?.ethereum&&(e.ethereum=new fw(t.providers.ethereum,t.id,t.name),P.log(C.BROWSER_SDK,"Wrapped Ethereum provider with InjectedWalletEthereumChain",{walletId:t.id,walletName:t.name}));let r={...t,providers:Object.keys(e).length>0?e:t.providers};this.wallets.set(t.id,r)}registerPhantom(t,e){let r={};e.includes(Ce.solana)&&t.solana&&(r.solana=new lw(t.solana,"phantom","Phantom"),P.log(C.BROWSER_SDK,"Created InjectedWalletSolanaChain wrapper for Phantom",{walletId:"phantom"})),e.includes(Ce.ethereum)&&t.ethereum&&(r.ethereum=new fw(t.ethereum,"phantom","Phantom"),P.log(C.BROWSER_SDK,"Created InjectedWalletEthereumChain wrapper for Phantom",{walletId:"phantom"}));let n={id:"phantom",name:"Phantom",icon:fa,addressTypes:e,providers:r,isPhantom:!0,phantomInstance:t,discovery:"phantom"};this.wallets.set("phantom",n),P.log(C.BROWSER_SDK,"Registered Phantom wallet with chain wrappers",{addressTypes:e,hasSolana:!!r.solana,hasEthereum:!!r.ethereum})}unregister(t){this.wallets.delete(t)}has(t){return this.wallets.has(t)}getById(t){return this.wallets.get(t)}getAll(){return Array.from(this.wallets.values())}getByAddressTypes(t){if(t.length===0)return this.getAll();let e=new Set(t);return this.getAll().filter(r=>r.addressTypes.some(n=>e.has(n)))}discover(t){return this.discoveryPromise?this.discoveryPromise:(P.log(C.BROWSER_SDK,"Starting wallet discovery",{addressTypes:t}),this.discoveryPromise=ST(t).then(e=>{let r=t?e.filter(n=>n.addressTypes.some(s=>t.includes(s))):e;for(let n of r)n.id==="phantom"&&$i(n)?this.registerPhantom(n.phantomInstance,n.addressTypes):this.register(n),P.log(C.BROWSER_SDK,"Registered discovered wallet",{id:n.id,name:n.name,addressTypes:n.addressTypes});P.info(C.BROWSER_SDK,"Wallet discovery completed",{totalDiscovered:e.length,relevantWallets:r.length})}).catch(e=>{throw P.warn(C.BROWSER_SDK,"Wallet discovery failed",{error:e}),this.discoveryPromise=null,e}),this.discoveryPromise)}},Th=null;function mw(){return Th||(Th=new AT),Th}var Oh="phantom-injected-was-connected",dw="true",hw="phantom-injected-last-wallet-id",TT=class{constructor(t){this.selectedWalletId=null,this.walletStates=new Map,this.eventListeners=new Map,this.eventsInitialized=!1,this.eventListenersSetup=new Set,this.eventListenerCleanups=new Map,P.log(C.INJECTED_PROVIDER,"Initializing InjectedProvider",{config:t}),this.addressTypes=t.addressTypes,this.walletRegistry=mw(),P.log(C.INJECTED_PROVIDER,"Address types configured",{addressTypes:this.addressTypes}),this.walletRegistry.discover(this.addressTypes).catch(e=>{P.warn(C.INJECTED_PROVIDER,"Wallet discovery failed during initialization",{error:e})}),P.info(C.INJECTED_PROVIDER,"InjectedProvider initialized")}async waitForWalletDiscovery(t){if(!this.walletRegistry.has(t)){P.log(C.INJECTED_PROVIDER,"Wallet not found in registry, waiting for discovery",{walletId:t});try{await this.walletRegistry.discover(this.addressTypes),P.log(C.INJECTED_PROVIDER,"Wallet discovery completed",{walletId:t})}catch(e){P.warn(C.INJECTED_PROVIDER,"Wallet discovery failed",{walletId:t,error:e instanceof Error?e.message:String(e)})}}}getChainProvider(t,e,r){if(!this.addressTypes.includes(t))throw new Error(`${r} not enabled for this provider`);let n=this.selectedWalletId||"phantom",s=this.walletRegistry.getById(n);if(!s)throw this.walletRegistry.discoveryPromise?new Error(`Wallet "${n}" not found. Wallet discovery is still in progress. Please wait for sdk.discoverWallets() to complete before accessing chain properties.`):new Error(`Wallet "${n}" not found. Please ensure wallet discovery has completed. Make sure you call sdk.discoverWallets() and await it before accessing chain properties.`);let o=s.providers?.[e];if(!o)throw new Error(`Selected wallet "${s.name}" does not support ${r}. This wallet only supports: ${s.addressTypes.join(", ")}. Make sure your SDK config includes ${r} in addressTypes.`);return o}get solana(){return this.getChainProvider(Ce.solana,"solana","Solana")}get ethereum(){return this.getChainProvider(Ce.ethereum,"ethereum","Ethereum")}validateAndSelectWallet(t){if(!this.walletRegistry.has(t))throw P.error(C.INJECTED_PROVIDER,"Unknown injected wallet id requested",{walletId:t}),new Error(`Unknown injected wallet id: ${t}`);let e=this.walletRegistry.getById(t);if(!e||!e.providers)throw P.warn(C.INJECTED_PROVIDER,"Wallet not available for connection",{walletId:t}),new Error(`Wallet not available for connection: ${t}`);return this.selectedWalletId=t,P.log(C.INJECTED_PROVIDER,"Selected injected wallet for connection",{walletId:t}),e}async connectToWallet(t,e){if(!t.providers){let n=new Error(`Wallet adapter not available for wallet: ${this.selectedWalletId}`);throw P.error(C.INJECTED_PROVIDER,"Wallet adapter not available",{walletId:this.selectedWalletId}),this.emit("connect_error",{error:n.message,source:e?.skipEventListeners?"auto-connect":"manual-connect"}),n}P.log(C.INJECTED_PROVIDER,"Connecting via wallet",{walletId:this.selectedWalletId,walletName:t.name,options:e}),e?.skipEventListeners||this.setupEventListeners(t);let r=[];if(this.addressTypes.includes(Ce.solana)&&t.providers?.solana){P.log(C.INJECTED_PROVIDER,"Attempting Solana connection",{walletId:this.selectedWalletId,walletName:t.name,onlyIfTrusted:e?.onlyIfTrusted});try{let s=(await t.providers.solana.connect(e?.onlyIfTrusted?{onlyIfTrusted:!0}:void 0)).publicKey;r.push({addressType:Ce.solana,address:s}),P.info(C.INJECTED_PROVIDER,"Solana connected successfully",{address:s,walletId:this.selectedWalletId,walletName:t.name})}catch(n){throw P.warn(C.INJECTED_PROVIDER,"Failed to connect Solana, stopping",{error:n,walletId:this.selectedWalletId,walletName:t.name}),this.emit("connect_error",{error:n instanceof Error?n.message:"Failed to connect",source:e?.skipEventListeners?"auto-connect":"manual-connect"}),n}}if(this.addressTypes.includes(Ce.ethereum)&&t.providers?.ethereum){P.log(C.INJECTED_PROVIDER,"Attempting Ethereum connection",{walletId:this.selectedWalletId,walletName:t.name,silent:e?.silent});try{let n;e?.silent?n=await t.providers.ethereum.request({method:"eth_accounts"}):n=await t.providers.ethereum.connect(),n.length>0&&(r.push(...n.map(s=>({addressType:Ce.ethereum,address:s}))),P.info(C.INJECTED_PROVIDER,"Ethereum connected successfully",{addresses:n,walletId:this.selectedWalletId,walletName:t.name}))}catch(n){throw P.warn(C.INJECTED_PROVIDER,"Failed to connect Ethereum, stopping",{error:n,walletId:this.selectedWalletId,walletName:t.name}),this.emit("connect_error",{error:n instanceof Error?n.message:"Failed to connect",source:e?.skipEventListeners?"auto-connect":"manual-connect"}),n}}return r}async finalizeConnection(t,e,r){if(t.length===0){let a=new Error("Failed to connect to any supported wallet provider");throw this.emit("connect_error",{error:a.message,source:"manual-connect"}),a}this.selectedWalletId&&this.setWalletState(this.selectedWalletId,{connected:!0,addresses:t}),P.log(C.INJECTED_PROVIDER,"Finalized connection with addresses",{addressCount:t.length,addresses:t.map(a=>({type:a.addressType,address:a.address.substring(0,10)+"..."}))});let n=await this.getAuthUserId("manual-connect");try{localStorage.setItem(Oh,dw),P.log(C.INJECTED_PROVIDER,"Set was-connected flag - auto-reconnect enabled"),this.selectedWalletId&&(localStorage.setItem(hw,this.selectedWalletId),P.log(C.INJECTED_PROVIDER,"Stored last injected wallet id",{walletId:this.selectedWalletId}))}catch(a){P.warn(C.INJECTED_PROVIDER,"Failed to persist injected provider state",{error:a})}let s=r?this.walletRegistry.getById(r):void 0,o=s?{id:s.id,name:s.name,icon:s.icon,addressTypes:s.addressTypes,rdns:s.rdns,discovery:s.discovery}:void 0,i={addresses:t,status:"completed",authUserId:n,authProvider:e,walletId:r,wallet:o};return this.emit("connect",{addresses:t,source:"manual-connect",authUserId:n,walletId:r}),i}async connect(t){if(P.info(C.INJECTED_PROVIDER,"Starting injected provider connect",{addressTypes:this.addressTypes,provider:t.provider}),t.provider!=="injected")throw new Error(`Invalid provider for injected connection: ${t.provider}. Must be "injected"`);let e=t.walletId||"phantom";this.emit("connect_start",{source:"manual-connect",providerType:"injected",walletId:e});try{let r=this.validateAndSelectWallet(e),n=await this.connectToWallet(r);return await this.finalizeConnection(n,"injected",this.selectedWalletId||void 0)}catch(r){throw this.emit("connect_error",{error:r instanceof Error?r.message:"Failed to connect",source:"manual-connect"}),r}}async disconnect(){P.info(C.INJECTED_PROVIDER,"Starting injected provider disconnect");let t=this.walletRegistry.getById(this.selectedWalletId||"phantom");if(t?.providers){if(this.addressTypes.includes(Ce.solana)&&t.providers.solana)try{await t.providers.solana.disconnect(),P.log(C.INJECTED_PROVIDER,"Solana disconnected successfully")}catch(n){P.warn(C.INJECTED_PROVIDER,"Failed to disconnect Solana",{error:n})}if(this.addressTypes.includes(Ce.ethereum)&&t.providers.ethereum)try{await t.providers.ethereum.disconnect(),P.log(C.INJECTED_PROVIDER,"Ethereum disconnected successfully")}catch(n){P.warn(C.INJECTED_PROVIDER,"Failed to disconnect Ethereum",{error:n})}}let e=this.selectedWalletId||"phantom",r=this.eventListenerCleanups.get(e);r&&(r.forEach(n=>n()),this.eventListenerCleanups.delete(e)),this.eventListenersSetup.delete(e),this.selectedWalletId&&this.setWalletState(this.selectedWalletId,{connected:!1,addresses:[]});try{localStorage.removeItem(Oh),P.log(C.INJECTED_PROVIDER,"Cleared was connected flag to prevent auto-reconnect")}catch(n){P.warn(C.INJECTED_PROVIDER,"Failed to clear was-connected flag",{error:n})}this.emit("disconnect",{source:"manual-disconnect"}),P.info(C.INJECTED_PROVIDER,"Injected provider disconnected successfully")}async autoConnect(){P.log(C.INJECTED_PROVIDER,"Attempting auto-connect");let t=null;try{if(localStorage.getItem(Oh)!==dw){P.log(C.INJECTED_PROVIDER,"Skipping auto-connect: user was not previously connected");return}t=localStorage.getItem(hw),P.log(C.INJECTED_PROVIDER,"User was previously connected, attempting auto-connect",{lastWalletId:t||"phantom"})}catch(e){P.warn(C.INJECTED_PROVIDER,"Failed to check was-connected flag",{error:e});return}this.emit("connect_start",{source:"auto-connect",providerType:"injected"});try{let e=t||"phantom";await this.waitForWalletDiscovery(e);let r=this.validateAndSelectWallet(e),n=[];try{n=await this.connectToWallet(r,{onlyIfTrusted:!0,silent:!0,skipEventListeners:!0})}catch(o){P.log(C.INJECTED_PROVIDER,"Auto-connect failed (expected if not trusted)",{error:o,walletId:this.selectedWalletId})}if(n.length===0){P.log(C.INJECTED_PROVIDER,"Auto-connect failed: no trusted connections available"),this.emit("connect_error",{error:"No trusted connections available",source:"auto-connect"});return}this.setupEventListeners(r),this.selectedWalletId&&this.setWalletState(this.selectedWalletId,{connected:!0,addresses:n});let s=await this.getAuthUserId("auto-connect");this.emit("connect",{addresses:n,source:"auto-connect",authUserId:s,walletId:this.selectedWalletId}),P.info(C.INJECTED_PROVIDER,"Auto-connect successful",{addressCount:n.length,addresses:n.map(o=>({type:o.addressType,address:o.address.substring(0,8)+"..."})),walletId:this.selectedWalletId,authUserId:s})}catch(e){P.log(C.INJECTED_PROVIDER,"Auto-connect failed with error",{error:e instanceof Error?e.message:String(e)}),this.emit("connect_error",{error:e instanceof Error?e.message:"Auto-connect failed",source:"auto-connect"})}}getWalletState(t){return this.walletStates.has(t)||this.walletStates.set(t,{connected:!1,addresses:[]}),this.walletStates.get(t)}setWalletState(t,e){this.walletStates.set(t,e)}updateWalletAddresses(t,e,r){let s=this.getWalletState(t).addresses.filter(a=>a.addressType!==r),o=e.map(a=>({addressType:r,address:a})),i=[...s,...o];return this.setWalletState(t,{connected:i.length>0,addresses:i}),i}getAccountChangeSource(t){return`${t}-account-change`}createSolanaConnectHandler(t,e){return async r=>{P.log(C.INJECTED_PROVIDER,"Solana connect event received",{publicKey:r,walletId:t});let n=this.updateWalletAddresses(t,[r],Ce.solana),s=await this.getAuthUserId("Solana connect event");this.emit("connect",{addresses:n,source:e,authUserId:s,walletId:this.selectedWalletId})}}createSolanaDisconnectHandler(t,e){return()=>{P.log(C.INJECTED_PROVIDER,"Solana disconnect event received",{walletId:t});let n=this.getWalletState(t).addresses.filter(s=>s.addressType!==Ce.solana);this.setWalletState(t,{connected:n.length>0,addresses:n}),this.emit("disconnect",{source:e})}}createSolanaAccountChangeHandler(t,e){return async r=>{if(P.log(C.INJECTED_PROVIDER,"Solana account changed event received",{publicKey:r,walletId:t}),r){let n=this.updateWalletAddresses(t,[r],Ce.solana),s=await this.getAuthUserId("Solana account changed event");this.emit("connect",{addresses:n,source:this.getAccountChangeSource(e),authUserId:s,walletId:this.selectedWalletId})}else{let s=this.getWalletState(t).addresses.filter(o=>o.addressType!==Ce.solana);this.setWalletState(t,{connected:s.length>0,addresses:s}),this.emit("disconnect",{source:this.getAccountChangeSource(e)})}}}createEthereumConnectHandler(t,e){return async r=>{let n=[];if(Array.isArray(r))n=r;else try{let s=this.walletRegistry.getById(t);s?.providers?.ethereum&&(n=await s.providers.ethereum.getAccounts())}catch(s){P.warn(C.INJECTED_PROVIDER,"Failed to get accounts on connect",{error:s})}if(P.log(C.INJECTED_PROVIDER,"Ethereum connect event received",{accounts:n,walletId:t}),n.length>0){let s=this.updateWalletAddresses(t,n,Ce.ethereum),o=await this.getAuthUserId("Ethereum connect event");this.emit("connect",{addresses:s,source:e,authUserId:o,walletId:this.selectedWalletId})}}}createEthereumDisconnectHandler(t,e){return()=>{P.log(C.INJECTED_PROVIDER,"Ethereum disconnect event received",{walletId:t});let n=this.getWalletState(t).addresses.filter(s=>s.addressType!==Ce.ethereum);this.setWalletState(t,{connected:n.length>0,addresses:n}),this.emit("disconnect",{source:e})}}createEthereumAccountChangeHandler(t,e){return async r=>{if(P.log(C.INJECTED_PROVIDER,"Ethereum accounts changed event received",{accounts:r,walletId:t}),r&&r.length>0){let n=this.updateWalletAddresses(t,r,Ce.ethereum),s=await this.getAuthUserId("Ethereum accounts changed event");this.emit("connect",{addresses:n,source:this.getAccountChangeSource(e),authUserId:s,walletId:this.selectedWalletId})}else{let s=this.getWalletState(t).addresses.filter(o=>o.addressType!==Ce.ethereum);this.setWalletState(t,{connected:s.length>0,addresses:s}),this.emit("disconnect",{source:this.getAccountChangeSource(e)})}}}getAddresses(){let t=this.selectedWalletId||"phantom";return this.getWalletState(t).addresses}getEnabledAddressTypes(){if(!this.selectedWalletId||this.selectedWalletId==="phantom")return this.addressTypes;let t=this.walletRegistry.getById(this.selectedWalletId);return t?t.addressTypes:this.addressTypes}isConnected(){let t=this.selectedWalletId||"phantom";return this.getWalletState(t).connected}async enableAutoConfirm(t){let e=this.walletRegistry.getById(this.selectedWalletId||"phantom");if(!$i(e))throw new Error("Auto-confirm is only available for Phantom wallet");return P.log(C.INJECTED_PROVIDER,"Enabling autoConfirm",{params:t}),await e.phantomInstance.autoConfirm.autoConfirmEnable(t)}async disableAutoConfirm(){let t=this.walletRegistry.getById(this.selectedWalletId||"phantom");if(!$i(t))throw new Error("Auto-confirm is only available for Phantom wallet");P.log(C.INJECTED_PROVIDER,"Disabling autoConfirm"),await t.phantomInstance.autoConfirm.autoConfirmDisable()}async getAutoConfirmStatus(){let t=this.walletRegistry.getById(this.selectedWalletId||"phantom");if(!$i(t))throw new Error("Auto-confirm is only available for Phantom wallet");return P.log(C.INJECTED_PROVIDER,"Getting autoConfirm status"),await t.phantomInstance.autoConfirm.autoConfirmStatus()}async getSupportedAutoConfirmChains(){let t=this.walletRegistry.getById(this.selectedWalletId||"phantom");if(!$i(t))throw new Error("Auto-confirm is only available for Phantom wallet");return P.log(C.INJECTED_PROVIDER,"Getting supported autoConfirm chains"),await t.phantomInstance.autoConfirm.autoConfirmSupportedChains()}async getAuthUserId(t){let e=this.walletRegistry.getById(this.selectedWalletId||"phantom");if($i(e))try{if(window.phantom?.app?.getUser){let n=(await window.phantom.app.getUser())?.authUserId;return n&&P.log(C.INJECTED_PROVIDER,`Retrieved authUserId from window.phantom.app.getUser() during ${t}`,{authUserId:n}),n}}catch(r){P.log(C.INJECTED_PROVIDER,`Failed to get user info during ${t} (method may not be supported)`,{error:r})}}on(t,e){if(P.log(C.INJECTED_PROVIDER,"Adding event listener",{event:t}),!this.eventsInitialized){let r=this.selectedWalletId||"phantom",n=this.walletRegistry.getById(r);n&&this.setupEventListeners(n)}this.eventListeners.has(t)||this.eventListeners.set(t,new Set),this.eventListeners.get(t)?.add(e)}off(t,e){P.log(C.INJECTED_PROVIDER,"Removing event listener",{event:t}),this.eventListeners.has(t)&&(this.eventListeners.get(t)?.delete(e),this.eventListeners.get(t)?.size===0&&this.eventListeners.delete(t))}emit(t,e){P.log(C.INJECTED_PROVIDER,"Emitting event",{event:t,listenerCount:this.eventListeners.get(t)?.size||0,data:e});let r=this.eventListeners.get(t);r&&r.size>0&&r.forEach(n=>{try{n(e)}catch(s){P.error(C.INJECTED_PROVIDER,"Event callback error",{event:t,error:s})}})}setupSolanaEventListeners(t,e,r){if(typeof t.on!="function")return;P.log(C.INJECTED_PROVIDER,"Setting up Solana event listeners",{walletId:e,source:r});let n={connect:this.createSolanaConnectHandler(e,r),disconnect:this.createSolanaDisconnectHandler(e,r),accountChanged:this.createSolanaAccountChangeHandler(e,r)};t.on("connect",n.connect),t.on("disconnect",n.disconnect),t.on("accountChanged",n.accountChanged);let s=[];typeof t.off=="function"&&s.push(()=>t.off("connect",n.connect),()=>t.off("disconnect",n.disconnect),()=>t.off("accountChanged",n.accountChanged));let o=this.eventListenerCleanups.get(e)||[];this.eventListenerCleanups.set(e,[...o,...s])}setupEthereumEventListeners(t,e,r){if(typeof t.on!="function")return;P.log(C.INJECTED_PROVIDER,"Setting up Ethereum event listeners",{walletId:e,source:r});let n={connect:this.createEthereumConnectHandler(e,r),disconnect:this.createEthereumDisconnectHandler(e,r),accountsChanged:this.createEthereumAccountChangeHandler(e,r)};t.on("connect",n.connect),t.on("disconnect",n.disconnect),t.on("accountsChanged",n.accountsChanged);let s=[];typeof t.off=="function"&&s.push(()=>t.off("connect",n.connect),()=>t.off("disconnect",n.disconnect),()=>t.off("accountsChanged",n.accountsChanged));let o=this.eventListenerCleanups.get(e)||[];this.eventListenerCleanups.set(e,[...o,...s])}setupEventListeners(t){let e=this.selectedWalletId||"phantom";if(this.eventListenersSetup.has(e)){P.log(C.INJECTED_PROVIDER,"Event listeners already set up for wallet",{walletId:e});return}for(let r of this.eventListenersSetup){if(r===e)continue;let n=this.eventListenerCleanups.get(r);n&&(P.log(C.INJECTED_PROVIDER,"Cleaning up event listeners for wallet",{existingWalletId:r}),n.forEach(s=>s())),this.eventListenersSetup.delete(r)}P.log(C.INJECTED_PROVIDER,"Setting up event listeners",{walletId:e}),this.addressTypes.includes(Ce.solana)&&t.providers?.solana&&this.setupSolanaEventListeners(t.providers.solana,e,"wallet"),this.addressTypes.includes(Ce.ethereum)&&t.providers?.ethereum&&this.setupEthereumEventListeners(t.providers.ethereum,e,"wallet"),this.eventListenersSetup.add(e),this.eventsInitialized=!0}},OT=class{constructor(){this.dbName="phantom-browser-sdk",this.storeName="sessions",this.version=1}async getDB(){return new Promise((t,e)=>{let r=indexedDB.open(this.dbName,this.version);r.onerror=()=>e(r.error),r.onsuccess=()=>t(r.result),r.onupgradeneeded=n=>{let s=n.target.result;s.objectStoreNames.contains(this.storeName)||s.createObjectStore(this.storeName)}})}async getSession(){P.log(C.STORAGE,"Getting session from IndexedDB");let t=await this.getDB();return new Promise((e,r)=>{let o=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get("currentSession");o.onsuccess=()=>{let i=o.result||null;P.log(C.STORAGE,"Retrieved session from IndexedDB",{hasSession:!!i,sessionId:i?.sessionId}),e(i)},o.onerror=()=>{P.error(C.STORAGE,"Failed to get session from IndexedDB",{error:o.error}),r(o.error)}})}async saveSession(t){P.log(C.STORAGE,"Saving session to IndexedDB",{sessionId:t.sessionId,walletId:t.walletId,status:t.status});let e=await this.getDB();return new Promise((r,n)=>{let i=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t,"currentSession");i.onsuccess=()=>{P.log(C.STORAGE,"Successfully saved session to IndexedDB"),r()},i.onerror=()=>{P.error(C.STORAGE,"Failed to save session to IndexedDB",{error:i.error}),n(i.error)}})}async clearSession(){P.log(C.STORAGE,"Clearing session from IndexedDB");let t=await this.getDB();return new Promise((e,r)=>{let o=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete("currentSession");o.onsuccess=()=>{P.log(C.STORAGE,"Successfully cleared session from IndexedDB"),e()},o.onerror=()=>{P.error(C.STORAGE,"Failed to clear session from IndexedDB",{error:o.error}),r(o.error)}})}async getShouldClearPreviousSession(){P.log(C.STORAGE,"Getting shouldClearPreviousSession flag from IndexedDB");let t=await this.getDB();return new Promise((e,r)=>{let o=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get("shouldClearPreviousSession");o.onsuccess=()=>{let i=o.result??!1;P.log(C.STORAGE,"Retrieved shouldClearPreviousSession flag from IndexedDB",{shouldClear:i}),e(i)},o.onerror=()=>{P.error(C.STORAGE,"Failed to get shouldClearPreviousSession flag from IndexedDB",{error:o.error}),r(o.error)}})}async setShouldClearPreviousSession(t){P.log(C.STORAGE,"Setting shouldClearPreviousSession flag in IndexedDB",{should:t});let e=await this.getDB();return new Promise((r,n)=>{let i=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t,"shouldClearPreviousSession");i.onsuccess=()=>{P.log(C.STORAGE,"Successfully set shouldClearPreviousSession flag in IndexedDB"),r()},i.onerror=()=>{P.error(C.STORAGE,"Failed to set shouldClearPreviousSession flag in IndexedDB",{error:i.error}),n(i.error)}})}},yw=class{getParam(t){return new URLSearchParams(window.location.search).get(t)}},VD=new yw;function NT(t,e){let r="unknown",n="unknown";if(!t||typeof t!="string")return{name:r,version:n,userAgent:"unknown"};try{if(t.includes("Edg/")){r="edge";let s=t.match(/Edg\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else if(t.includes("OPR/")||t.includes("Opera/")){r="opera";let s=t.match(/(?:OPR|Opera)\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else if(t.includes("SamsungBrowser/")){r="samsung";let s=t.match(/SamsungBrowser\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else if(t.includes("DuckDuckGo/")){r="duckduckgo";let s=t.match(/DuckDuckGo\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else if(t.includes("Chrome/")&&e){r="brave";let s=t.match(/Chrome\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else if(t.includes("Mobile/")||t.includes("Android"))if(t.includes("Chrome/")){r="chrome-mobile";let s=t.match(/Chrome\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else if(t.includes("Firefox/")){r="firefox-mobile";let s=t.match(/Firefox\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else if(t.includes("Safari/")&&t.includes("Mobile/")){r="safari-mobile";let s=t.match(/Version\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else r="mobile";else if(t.includes("Chrome/")){r="chrome";let s=t.match(/Chrome\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else if(t.includes("Firefox/")){r="firefox";let s=t.match(/Firefox\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}else if(t.includes("Safari/")&&!t.includes("Chrome/")){r="safari";let s=t.match(/Version\/([0-9]+(?:\.[0-9]+)*)/);s&&(n=s[1].split(".")[0])}if(r==="unknown"){let s=[{regex:/Chrome\/([0-9]+)/,name:"chrome"},{regex:/Firefox\/([0-9]+)/,name:"firefox"},{regex:/Safari\/([0-9]+)/,name:"safari"},{regex:/Edge\/([0-9]+)/,name:"edge"},{regex:/Opera\/([0-9]+)/,name:"opera"}];for(let o of s){let i=t.match(o.regex);if(i){r=o.name,n=i[1];break}}}}catch{}return{name:r,version:n,userAgent:t}}function Bh(){if(typeof window>"u"||!window.navigator?.userAgent)return{name:"unknown",version:"unknown",userAgent:"unknown"};let t=window.navigator.userAgent,e=!!navigator.brave;return NT(t,e)}function BT(){let{name:t,version:e}=Bh();return e!=="unknown"?`${t}-v${e}`:t}var kT=class{constructor(t){this.urlParamsAccessor=t}getValidatedCurrentUrl(){let t=window.location.href;if(!t.startsWith("http:")&&!t.startsWith("https:"))throw new Error("Invalid URL protocol - only HTTP/HTTPS URLs are supported");return t}authenticate(t){return new Promise(e=>{if("jwtToken"in t)throw new Error("JWT authentication should be handled by the core JWTAuth class");let r=t;P.info(C.PHANTOM_CONNECT_AUTH,"Starting Phantom Connect authentication",{publicKey:r.publicKey,appId:r.appId,provider:r.provider,authUrl:r.authUrl});let n=r.authUrl||Bc;P.log(C.PHANTOM_CONNECT_AUTH,"Using auth URL",{baseUrl:n});let s=new URLSearchParams({public_key:r.publicKey,app_id:r.appId,redirect_uri:r.redirectUrl||(typeof window<"u"?this.getValidatedCurrentUrl():""),session_id:r.sessionId,clear_previous_session:(r.clearPreviousSession??!1).toString(),allow_refresh:(r.allowRefresh??!0).toString(),sdk_version:"1.0.3",sdk_type:"browser",platform:Bh().name,algorithm:r.algorithm||la});r.provider?(P.log(C.PHANTOM_CONNECT_AUTH,"Provider specified, will skip selection",{provider:r.provider}),s.append("provider",r.provider)):(P.log(C.PHANTOM_CONNECT_AUTH,"No provider specified, defaulting to Google"),s.append("provider","google"));let o={publicKey:r.publicKey,appId:r.appId,provider:r.provider,sessionId:r.sessionId};sessionStorage.setItem("phantom-auth-context",JSON.stringify(o)),P.log(C.PHANTOM_CONNECT_AUTH,"Stored auth context in session storage",{authContext:o});let i=`${n}?${s.toString()}`;if(P.info(C.PHANTOM_CONNECT_AUTH,"Redirecting to Phantom Connect",{authUrl:i}),!i.startsWith("https:")&&!i.startsWith("http://localhost"))throw new Error("Invalid auth URL - only HTTPS URLs are allowed for authentication");window.location.href=i,e()})}resumeAuthFromRedirect(t){try{let e=this.urlParamsAccessor.getParam("wallet_id"),r=this.urlParamsAccessor.getParam("session_id"),n=this.urlParamsAccessor.getParam("selected_account_index"),s=this.urlParamsAccessor.getParam("error"),o=this.urlParamsAccessor.getParam("error_description");if(s){let y=o||s;switch(s){case"access_denied":throw new Error(`Authentication cancelled: ${y}`);case"invalid_request":throw new Error(`Invalid authentication request: ${y}`);case"server_error":throw new Error(`Authentication server error: ${y}`);case"temporarily_unavailable":throw new Error(`Authentication service temporarily unavailable: ${y}`);default:throw new Error(`Authentication failed: ${y}`)}}if(!e||!r)return P.log(C.PHANTOM_CONNECT_AUTH,"Missing auth parameters in URL",{hasWalletId:!!e,hasSessionId:!!r}),null;let i=sessionStorage.getItem("phantom-auth-context"),a={};if(i)try{a=JSON.parse(i)}catch(y){P.warn(C.PHANTOM_CONNECT_AUTH,"Failed to parse stored auth context",{error:y})}if(a.sessionId&&r!==a.sessionId)throw P.error(C.PHANTOM_CONNECT_AUTH,"Session ID mismatch",{urlSessionId:r,storedSessionId:a.sessionId}),new Error("Session ID mismatch - possible session corruption or replay attack");sessionStorage.removeItem("phantom-auth-context"),P.info(C.PHANTOM_CONNECT_AUTH,"Successfully resumed auth from redirect",{walletId:e,sessionId:r,accountDerivationIndex:n?parseInt(n):void 0});let u=this.urlParamsAccessor.getParam("organization_id"),h=this.urlParamsAccessor.getParam("expires_in_ms"),m=this.urlParamsAccessor.getParam("auth_user_id");if(P.log(C.PHANTOM_CONNECT_AUTH,"Auth redirect parameters",{walletId:e,organizationId:u,sessionId:r,accountDerivationIndex:n,expiresInMs:h,authUserId:m}),!u)throw P.error(C.PHANTOM_CONNECT_AUTH,"Missing organization_id in auth response"),new Error("Missing organization_id in auth response");return u.startsWith("temp-")&&P.warn(C.PHANTOM_CONNECT_AUTH,"Received temporary organization_id, server may not be configured properly",{organizationId:u}),{walletId:e,organizationId:u,accountDerivationIndex:n?parseInt(n):0,expiresInMs:h?parseInt(h):0,authUserId:m||void 0,provider:t}}catch(e){throw sessionStorage.removeItem("phantom-auth-context"),e}}};async function kh(t=3e3){return new Promise(e=>{let r=Date.now(),n=100,s=()=>{try{if(po()){e(!0);return}}catch{}if(Date.now()-r>=t){e(!1);return}setTimeout(s,n)};s()})}async function PT(t=3e3){if(!await kh(t))return!1;try{if(!window.phantom?.app?.features||typeof window.phantom.app.features!="function")return!1;let r=await window.phantom.app.features();return Array.isArray(r.features)?r.features.includes("phantom_login"):!1}catch(r){return console.error("Error checking Phantom extension features",r),!1}}var CT=class{isAvailable(){return po()}async authenticate(t){if(!this.isAvailable())throw new Error("Phantom extension is not installed. Please install the Phantom browser extension to use this authentication method.");if(!await PT())throw new Error("Phantom Login is not available. Please update your Phantom extension to use this authentication method.");try{if(!window.phantom?.app?.login)throw new Error("Phantom extension login method not found");let r=await window.phantom.app.login({publicKey:t.publicKey,appId:t.appId,sessionId:t.sessionId});if(!r||!r.walletId||!r.organizationId)throw new Error("Invalid authentication response from Phantom extension");return{walletId:r.walletId,organizationId:r.organizationId,provider:"phantom",accountDerivationIndex:r.accountDerivationIndex??0,expiresInMs:r.expiresInMs??0,authUserId:r.authUserId}}catch(r){throw r instanceof Error?r:new Error(`Phantom extension authentication failed: ${String(r)}`)}}},LT=class{info(t,e,r){P.info(t,e,r)}warn(t,e,r){P.warn(t,e,r)}error(t,e,r){P.error(t,e,r)}log(t,e,r){P.log(t,e,r)}},DT=class extends aw{constructor(t){P.log(C.EMBEDDED_PROVIDER,"Initializing Browser EmbeddedProvider",{config:t});let e=new yw,r=new cw({dbName:`phantom-embedded-sdk-${t.appId}`,storeName:"crypto-keys",keyName:"signing-key"}),n=BT(),{name:s,version:o}=Bh(),i={storage:new OT,authProvider:new kT(e),phantomAppProvider:new CT,urlParamsAccessor:e,stamper:r,name:n,analyticsHeaders:{[ho.SDK_TYPE]:"browser",[ho.PLATFORM]:s,[ho.PLATFORM_VERSION]:o,[ho.APP_ID]:t.appId,[ho.WALLET_TYPE]:t.embeddedWalletType,[ho.SDK_VERSION]:"1.0.3"}};P.log(C.EMBEDDED_PROVIDER,"Detected platform",{platformName:n});let a=new LT;super(t,i,a),this.addressTypes=t.addressTypes,P.info(C.EMBEDDED_PROVIDER,"Browser EmbeddedProvider initialized")}getEnabledAddressTypes(){return this.addressTypes}};function MT(t){if(typeof window>"u"&&!t)return!1;let e=t||new URLSearchParams(window.location.search),r=e.get("response_type"),n=e.get("session_id");return r==="failure"&&!!n}function UT(t){if(typeof window>"u"&&!t)return!1;let e=t||new URLSearchParams(window.location.search);return!!(e.get("session_id")&&(e.has("response_type")||e.has("wallet_id")))}function zT(t,e){let r=e??window.location.href;if(!r.startsWith("http:")&&!r.startsWith("https:"))throw new Error("Invalid URL protocol - only HTTP/HTTPS URLs are supported for deeplinks");let n=encodeURIComponent(r),s=t?`?ref=${encodeURIComponent(t)}`:"";return`https://phantom.app/ul/browse/${n}${s}`}var FT=class{constructor(t){this.providers=new Map,this.currentProvider=null,this.currentProviderKey=null,this.eventListeners=new Map,this.providerForwardingSetup=new WeakSet,P.log(C.PROVIDER_MANAGER,"Initializing ProviderManager",{config:t}),this.config=t,P.log(C.PROVIDER_MANAGER,"Setting default provider"),this.setDefaultProvider(),P.info(C.PROVIDER_MANAGER,"ProviderManager initialized",{currentProviderKey:this.currentProviderKey})}getValidatedCurrentUrl(){if(typeof window>"u")return"";let t=window.location.href;if(!t.startsWith("http:")&&!t.startsWith("https:"))throw new Error("Invalid URL protocol - only HTTP/HTTPS URLs are supported");return t}switchProvider(t,e){if(e?.embeddedWalletType&&!["app-wallet","user-wallet"].includes(e.embeddedWalletType))throw new Error(`Invalid embeddedWalletType: ${e.embeddedWalletType}. Must be "app-wallet" or "user-wallet".`);let r=this.getProviderKey(t,e?.embeddedWalletType);return this.providers.has(r)||this.createProvider(t,e?.embeddedWalletType),this.currentProvider=this.providers.get(r),this.currentProviderKey=r,this.ensureProviderEventForwarding(),this.currentProvider}getCurrentProvider(){return this.currentProvider}getCurrentProviderInfo(){if(!this.currentProviderKey)return null;let t=this.currentProviderKey.split("-"),[e,r]=t;return{type:e,embeddedWalletType:r}}isProviderAllowed(t){return this.config.providers.includes(t)}async connect(t){if(P.info(C.PROVIDER_MANAGER,"Starting connection",{currentProviderKey:this.currentProviderKey,authOptions:{provider:t.provider}}),!this.isProviderAllowed(t.provider)){let s=`Provider "${t.provider}" is not in the allowed providers list: ${JSON.stringify(this.config.providers)}`;throw P.error(C.PROVIDER_MANAGER,s),new Error(s)}let e=t.provider,r=null;if(e==="injected")r="injected";else if(e==="deeplink")try{let s=zT();if(typeof window<"u"&&window.location)try{window.location.href=s}catch(o){P.warn(C.PROVIDER_MANAGER,"Failed to set deeplink location",{error:o instanceof Error?o.message:String(o)})}return{addresses:[],walletId:void 0,authUserId:void 0}}catch(s){let o=s instanceof Error?s.message:"Failed to open deeplink";throw P.error(C.PROVIDER_MANAGER,"Deeplink error",{error:o}),new Error(`Failed to open deeplink: ${o}`)}else qi.includes(e)&&(r="embedded");if(r){let s=this.getCurrentProviderInfo();if(s?.type!==r){P.log(C.PROVIDER_MANAGER,"Auto-switching provider based on auth options",{from:s?.type,to:r,requestedProvider:e});let o={};r==="embedded"&&(o.embeddedWalletType=s?.embeddedWalletType||this.config.embeddedWalletType),this.switchProvider(r,o)}}if(!this.currentProvider)throw P.error(C.PROVIDER_MANAGER,"No provider selected"),new Error("No provider selected");P.log(C.PROVIDER_MANAGER,"Delegating to provider connect method");let n=await this.currentProvider.connect(t);return P.log(C.PROVIDER_MANAGER,"Connection successful, saving preferences",{addressCount:n.addresses?.length||0,provider:t.provider}),this.saveProviderPreference(),P.info(C.PROVIDER_MANAGER,"Connect completed",{addresses:n.addresses,provider:t.provider}),n}async disconnect(){this.currentProvider&&await this.currentProvider.disconnect()}getAddresses(){return this.currentProvider?this.currentProvider.getAddresses():[]}isConnected(){return this.currentProvider?.isConnected()??!1}async autoConnect(){if(P.log(C.PROVIDER_MANAGER,"Starting auto-connect with fallback strategy"),MT())return P.warn(C.PROVIDER_MANAGER,"Auth failure detected in URL, skipping autoConnect fallback"),!1;let t=this.config.embeddedWalletType||"user-wallet",e=this.getProviderKey("embedded",t);if(this.config.providers.some(o=>o!=="injected")&&this.providers.has(e)){P.log(C.PROVIDER_MANAGER,"Trying auto-connect with existing embedded provider");let o=this.providers.get(e);try{let i=this.currentProvider,a=this.currentProviderKey;if(this.currentProvider=o,this.currentProviderKey=e,this.ensureProviderEventForwarding(),await o.autoConnect(),o.isConnected())return P.info(C.PROVIDER_MANAGER,"Embedded auto-connect successful"),this.saveProviderPreference(),!0;P.log(C.PROVIDER_MANAGER,"Embedded provider did not connect, restoring previous provider"),this.currentProvider=i,this.currentProviderKey=a}catch(i){if(P.log(C.PROVIDER_MANAGER,"Embedded auto-connect failed",{error:i.message}),UT())return P.log(C.PROVIDER_MANAGER,"In auth callback URL, not attempting injected fallback"),!1}}let n=this.config.providers.includes("injected"),s=this.getProviderKey("injected");if(n&&this.providers.has(s)){P.log(C.PROVIDER_MANAGER,"Trying auto-connect with existing injected provider");let o=this.providers.get(s);try{if(this.currentProvider=o,this.currentProviderKey=s,this.ensureProviderEventForwarding(),await o.autoConnect(),o.isConnected())return P.info(C.PROVIDER_MANAGER,"Injected auto-connect successful"),this.saveProviderPreference(),!0}catch(i){P.log(C.PROVIDER_MANAGER,"Injected auto-connect failed",{error:i.message})}}return P.log(C.PROVIDER_MANAGER,"Auto-connect failed for all allowed providers"),!1}on(t,e){P.log(C.PROVIDER_MANAGER,"Adding event listener",{event:t}),this.eventListeners.has(t)||this.eventListeners.set(t,new Set),this.eventListeners.get(t)?.add(e),this.ensureProviderEventForwarding()}off(t,e){P.log(C.PROVIDER_MANAGER,"Removing event listener",{event:t}),this.eventListeners.has(t)&&(this.eventListeners.get(t)?.delete(e),this.eventListeners.get(t)?.size===0&&this.eventListeners.delete(t))}emit(t,e){P.log(C.PROVIDER_MANAGER,"Emitting event to stored callbacks",{event:t,listenerCount:this.eventListeners.get(t)?.size||0,data:e});let r=this.eventListeners.get(t);r&&r.size>0?r.forEach(n=>{try{P.log(C.PROVIDER_MANAGER,"Calling stored callback for event",{event:t}),n(e)}catch(s){P.error(C.PROVIDER_MANAGER,"Event callback error",{event:t,error:s})}}):P.warn(C.PROVIDER_MANAGER,"No stored callbacks for event",{event:t})}ensureProviderEventForwarding(){if(!this.currentProvider||!("on"in this.currentProvider)){P.warn(C.PROVIDER_MANAGER,"Current provider does not support events",{providerType:this.getCurrentProviderInfo()?.type});return}if(this.providerForwardingSetup.has(this.currentProvider)){P.log(C.PROVIDER_MANAGER,"Event forwarding already set up for current provider");return}P.log(C.PROVIDER_MANAGER,"Setting up event forwarding from current provider");let t=["connect_start","connect","connect_error","disconnect","error","spending_limit_reached"];for(let e of t){let r=n=>{P.log(C.PROVIDER_MANAGER,"Forwarding event from provider",{event:e,data:n}),this.emit(e,n)};P.log(C.PROVIDER_MANAGER,"Attaching forwarding callback for event",{event:e}),this.currentProvider.on(e,r)}this.providerForwardingSetup.add(this.currentProvider)}setDefaultProvider(){let t=this.config.embeddedWalletType||"user-wallet",e=this.config.providers.includes("injected"),r=this.config.providers.some(o=>o!=="injected"&&o!=="deeplink");e&&(P.log(C.PROVIDER_MANAGER,"Creating injected provider (allowed by providers array)"),this.createProvider("injected")),r&&(P.log(C.PROVIDER_MANAGER,"Creating embedded provider (allowed by providers array)"),this.createProvider("embedded",t));let n;if(r&&this.providers.has(`embedded-${t}`))n="embedded";else if(e&&this.providers.has("injected"))n="injected";else throw new Error("No valid providers could be created from the providers array");let s={};n==="embedded"&&(s.embeddedWalletType=t),this.switchProvider(n,s)}createProvider(t,e){let r=this.getProviderKey(t,e);if(this.providers.has(r))return;let n;if(t==="injected")n=new TT({addressTypes:this.config.addressTypes||[Ce.solana]});else if(t==="embedded"){if(!this.config.appId)throw new Error("appId is required for embedded provider");let s=this.config.apiBaseUrl||Y0,o=this.config.authOptions?.authUrl||Bc;n=new DT({apiBaseUrl:s,appId:this.config.appId,authOptions:{...this.config.authOptions||{},authUrl:o,redirectUrl:this.config.authOptions?.redirectUrl||this.getValidatedCurrentUrl()},embeddedWalletType:e||kc,addressTypes:this.config.addressTypes||[Ce.solana]})}else throw new Error(`Unsupported provider type: ${t}`);this.providers.set(r,n)}getProviderKey(t,e){if(t==="injected")return"injected";if(t==="embedded")return`embedded-${e||"app-wallet"}`;throw new Error(`Unsupported provider type: ${t}`)}saveProviderPreference(){try{let t=this.getCurrentProviderInfo();t&&localStorage.setItem("phantom-provider-preference",JSON.stringify(t))}catch(t){console.error("Failed to save provider preference:",t)}}},Nh=[...qi,"injected","deeplink"],ww=class{constructor(t){if(this.walletRegistry=mw(),this.isLoading=!0,P.info(C.BROWSER_SDK,"Initializing BrowserSDK",{providers:t.providers,embeddedWalletType:t.embeddedWalletType,addressTypes:t.addressTypes}),!Array.isArray(t.providers)||t.providers.length===0)throw P.error(C.BROWSER_SDK,"Invalid providers array",{providers:t.providers}),new Error("providers must be a non-empty array of AuthProviderType");let e=t.providers.filter(s=>!Nh.includes(s));if(e.length>0)throw P.error(C.BROWSER_SDK,"Invalid provider types",{invalidProviders:e,validProviders:Nh}),new Error(`Invalid provider type(s): ${e.join(", ")}. Valid providers are: ${Nh.join(", ")}`);if(t.providers.some(s=>s!=="injected")&&!t.appId)throw P.error(C.BROWSER_SDK,"appId required for embedded providers",{providers:t.providers}),new Error("appId is required when using embedded providers (google, apple, phantom, etc.)");let n=t.embeddedWalletType||kc;if(!["app-wallet","user-wallet"].includes(n))throw P.error(C.BROWSER_SDK,"Invalid embeddedWalletType",{embeddedWalletType:t.embeddedWalletType}),new Error(`Invalid embeddedWalletType: ${t.embeddedWalletType}. Must be "app-wallet" or "user-wallet".`);this.config=t,this.providerManager=new FT(t),this.discoverWallets()}discoverWallets(){return this.walletRegistry.discover(this.config.addressTypes).finally(()=>{this.isLoading=!1})}get solana(){let t=this.providerManager.getCurrentProvider();if(!t)throw new Error("No provider available. Call connect() first.");return t.solana}get ethereum(){let t=this.providerManager.getCurrentProvider();if(!t)throw new Error("No provider available. Call connect() first.");return t.ethereum}async connect(t){P.info(C.BROWSER_SDK,"Starting connection",t);try{let e=await this.providerManager.connect(t);return P.info(C.BROWSER_SDK,"Connection successful",{addressCount:e.addresses.length,status:e.status}),e}catch(e){throw P.error(C.BROWSER_SDK,"Connection failed",{error:e.message}),e}}async disconnect(){P.info(C.BROWSER_SDK,"Disconnecting");try{await this.providerManager.disconnect(),P.info(C.BROWSER_SDK,"Disconnection successful")}catch(t){throw P.error(C.BROWSER_SDK,"Disconnection failed",{error:t.message}),t}}isConnected(){return this.providerManager.isConnected()}getAddresses(){return this.providerManager.getAddresses()}getCurrentProviderInfo(){return this.providerManager.getCurrentProviderInfo()}getEnabledAddressTypes(){let t=this.providerManager.getCurrentProvider();return t?t.getEnabledAddressTypes():[]}on(t,e){P.log(C.BROWSER_SDK,"Adding event listener",{event:t}),this.providerManager.on(t,e)}off(t,e){P.log(C.BROWSER_SDK,"Removing event listener",{event:t}),this.providerManager.off(t,e)}async autoConnect(){P.log(C.BROWSER_SDK,"Attempting auto-connect with fallback strategy"),await this.discoverWallets(),await this.providerManager.autoConnect()?P.info(C.BROWSER_SDK,"Auto-connect successful",{providerType:this.getCurrentProviderInfo()?.type}):P.log(C.BROWSER_SDK,"Auto-connect failed for all providers")}enableDebug(){P.enable(),P.info(C.BROWSER_SDK,"Debug logging enabled")}disableDebug(){P.disable()}setDebugLevel(t){P.setLevel(t),P.info(C.BROWSER_SDK,"Debug level updated",{level:t})}setDebugCallback(t){P.setCallback(t),P.info(C.BROWSER_SDK,"Debug callback updated")}configureDebug(t){t.enabled!==void 0&&(t.enabled?this.enableDebug():this.disableDebug()),t.level!==void 0&&this.setDebugLevel(t.level),t.callback!==void 0&&this.setDebugCallback(t.callback)}async enableAutoConfirm(t){P.info(C.BROWSER_SDK,"Enabling auto-confirm",{params:t});let e=this.providerManager.getCurrentProvider();if(!e)throw new Error("No provider available. Call connect() first.");if(!("enableAutoConfirm"in e))throw new Error("Auto-confirm is only available for injected providers");try{let r=await e.enableAutoConfirm(t);return P.info(C.BROWSER_SDK,"Auto-confirm enabled successfully",{result:r}),r}catch(r){throw P.error(C.BROWSER_SDK,"Failed to enable auto-confirm",{error:r.message}),r}}async disableAutoConfirm(){P.info(C.BROWSER_SDK,"Disabling auto-confirm");let t=this.providerManager.getCurrentProvider();if(!t)throw new Error("No provider available. Call connect() first.");if(!("disableAutoConfirm"in t))throw new Error("Auto-confirm is only available for injected providers");try{await t.disableAutoConfirm(),P.info(C.BROWSER_SDK,"Auto-confirm disabled successfully")}catch(e){throw P.error(C.BROWSER_SDK,"Failed to disable auto-confirm",{error:e.message}),e}}async getAutoConfirmStatus(){P.info(C.BROWSER_SDK,"Getting auto-confirm status");let t=this.providerManager.getCurrentProvider();if(!t)throw new Error("No provider available. Call connect() first.");if(!("getAutoConfirmStatus"in t))throw new Error("Auto-confirm is only available for injected providers");try{let e=await t.getAutoConfirmStatus();return P.info(C.BROWSER_SDK,"Got auto-confirm status",{result:e}),e}catch(e){throw P.error(C.BROWSER_SDK,"Failed to get auto-confirm status",{error:e.message}),e}}async getSupportedAutoConfirmChains(){P.info(C.BROWSER_SDK,"Getting supported auto-confirm chains");let t=this.providerManager.getCurrentProvider();if(!t)throw new Error("No provider available. Call connect() first.");if(!("getSupportedAutoConfirmChains"in t))throw new Error("Auto-confirm is only available for injected providers");try{let e=await t.getSupportedAutoConfirmChains();return P.info(C.BROWSER_SDK,"Got supported auto-confirm chains",{result:e}),e}catch(e){throw P.error(C.BROWSER_SDK,"Failed to get supported auto-confirm chains",{error:e.message}),e}}getDiscoveredWallets(){P.log(C.BROWSER_SDK,"Getting discovered wallets");try{let t=this.walletRegistry.getByAddressTypes(this.config.addressTypes);return P.log(C.BROWSER_SDK,"Retrieved discovered wallets",{count:t.length,walletIds:t.map(e=>e.id)}),t}catch(t){return P.error(C.BROWSER_SDK,"Failed to get discovered wallets",{error:t.message}),[]}}};window.KINPhantomBrowserSdk={BrowserSDK:ww,AddressType:Ce,waitForPhantomExtension:kh};})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@noble/hashes/esm/utils.js:
@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
@noble/curves/esm/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
